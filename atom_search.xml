<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[itoutline.me]]></title>
  <link href="http://itoutline.me/atom.xml" rel="self"/>
  <link href="http://itoutline.me/"/>
  <updated>2018-07-12T00:49:58+00:00</updated>
  <id>http://itoutline.me/</id>
  <author>
    <name><![CDATA[itoutline.me]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[WSL - Ubuntu 18.04 - xfce4-terminal]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2018/05/05/Ubuntu-18-04/"/>
    <updated>2018-05-05T16:15:00+00:00</updated>
    <id>http://itoutline.me/2018/05/05/Ubuntu-18-04</id>
    <content type="html"><![CDATA[<p>Ubuntu 18.04 ma nowszą wersję xfce4-terminal 0.8.7.3 i jest w niej poprawiony pewien szczegół który mnie irytował, przypadkowe przechodzenie w tryb zaznaczania przy kliknięciu na okno xfce4. Bardzo łatwo było to zrobić i jeśli akurat miało się coś w schowku to trzeba było ponownie do niego kopiować. Teraz jest normalnie a na dodatek zaznaczenie blokowe w terminalu z wciśniętym <kbd>Shift</kbd> i <kbd>Ctrl</kbd> działa świetnie.</p>

<p>Została też poprawiona obsługa zmiennej <code>TERM</code> i <code>COLORTERM</code>, teraz sam xfce4 ustawia je bez konieczności dosyć złej praktyki modyfikowania ich w <code>.bashrc</code> itp.:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>TERM=xterm-256color
</span><span class='line'>COLORTERM=truecolor</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Testowałem różne rozwiązania terminalowe na Windows - mintty, putty (via server ssh), Hyper, cmder), chyba tylko xfce4-terminal jest teraz bardzo bliski tego czego bym oczekiwał po terminalu (nawet mimo tego, że trzeba go uruchamiać przez Server X). Jest prawie tak dobry jak iTerm2 na OSX ;)</p>

<p>Dla odważnych <code>sudo do-release-upgrade -d</code> :)</p>

<p> <img src="http://itoutline.me/images/xfce4-terminal-WSL.png"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Home Cloud]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2017/12/01/Unraid-part-1/"/>
    <updated>2017-12-01T16:10:00+00:00</updated>
    <id>http://itoutline.me/2017/12/01/Unraid-part-1</id>
    <content type="html"><![CDATA[<p>Kilka lat temu pozbyłem się z domu &ldquo;blaszaka&rdquo;. Nie gram, w związku z czym w miarę wydajny laptop miał mi spokojnie wystarczyć. No i w sumie tak było, brakowało mi tylko jednej rzeczy, jakiegoś wspólnego domowego zasobu sieciowego. Nie było to jakoś krytyczne, podejmowałem próby z BananaPi wyposażonym w port sata (bardzo słabo), podpinałem dysk do posiadanych routerów po USB3 (niewiele lepiej) a na dodatek ciągle miałem w głowie, że jeśli mi ten dysk padnie to tracę wszystko w związku z czym jakichś krytycznych rzeczy tam nie trzymałem. </br></br>
W końcu zdecydowałem się jakoś docelowo rozwiązać problem i wybór padł na NAS Asus 6202T. Rozwiązanie sprawdzało się całkiem dobrze ale pojawiła się potrzeba &ldquo;upchnięcia&rdquo; trochę większej ilości wirtualnych maszyn, wersja Docker-a była nie tą, której potrzebowałem, brak wsparcia dla osobnych dysków SSD (w tamtym czasie) i jakieś inne drobne rzeczy skłoniły mnie do poszukania czegoś innego.
</br></br>
No i trafiłem na Unraid-a. Jest to dedykowany pod storage OS oparty na Linuxie. Podstawowe zalety w mojej ocenie:</p>

<ul>
<li>Wsparcie dla wirtualizacji/dokeryzacji.</li>
<li>Obsługa SSD przez tzw. &ldquo;cache pool&rdquo;.</li>
<li>Bardzo łatwe dodawanie nowych docker-ów.</li>
<li>Niezależność od dostawcy sprzętu, to chyba największy plus, kupuje komponenty dokładnie take jakich potrzebuje. (Ludzie preferujący rozwiązania &ldquo;półkowe&rdquo; niekoniecznie uznają to za zaletę).</li>
<li>Możliwość &ldquo;podpięcia&rdquo; karty graficznej bezpośrednio do VM, dzięki czemu nie ma różnicy pomiędzy pracą na maszynie fizycznej a VM.</li>
<li>Całość ruchu sieciowego pomiędzy wszystkimi hostami odbywa się w obrębie jednej fizycznej maszyny:</li>
</ul>


<p> <img src="http://itoutline.me/images/unraid_hdd_speed.PNG"></p>

<ul>
<li>Duża frajda z posiadania własnej chmury, Plex + NextCloud + Collabora + draw.io (Collabora - pakiet biurowy, może odstaje nieco jakością od rozwiązań gigantów ale już z draw.io korzysta mi się lepiej niż z Visio).</li>
<li>Wszytko jest na dyskach w RAID (co nie zwalnia z backup-ów ale zdecydowanie jest raźniej ;)</li>
</ul>


<p>Wady:</p>

<ul>
<li>Większe zużycie energii 50W, w przypadku Asus-a 10W (wartości mocno uśrednione). Coś za coś, I7 8700 vs Celeron</li>
<li>Rozwiązanie nie jest darmowe.</li>
<li>Nadal mam problem z podłączeniem zintegrowanej grafiki do VM Linuxowej (grubsza sprawa, musi dojść do przełączenia systemu obsługującego IGD z unRAID na VM).</li>
</ul>


<p>Całość wygląda tak:</p>

<p> <img src="http://itoutline.me/images/unraid_schema.PNG"></p>

<p>Historia zatoczyła koło, teraz potrzebuje byle jakiego laptopa i mogę pracować na VM zdalnie (w czym na pewno pomaga 50Mb upstream-u od dostawcy Internetu). Co najważniejsze, całość działa zaskakująco stabilnie. Niesamowite jak wiele funkcji może spełniać dzisiaj PC w domu (cztery ostatnie to VM) a wszystko to dzięki wirtualizacji i konteneryzacji.</p>

<p> <img src="http://itoutline.me/images/unraid_list.PNG"></p>

<p>Obciążenie CPU w tym czasie (żadna z maszyn nie robiła nic szczególnego, na Windows 10, Firefox z 20+ zakładkami i kilka pomniejszych programów):</p>

<p> <img src="http://itoutline.me/images/unraid_cpu.PNG"></p>

<p>Kiedyś bardzo optowałem za stawianiem drobnych rzeczy jak np. Home Assistant na RPI czy podobnych ale teraz wydaje mi się, że takie &ldquo;pudło&rdquo; jest zdecydowanie lepszym rozwiązaniem, ogarnia wszystko :)</p>

<p> <img src="http://itoutline.me/images/unraid_hal.png"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Cuttle - Boldport Club]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2016/09/27/the-cuttle/"/>
    <updated>2016-09-27T20:15:00+00:00</updated>
    <id>http://itoutline.me/2016/09/27/the-cuttle</id>
    <content type="html"><![CDATA[<p>Świetne projekty elektroniczne DIY - <a href="http://www.boldport.club/">Boldport Club</a>, zapisałem się i zacząłem od klona Arduino <a href="http://www.boldport.club/shop/product/390973459">The Cuttle</a>. Nie był to cały kit tylko sama płytka i trochę nieudana, bo od spodu jest miejscami farba na padach do lutowania. Mimo wszystko działa :)</p>

<p> <img src="http://itoutline.me/images/the_cuttle.JPG"></p>

<p>W sumie pierwszy raz wgrywałem bootloader i tutaj bardzo pomocna okazała się stronka <a href="http://www.gammon.com.au/bootloader">http://www.gammon.com.au/bootloader</a> i sketch <a href="https://github.com/nickgammon/arduino_sketches">Atmega_Board_Programmer</a></p>

<p> <img src="http://itoutline.me/images/the_cuttle_programming.JPG"></p>

<p>Cały proces wyglądał tak:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Type 'C' when ready to continue with another chip ...
</span><span class='line'>Attempting to enter ICSP programming mode ...
</span><span class='line'>Entered programming mode OK.
</span><span class='line'>Signature = 0x1E 0x95 0x14
</span><span class='line'>Processor = ATmega328
</span><span class='line'>Flash memory size = 32768 bytes.
</span><span class='line'>LFuse = 0xFF
</span><span class='line'>HFuse = 0xD9
</span><span class='line'>EFuse = 0xFF
</span><span class='line'>Lock byte = 0xFF
</span><span class='line'>Clock calibration = 0xA9
</span><span class='line'>Type 'L' to use Lilypad (8 MHz) loader, or 'U' for Uno (16 MHz) loader ...
</span><span class='line'>Using Uno Optiboot 16 MHz loader.
</span><span class='line'>Bootloader address = 0x7E00
</span><span class='line'>Bootloader length = 512 bytes.
</span><span class='line'>Type 'Q' to quit, 'V' to verify, or 'G' to program the chip with the bootloader ...
</span><span class='line'>Erasing chip ...
</span><span class='line'>Writing bootloader ...
</span><span class='line'>Committing page starting at 0x7E00
</span><span class='line'>Committing page starting at 0x7E80
</span><span class='line'>Committing page starting at 0x7F00
</span><span class='line'>Committing page starting at 0x7F80
</span><span class='line'>Written.
</span><span class='line'>Verifying ...
</span><span class='line'>No errors found.
</span><span class='line'>Writing fuses ...
</span><span class='line'>LFuse = 0xFF
</span><span class='line'>HFuse = 0xDE
</span><span class='line'>EFuse = 0xFD
</span><span class='line'>Lock byte = 0xEF
</span><span class='line'>Clock calibration = 0xA9
</span><span class='line'>Done.
</span><span class='line'>Programming mode off.</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Picocom na Cygwin/Windows10]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2016/05/27/picocom-na-cygwin-slash-windows10/"/>
    <updated>2016-05-27T20:11:00+00:00</updated>
    <id>http://itoutline.me/2016/05/27/picocom-na-cygwin-slash-windows10</id>
    <content type="html"><![CDATA[<p>Działa i instalacja poszła wyjątkowo łatwo:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone https://github.com/npat-efault/picocom; cd picocom && make</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Cloning into 'picocom'...
</span><span class='line'>remote: Counting objects: 701, done.
</span><span class='line'>remote: Total 701 (delta 0), reused 0 (delta 0), pack-reused 701
</span><span class='line'>Receiving objects: 100% (701/701), 490.39 KiB | 493.00 KiB/s, done.
</span><span class='line'>Resolving deltas: 100% (445/445), done.
</span><span class='line'>cc -Wall -g -DVERSION_STR=\"2.3a\" -DTTY_Q_SZ=32768 -DHIGH_BAUD -DUSE_FLOCK -DHISTFILE=\".picocom_history\" -DLINENOISE -o linenoise-1.0/linenoise.o -c linenoise-1.0/linenoise.c
</span><span class='line'>cc -Wall -g -DVERSION_STR=\"2.3a\" -DTTY_Q_SZ=32768 -DHIGH_BAUD -DUSE_FLOCK -DHISTFILE=\".picocom_history\" -DLINENOISE -o picocom.o -c picocom.c
</span><span class='line'>cc -Wall -g -DVERSION_STR=\"2.3a\" -DTTY_Q_SZ=32768 -DHIGH_BAUD -DUSE_FLOCK -DHISTFILE=\".picocom_history\" -DLINENOISE -o term.o -c term.c
</span><span class='line'>cc -Wall -g -DVERSION_STR=\"2.3a\" -DTTY_Q_SZ=32768 -DHIGH_BAUD -DUSE_FLOCK -DHISTFILE=\".picocom_history\" -DLINENOISE -o fdio.o -c fdio.c
</span><span class='line'>cc -Wall -g -DVERSION_STR=\"2.3a\" -DTTY_Q_SZ=32768 -DHIGH_BAUD -DUSE_FLOCK -DHISTFILE=\".picocom_history\" -DLINENOISE -o split.o -c split.c
</span><span class='line'>cc -Wall -g -DVERSION_STR=\"2.3a\" -DTTY_Q_SZ=32768 -DHIGH_BAUD -DUSE_FLOCK -DHISTFILE=\".picocom_history\" -DLINENOISE -o termios2.o -c termios2.c
</span><span class='line'>cc -g -o picocom  linenoise-1.0/linenoise.o picocom.o term.o fdio.o split.o termios2.o</span></code></pre></td></tr></table></div></figure>


<p>Gdyby nie było <code>make</code> to <code>apt-cyg install make</code>.</p>

<p>Trzeba tylko pamiętać, że np. COM4 to /dev/ttyS3:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ./picocom.exe -b 115200 /dev/ttyS3
</span><span class='line'>picocom v2.3a
</span><span class='line'>
</span><span class='line'>port is        : /dev/ttyS3
</span><span class='line'>flowcontrol    : none
</span><span class='line'>baudrate is    : 115200
</span><span class='line'>parity is      : none
</span><span class='line'>databits are   : 8
</span><span class='line'>stopbits are   : 1
</span><span class='line'>escape is      : C-a
</span><span class='line'>local echo is  : no
</span><span class='line'>noinit is      : no
</span><span class='line'>noreset is     : no
</span><span class='line'>nolock is      : no
</span><span class='line'>send_cmd is    : sz -vv
</span><span class='line'>receive_cmd is : rz -vv -E
</span><span class='line'>imap is        :
</span><span class='line'>omap is        :
</span><span class='line'>emap is        : crcrlf,delbs,
</span><span class='line'>logfile is     : none
</span><span class='line'>
</span><span class='line'>Type [C-a] [C-h] to see available commands
</span><span class='line'>
</span><span class='line'>Terminal ready
</span><span class='line'>
</span><span class='line'>HiZ&gt;
</span><span class='line'>HiZ&gt;</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Iptables i dynamiczne IP]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2015/10/18/iptables-i-dynamiczne-ip/"/>
    <updated>2015-10-18T21:29:23+00:00</updated>
    <id>http://itoutline.me/2015/10/18/iptables-i-dynamiczne-ip</id>
    <content type="html"><![CDATA[<p>W przypadku posiadania serwera w sieci Internet zawsze najlepiej jest ograniczać do niego dostęp tylko do tego co rzeczywiście chcemy, żeby było na nim dostępne. Dodatkowo ograniczenie do konkretnych klas czy adresów w przypadku dostępu do interfejsów umożliwiających większą kontrolę nad serwerem jest także dobrą praktyką (jeszcze lepszą jest nie eksponowanie ich w Internecie w ogóle;)</p>

<p>Ostatnio prowadziłem testy na takim serwerze i naturalnym było np. ograniczenie dostępu do SSH dla konkretnych adresów. Problem polega na tym, że o ile w firmie miałem statyczny adres to w domu już nie. Mogłem ustawić regułę na obecny domowy adres ale za kilka godzin mogła być już nieaktualna. Wyjściem z sytuacji okazał się, jak bardzo często się zdarza, prosty skrypt i dyndns.</p>

<figure class='code'><figcaption><span>iptables_update.sh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="c"># --==itoutline.me==--</span>
</span><span class='line'>
</span><span class='line'><span class="nv">HOSTALLOWED</span><span class="o">=</span><span class="s2">&quot;/home/itoutline/update_iptables/allowed_host.txt&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">while</span> <span class="nb">read </span>line
</span><span class='line'><span class="k">do</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">HOSTNAME</span><span class="o">=</span><span class="nv">$line</span>
</span><span class='line'>  <span class="nv">LOGFILE</span><span class="o">=</span>/home/itoutline/update_iptables/<span class="s2">&quot;$line&quot;</span>.log
</span><span class='line'>
</span><span class='line'>  <span class="nv">Current_IP</span><span class="o">=</span><span class="k">$(</span>host <span class="nv">$HOSTNAME</span> <span class="p">|</span> cut -f4 -d<span class="s1">&#39; &#39;</span><span class="k">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="o">[</span> <span class="nv">$LOGFILE</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span><span class='line'>    iptables -I INPUT -s <span class="nv">$Current_IP</span> -j ACCEPT
</span><span class='line'>    <span class="nb">echo</span> <span class="nv">$Current_IP</span> &gt; <span class="nv">$LOGFILE</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>
</span><span class='line'>    <span class="nv">Old_IP</span><span class="o">=</span><span class="k">$(</span>cat <span class="nv">$LOGFILE</span><span class="k">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$Current_IP&quot;</span> !<span class="o">=</span> <span class="s2">&quot;$Old_IP&quot;</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span><span class='line'>      iptables -D INPUT -s <span class="nv">$Old_IP</span> -j ACCEPT
</span><span class='line'>      iptables -I INPUT -s <span class="nv">$Current_IP</span> -j ACCEPT
</span><span class='line'>      /etc/init.d/iptables save
</span><span class='line'>      <span class="nb">echo</span> <span class="nv">$Current_IP</span> &gt; <span class="nv">$LOGFILE</span>
</span><span class='line'>      <span class="nb">echo </span>iptables have been updated
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'>  <span class="k">fi</span>
</span><span class='line'><span class="k">done</span> &lt; <span class="s2">&quot;$HOSTALLOWED&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>W <code>allowed_host.txt</code> umieszczamy w kolejnych liniach nazwy domenowe hostów.</p>

<p>A do cron-a dodajemy linijkę:</p>

<figure class='code'><figcaption><span>iptables_update.sh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>*/1 * * * * /home/itoutline/update_iptables/update_iptables.sh  2&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">|</span>logger
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Unblock.us automatyczna aktualizacja]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2015/10/07/unblock-dot-us-automatyczna-aktualizacja/"/>
    <updated>2015-10-07T23:17:18+00:00</updated>
    <id>http://itoutline.me/2015/10/07/unblock-dot-us-automatyczna-aktualizacja</id>
    <content type="html"><![CDATA[<p>Wchodzenie na stronę unblock.us i aktualizowanie bieżącego adresu IP zaczęło mnie naprawdę męczyć. Na szczęście można tego uniknąć dosyć prosto. Wystarczy prosty skrypt na routerze (czy dowolnym serwerze linuxowym jaki mamy w domu, chyba każdy ma coś na poziomie minimum rpi w dzisiejszych czasach ;), który będzie sprawdzał co jakiś czas adres zewnętrzny i aktualizował go w unblock.us.</p>

<figure class='code'><figcaption><span>update_unblock.sh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/usr/bin/env bash</span>
</span><span class='line'><span class="c"># --==itoutline.me==--</span>
</span><span class='line'>
</span><span class='line'><span class="nv">SCRIPT_NAME</span><span class="o">=</span><span class="s2">&quot;$(basename $0)&quot;</span>
</span><span class='line'><span class="nv">IP_ADDR</span><span class="o">=</span>/tmp/active_ip_addr
</span><span class='line'><span class="nv">IP_STATUS</span><span class="o">=</span>/tmp/ip_update_status
</span><span class='line'>
</span><span class='line'><span class="nv">CURRENT_IP</span><span class="o">=</span><span class="k">$(</span>dig +short myip.opendns.com @resolver1.opendns.com<span class="k">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> update_ip <span class="o">{</span>
</span><span class='line'>    curl -s -o <span class="nv">$IP_STATUS</span> <span class="s2">&quot;https://api.unblock-us.com/login?adres_email:hasło&quot;</span>
</span><span class='line'>    logger <span class="s2">&quot;[$SCRIPT_NAME]: IP updated: $CURRENT_IP; Response: $(cat $IP_STATUS)&quot;</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="nv">$CURRENT_IP</span> &gt; <span class="nv">$IP_ADDR</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;$CURRENT_IP&quot;</span> <span class="o">=</span>~ ^<span class="o">[</span>0-9<span class="o">]{</span>2,3<span class="o">}</span><span class="se">\.</span><span class="o">[</span>0-9<span class="o">]{</span>1,3<span class="o">}</span><span class="se">\.</span><span class="o">[</span>0-9<span class="o">]{</span>1,3<span class="o">}</span><span class="se">\.</span><span class="o">[</span>0-9<span class="o">]{</span>1,3<span class="o">}</span><span class="nv">$ </span><span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> ! -f <span class="nv">$IP_ADDR</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span><span class='line'>        update_ip
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>        <span class="nv">OLD_IP</span><span class="o">=</span><span class="k">$(</span>cat <span class="nv">$IP_ADDR</span><span class="k">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;$CURRENT_IP&quot;</span> !<span class="o">=</span> <span class="s2">&quot;$OLD_IP&quot;</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
</span><span class='line'>            update_ip
</span><span class='line'>        <span class="k">fi</span>
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>    logger <span class="s2">&quot;[$SCRIPT_NAME]: Network error or incorrect answer from the IP provider&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>W miejscach <code>adres_email</code> i <code>hasło</code> trzeba podać swoje dane oraz dorzucić skrypt do crona.</p>

<pre><code>*/2 * * * * /root/update_unblock.sh  2&gt;&amp;1 |logger
</code></pre>

<p>Skrypt będzie się wykonywał co dwie minuty.</p>

<p>Skrypt można również wykorzystać do innych serwisów, w przypadku darmowego <a href="http://tvunblock.com">tvunblock.com</a> polecenie <code>curl</code> z funkcji <code>update_ip</code> należałoby zastąpić:</p>

<pre><code>curl -s -o $IP_STATUS "https://activate.tvunblock.com/"
</code></pre>

<h3>Zastąpienie odpytywania zewnętrznego serwisu o publiczny adres IP</h3>

<p>Serwisów dostarczających za pomocą jakiegoś web api zewnętrzny adres ip jest dużo ale nie zawsze trzeba z nich korzystać. Jeśli router/modem pozwala na pobieranie z niego informacji o adresie WAN, dlaczego tego nie użyć? W przypadku Liveboxa/Funboxa zmienną <code>CURRENT_IP</code> można ustawić w ten sposób:</p>

<pre><code>CURRENT_IP=$(curl -silent -A "application/x-sah-ws-4-call+json" "http://192.168.1.1/sysbus/NMC:getWANStatus" -d"{\"parameters\":{}}" | sed -n -e 's/^.*\(IPAddress":"\)\([0-9]*.[0-9]*.[0-9]*.[0-9]*\)\(.*\)$/\2/p')
</code></pre>

<p>W praktyce (jak widać nie tylko adres ip portu WAN można podejrzeć):</p>

<p><img src="http://itoutline.me/images/unblock_skrypt.png"></p>

<h3>Crontab tuning</h3>

<p>Rozwiązania, które opierają się na crontabie i czesto są uruchamiane zaśmiecają sysloga:</p>

<pre><code>Nov  8 16:49:01 bananapi /USR/SBIN/CRON[27209]: (root) CMD (/root/update_unblock.sh  2&gt;&amp;1 |logger)
Nov  8 16:51:01 bananapi /USR/SBIN/CRON[27221]: (root) CMD (/root/update_unblock.sh  2&gt;&amp;1 |logger)
Nov  8 16:53:01 bananapi /USR/SBIN/CRON[27233]: (root) CMD (/root/update_unblock.sh  2&gt;&amp;1 |logger)
Nov  8 16:55:01 bananapi /USR/SBIN/CRON[27244]: (root) CMD (/root/update_unblock.sh  2&gt;&amp;1 |logger)
Nov  8 16:57:01 bananapi /USR/SBIN/CRON[27255]: (root) CMD (/root/update_unblock.sh  2&gt;&amp;1 |logger)
Nov  8 16:59:01 bananapi /USR/SBIN/CRON[27266]: (root) CMD (/root/update_unblock.sh  2&gt;&amp;1 |logger)
</code></pre>

<p>Dlatego kiedy już wiadomo, że skrypt działa poprawnie można pokusić się o wyłączenie logowania crona. Na Debianie to modyfikacja pliku <code>/etc/rsyslog.conf</code>:</p>

<figure class='code'><figcaption><span>rsyslog.conf</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">###############</span>
</span><span class='line'><span class="c">#### RULES ####</span>
</span><span class='line'><span class="c">###############</span>
</span><span class='line'>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># First some standard log files.  Log by facility.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'>auth,authpriv.*         -/var/log/auth.log
</span><span class='line'>*.*<span class="p">;</span>auth,authpriv.none,cron.none        -/var/log/syslog
</span><span class='line'><span class="c">#cron.*             -/var/log/cron.log</span>
</span><span class='line'>daemon.*            -/var/log/daemon.log
</span><span class='line'>kern.*              -/var/log/kern.log
</span><span class='line'>lpr.*               -/var/log/lpr.log
</span><span class='line'>mail.*              -/var/log/mail.log
</span><span class='line'>user.*              -/var/log/user.log
</span></code></pre></td></tr></table></div></figure>


<p>Dorzucenie <code>cron.none</code> i restart usługi <code>sudo /etc/init.d/rsyslog restart</code> wyciszy crontaba. Można również przekierować logi do osobnego pliku <code>cron.log</code> ale szkoda karty SD. Od tej pory syslog nie jest floodowany z powodu skryptu i mamy tylko informacje kiedy faktcznie skrypt wykona jakąś pracę:</p>

<pre><code>Nov  8 20:16:02 bananapi logger: [update_unblock.sh]: IP updated: 178.42.100.100; Response: active
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Zmienne systemowe w OSX]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2015/01/27/zmienne-systemowe-w-osx/"/>
    <updated>2015-01-27T15:29:59+00:00</updated>
    <id>http://itoutline.me/2015/01/27/zmienne-systemowe-w-osx</id>
    <content type="html"><![CDATA[<p>Definiowanie zmiennych systemowych w OSX jest takie sobie&hellip; Nie mówię tutaj o zmiennych, które można ustawić w plikach inicjalizacyjnych powłoki shellowej (bash, zsh, fish czy co komu odpowiada). Tam akurat wszystko jest całkiem prosto ale o ustawieniu zmiennej bez uruchamiania terminala po starcie systemu. Natrafiłem na potrzebę zdefiniowania takiej zmiennej przy zabawie z Android Studio. Po zainstalowaniu Javy i wspomnianego oprogramowania, próba jego uruchomienia kończyła się tak:</p>

<p><img src="http://itoutline.me/images/Java_JDK_pb.png"></p>

<p>Problemem okazał się brak zmiennej <code>STUDIO_JDK</code>. Można ten problem obejść np. tak:</p>

<pre><code>launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk
open /Applications/Android\ Studio.app
</code></pre>

<p>Tylko, że jakoś konieczność uruchomienia terminala po to, żeby pracować w aplikacji graficznej do mnie nie przemawia. Udało mi się znaleźć ciekawe rozwiązanie problemu <a href="http://stackoverflow.com/questions/25385934/setting-environment-variables-via-launchd-conf-no-longer-works-in-os-x-yosemite">tutaj</a>.</p>

<h2>Zmienne systemowe</h2>

<p>Zmienne mogą być ustawione na poziomie użytkownika (ustawienie wywoływane przez <code>/Library/LaunchAgents/environment.user.plist</code>) lub root-a (<code>/Library/LaunchDaemons/environment.plist</code>). Rozwiązanie zakłada jeden plik w którym będą definiowane zmienne <code>/etc/environment</code>, co jest bardzo ok bo nie przypominam sobie, żebym kiedyś potrzebował różnych. Kolejnym plusem jest fakt, że modyfikacja <code>/etc/environment</code> czyli dodanie jakiejś zmiennej automatycznie jest zaczytywane i dostajemy wzrokową informację w postaci chwilowego zniknięcia Dock-a.</p>

<p>Jedyny minus ale to jest raczej nie do obejścia to fakt, że już działająca aplikacja nie pobierze informacji o nowej zmiennej, musi być ponownie otworzona.</p>

<h2>Zmienna PATH</h2>

<p>To rozwiązanie jest jeszcze lepsze i dopóki będzie działało na OSX to będę z niego korzystał a mianowicie zmiany dokonujemy w pliku <code>/etc/paths</code>. To zwykły plik tekstowy w którym możemy dodawać kolejne linijki z wymaganymi przez nas ścieżkami. Po ponownym uruchomieniu terminala dopisana przez nas ścieżka znajdzie się w zmiennej <code>PATH</code>.</p>

<h2>Ostatecznie</h2>

<p>Przygotowałem skrypt bashowy, który tworze niezbędne pliki i ustawia ich parametry.</p>

<figure class='code'><figcaption><span> (set_env_var.sh)</span> <a href='http://itoutline.me/downloads/code/set_env_var.sh'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/usr/bin/env bash</span>
</span><span class='line'>
</span><span class='line'>sudo -v
</span><span class='line'>
</span><span class='line'>cat <span class="s">&lt;&lt; EOF | sudo tee /etc/environment &gt; /dev/null</span>
</span><span class='line'><span class="s">#!/bin/sh</span>
</span><span class='line'>
</span><span class='line'><span class="s">set -e</span>
</span><span class='line'>
</span><span class='line'><span class="s">syslog -s -l warn &quot;Set environment variables with /etc/environment $(whoami) - start&quot;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="s">### Set your variable here:</span>
</span><span class='line'><span class="s">#launchctl setenv JAVA_HOME      /usr/local/jdk1.7</span>
</span><span class='line'><span class="s">launchctl setenv MAVEN_HOME     /opt/local/share/java/maven3</span>
</span><span class='line'><span class="s">launchctl setenv STUDIO_JDK     /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk</span>
</span><span class='line'><span class="s">############################</span>
</span><span class='line'>
</span><span class='line'><span class="s">if [ -x /usr/libexec/path_helper ]; then</span>
</span><span class='line'><span class="s">        export PATH=&quot;&quot;</span>
</span><span class='line'><span class="s">            eval `/usr/libexec/path_helper -s`</span>
</span><span class='line'><span class="s">                launchctl setenv PATH $PATH</span>
</span><span class='line'><span class="s">            fi</span>
</span><span class='line'>
</span><span class='line'><span class="s">            osascript -e &#39;tell app &quot;Dock&quot; to quit&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="s">            syslog -s -l warn &quot;Set environment variables with /etc/environment $(whoami) - complete&quot;</span>
</span><span class='line'><span class="s">EOF</span>
</span><span class='line'>
</span><span class='line'>cat <span class="s">&lt;&lt; EOF | sudo tee /Library/LaunchAgents/environment.user.plist &gt; /dev/null</span>
</span><span class='line'><span class="s">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span class='line'><span class="s">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span>
</span><span class='line'><span class="s">&lt;plist version=&quot;1.0&quot;&gt;</span>
</span><span class='line'><span class="s">&lt;dict&gt;</span>
</span><span class='line'><span class="s">    &lt;key&gt;Label&lt;/key&gt;</span>
</span><span class='line'><span class="s">    &lt;string&gt;environment.user&lt;/string&gt;</span>
</span><span class='line'><span class="s">    &lt;key&gt;ProgramArguments&lt;/key&gt;</span>
</span><span class='line'><span class="s">    &lt;array&gt;</span>
</span><span class='line'><span class="s">            &lt;string&gt;/etc/environment&lt;/string&gt;</span>
</span><span class='line'><span class="s">    &lt;/array&gt;</span>
</span><span class='line'><span class="s">    &lt;key&gt;KeepAlive&lt;/key&gt;</span>
</span><span class='line'><span class="s">    &lt;false/&gt;</span>
</span><span class='line'><span class="s">    &lt;key&gt;RunAtLoad&lt;/key&gt;</span>
</span><span class='line'><span class="s">    &lt;true/&gt;</span>
</span><span class='line'><span class="s">    &lt;key&gt;WatchPaths&lt;/key&gt;</span>
</span><span class='line'><span class="s">    &lt;array&gt;</span>
</span><span class='line'><span class="s">        &lt;string&gt;/etc/environment&lt;/string&gt;</span>
</span><span class='line'><span class="s">    &lt;/array&gt;</span>
</span><span class='line'><span class="s">&lt;/dict&gt;</span>
</span><span class='line'><span class="s">&lt;/plist&gt;</span>
</span><span class='line'><span class="s">EOF</span>
</span><span class='line'>
</span><span class='line'>cat <span class="s">&lt;&lt; EOF | sudo tee /Library/LaunchDaemons/environment.plist &gt; /dev/null</span>
</span><span class='line'><span class="s">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span class='line'><span class="s">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span>
</span><span class='line'><span class="s">&lt;plist version=&quot;1.0&quot;&gt;</span>
</span><span class='line'><span class="s">&lt;dict&gt;</span>
</span><span class='line'><span class="s">    &lt;key&gt;Label&lt;/key&gt;</span>
</span><span class='line'><span class="s">    &lt;string&gt;environment&lt;/string&gt;</span>
</span><span class='line'><span class="s">    &lt;key&gt;ProgramArguments&lt;/key&gt;</span>
</span><span class='line'><span class="s">    &lt;array&gt;</span>
</span><span class='line'><span class="s">            &lt;string&gt;/etc/environment&lt;/string&gt;</span>
</span><span class='line'><span class="s">    &lt;/array&gt;</span>
</span><span class='line'><span class="s">    &lt;key&gt;KeepAlive&lt;/key&gt;</span>
</span><span class='line'><span class="s">    &lt;false/&gt;</span>
</span><span class='line'><span class="s">    &lt;key&gt;RunAtLoad&lt;/key&gt;</span>
</span><span class='line'><span class="s">    &lt;true/&gt;</span>
</span><span class='line'><span class="s">    &lt;key&gt;WatchPaths&lt;/key&gt;</span>
</span><span class='line'><span class="s">    &lt;array&gt;</span>
</span><span class='line'><span class="s">        &lt;string&gt;/etc/environment&lt;/string&gt;</span>
</span><span class='line'><span class="s">    &lt;/array&gt;</span>
</span><span class='line'><span class="s">&lt;/dict&gt;</span>
</span><span class='line'><span class="s">&lt;/plist&gt;</span>
</span><span class='line'><span class="s">EOF</span>
</span><span class='line'>
</span><span class='line'>sudo chmod <span class="m">555</span> /etc/environment
</span><span class='line'>sudo chmod <span class="m">600</span> /Library/LaunchAgents/environment.user.plist /Library/LaunchDaemons/environment.plist
</span><span class='line'>sudo chown root:wheel /etc/environment /Library/LaunchAgents/environment.user.plist /Library/LaunchDaemons/environment.plist
</span><span class='line'>
</span><span class='line'>launchctl load -w /Library/LaunchAgents/environment.user.plist
</span><span class='line'>sudo launchctl load -w /Library/LaunchDaemons/environment.plist
</span></code></pre></td></tr></table></div></figure>


<p>Zastosowanie rozwiązania:</p>

<pre><code>wget http://itoutline.me/code/set_env_var.sh
chmod +x set_env_var.sh
./set_env_var.sh
</code></pre>

<p>Od tej pory zdefiniowanie jakiejkolwiek zmiennej, która będzie zawsze i wszędzie widoczna to umieszczenie jej w <code>/etc/environment</code>.</p>

<h2>Pożyteczne komendy</h2>

<p>Ustawienie zmiennej z poziomu terminala (będzie od razu widoczne w systemie ale na liście zmiennych wyświetlanej np. za pomocą <code>env</code> czy <code>echo $STUDIO_JDK</code> pojawi się dopiero po restarcie terminala:</p>

<pre><code>launchctl setenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk
</code></pre>

<p>Sprawdzenie zmiennej w systemie:</p>

<pre><code>launchctl getenv STUDIO_JDK /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk
</code></pre>

<p>Sprawdzenie czy zmienna jest już widoczna w sesji terminala:</p>

<pre><code>echo $STUDIO_JDK
</code></pre>

<p>Wyświetlenie wszystkich zmiennych widocznych z poziomu terminala:</p>

<pre><code>env
</code></pre>

<p>Ustawienie zmiennej tylko na poziomie terminala:</p>

<pre><code>export STUDIO_JDK=/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Co się stanie kiedy w przeglądarkę wpiszemy google.com i naciśniemy Enter]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2015/01/22/co-sie-stanie-kiedy-w-przegladarke-wpiszemy-google-dot-com-i-nacisniemy-enter/"/>
    <updated>2015-01-22T23:15:03+00:00</updated>
    <id>http://itoutline.me/2015/01/22/co-sie-stanie-kiedy-w-przegladarke-wpiszemy-google-dot-com-i-nacisniemy-enter</id>
    <content type="html"><![CDATA[<p>No dzieje się&hellip; Trzeba przyznać. Fajny dokument, ciekawe jak się rozwinie.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Chrome i swipe]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2015/01/22/chrome-i-swipe/"/>
    <updated>2015-01-22T21:47:49+00:00</updated>
    <id>http://itoutline.me/2015/01/22/chrome-i-swipe</id>
    <content type="html"><![CDATA[<p>W końcu wróciłem na stare śmieci, działam na OSX Yosemite. Przyznam, że zaskakują mnie oceny tej wersji OSX na AppStore ponieważ póki co jedyny kłopot jakiego ja doświadczyłem to ten z tytułu wpisu. Ponad tydzień spędzony na konfigurowaniu, instalowaniu, modyfikowaniu nie przyniósł jakichś większych zgrzytów, no ale pożyjemy zobaczymy. Zdecydowanie za wcześnie na wyciąganie wniosków.</p>

<p>Na pewno beznadziejnie działa przewijanie za pomocą dwóch palców w Chromie, bardzo często zdarzało mi się podczas przewijania strony w górę/dół lądować na poprzednio przeglądanej. Wydaje mi się, że to bardziej wina przeglądarki niż systemu&hellip;</p>

<p>Rozwiązanie problemu to wyłączenie przewijania w Chromie:</p>

<pre><code>defaults write com.google.Chrome AppleEnableSwipeNavigateWithScrolls -bool false
</code></pre>

<p>Jeśli chcemy można w konfiguracji Touchpad-a zastosować poniższe ustawienia, dzięki czemu przechodzenie pomiędzy stronami przestanie być losowe. Jedyny minus to, że musimy użyć trzech palców.</p>

<p><img src="http://itoutline.me/images/chrome_i_swipe.png"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Babun]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2014/12/29/babun/"/>
    <updated>2014-12-29T08:53:51+00:00</updated>
    <id>http://itoutline.me/2014/12/29/babun</id>
    <content type="html"><![CDATA[<p>Tak się nieszczęśliwie poukładało w moim życiu, że na jakiś czas wylądowałem z windowsowym laptopem. Zawsze kiedy musiałem korzystać z systemu MS instalowałem od razu <a href="https://www.cygwin.com">Cygwina</a>. Niestety czasami nie była to &ldquo;bułka z masłem&rdquo;, często coś tam nie do końca działało albo były problemy z samą instalacją. Zdarzało się, że trochę pracy było potrzebne ale i tak świetnie, że komuś się chciało i Cygwin w ogóle powstał. Teraz jest jeszcze lepiej bo powstało coś dającego Cygwina w bardzo fajnym opakowaniu. Mowa o <a href="https://github.com/babun/babun">Babun</a>.</p>

<h3>Instalacja</h3>

<p>Sprowadza się do pobrania archiwum, rozpakowania i uruchomieniu skryptu. Standardowo instaluje się w katalogu domowym jako <code>.babun</code>.</p>

<h3>Pierwsze wrażenia</h3>

<p>Na pulpicie tworzy się skrót, który uruchamia terminal mintty a tam od razu mamy skonfigurowane zsh i jest git. Instalacja/deinstalacja pakietów za pomocą <code>pact install</code> oraz <code>pact remove</code> jest dużym plusem. Usunięcie Babun-a to skasowania jego katalogu, uwielbiam tego typu programy :)</p>

<h3>Serwer SSH</h3>

<p>Serwer SSH na Windowsie to chyba nigdy nie było proste. Tutaj też nie działa bez drobnych modyfikacji ale nie jest najgorzej. No i trzeba przyznać, że w Windows 8.1 dodawanie i usuwanie serwisów nawet z poziomu Babuna/Cygwina nie wymaga restartu. Miłe zaskoczenie.</p>

<p>Zaczynamy od uruchomienia Babuna jako Administrator i wydajemy następujące komendy:</p>

<pre><code>/usr/bin/chmod +r /etc/passwd
/usr/bin/chmod +r /etc/group
/usr/bin/chmod +x /var
/usr/bin/ssh-host-config
</code></pre>

<p>Proces instalacji wyglądał u mnie tak:</p>

<pre><code>ssh-keygen: generating new host keys: RSA1 RSA DSA ECDSA ED25519
*** Info: Creating default /etc/ssh_config file
*** Info: Creating default /etc/sshd_config file
*** Info: Privilege separation is set to yes by default since OpenSSH 3.3.
*** Info: However, this requires a non-privileged account called 'sshd'.
*** Info: For more info on privilege separation read /usr/share/doc/openssh/README.privsep.
*** Query: Should privilege separation be used? (yes/no) yes
*** Info: Note that creating a new user requires that the current account have
*** Info: Administrator privileges.  Should this script attempt to create a
*** Query: new local account 'sshd'? (yes/no) yes
*** Info: Updating /etc/sshd_config file

*** Query: Do you want to install sshd as a service?
*** Query: (Say "no" if it is already installed as a service) (yes/no) yes
*** Query: Enter the value of CYGWIN for the daemon: [] ntsec
*** Info: On Windows Server 2003, Windows Vista, and above, the
*** Info: SYSTEM account cannot setuid to other users -- a capability
*** Info: sshd requires.  You need to have or to create a privileged
*** Info: account.  This script will help you do so.

*** Info: You appear to be running Windows XP 64bit, Windows 2003 Server,
*** Info: or later.  On these systems, it's not possible to use the LocalSystem
*** Info: account for services that can change the user id without an
*** Info: explicit password (such as passwordless logins [e.g. public key
*** Info: authentication] via sshd).

*** Info: If you want to enable that functionality, it's required to create
*** Info: a new account with special privileges (unless a similar account
*** Info: already exists). This account is then used to run these special
*** Info: servers.

*** Info: Note that creating a new user requires that the current account
*** Info: have Administrator privileges itself.

*** Info: No privileged account could be found.

*** Info: This script plans to use 'cyg_server'.
*** Info: 'cyg_server' will only be used by registered services.
*** Query: Do you want to use a different name? (yes/no) no
*** Query: Create new privileged user account 'cyg_server'? (yes/no) yes
*** Info: Please enter a password for new user cyg_server.  Please be sure
*** Info: that this password matches the password rules given on your system.
*** Info: Entering no password will exit the configuration.
*** Query: Please enter the password:
*** Query: Reenter:

*** Info: User 'cyg_server' has been created with password 'dynamic1'.
*** Info: If you change the password, please remember also to change the
*** Info: password for the installed services which use (or will soon use)
*** Info: the 'cyg_server' account.

*** Info: Also keep in mind that the user 'cyg_server' needs read permissions
*** Info: on all users' relevant files for the services running as 'cyg_server'.
*** Info: In particular, for the sshd server all users' .ssh/authorized_keys
*** Info: files must have appropriate permissions to allow public key
*** Info: authentication. (Re-)running ssh-user-config for each user will set
*** Info: these permissions correctly. [Similar restrictions apply, for
*** Info: instance, for .rhosts files if the rshd server is running, etc].


*** Info: The sshd service has been installed under the 'cyg_server'
*** Info: account.  To start the service now, call `net start sshd' or
*** Info: `cygrunsrv -S sshd'.  Otherwise, it will start automatically
*** Info: after the next reboot.

*** Info: Host configuration finished. Have fun!
</code></pre>

<p>Ustawienie odpowiednich uprawnień:</p>

<pre><code>/usr/bin/chmod 600 /etc/ssh*
/usr/bin/chown cyg_server /etc/ssh*
/usr/bin/chmod 600 /var/empty
</code></pre>

<p>Uruchominie serwera SSH <code>/usr/bin/cygrunsrv -S sshd</code> i oto jesteśmy:</p>

<p><img src="http://itoutline.me/images/babun-ssh.png"></p>

<p>Gdyby coś poszło nie tak można usunąć konfigurację, potem katalog Babuna i spróbować jeszcze raz.</p>

<pre><code>cygrunsrv --remove sshd
net user sshd /delete
net user cyg_server /delete
rm /etc/ssh_host* /etc/sshd_config
</code></pre>

<h3>Python, virtualenv i np. Tornado</h3>

<p>W Babunie mamy zainstalowanego pythona w wersji 2.7.3. Instalacja pip-a i serwera Tornado przeszła bez żadnych kłopotów. Pip:</p>

<pre><code>wget https://raw.githubusercontent.com/pypa/pip/master/contrib/get-pip.py
python get-pip.py
</code></pre>

<p>Virtualenv:</p>

<pre><code>pip install virtualenv
</code></pre>

<p>Tornado:</p>

<pre><code>mkdir tornado-test
cd tornado-test
virtualenv venv
source venv/bin/activate
pip install tornado
</code></pre>

<p>Kod serwera ;)</p>

<figure class='code'><figcaption><span>server.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">tornado.ioloop</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">tornado.web</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">MainHandler</span><span class="p">(</span><span class="n">tornado</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Hello from Babun&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">application</span> <span class="o">=</span> <span class="n">tornado</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">Application</span><span class="p">([</span>
</span><span class='line'>    <span class="p">(</span><span class="s">r&quot;/&quot;</span><span class="p">,</span> <span class="n">MainHandler</span><span class="p">),</span>
</span><span class='line'><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">application</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">8888</span><span class="p">)</span>
</span><span class='line'>    <span class="n">tornado</span><span class="o">.</span><span class="n">ioloop</span><span class="o">.</span><span class="n">IOLoop</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Uruchomienie <code>python server.py</code>:</p>

<p><img src="http://itoutline.me/images/babun-tronado.png"></p>

<h3>Ruby&hellip; i Octopress</h3>

<p>Zdecydowanie najwięcej kłopotów, ale to nie jest jakoś bardzo dziwne. Niemniej jednak udało mi sie uruchomić Octopress-aa, było to tak:</p>

<p>Instalacja rbenv i ruby-build, zdecydowałem się nie korzystać z wersji oferowanej przez &ldquo;pact&rdquo;.</p>

<pre><code>git clone https://github.com/sstephenson/rbenv.git ~/.rbenv
echo 'export PATH="$HOME/.rbenv/bin:$PATH"' &gt;&gt; ~/.zshrc
echo 'eval "$(rbenv init -)"' &gt;&gt; ~/.zshrc
git clone https://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build
</code></pre>

<p>Aktywacja rbenv:</p>

<pre><code>source ~/.zshrc
</code></pre>

<p>Instalacja wersji 1.9.3-p551 i ustawienie jej jako domyślnej.</p>

<pre><code>rbenv install 1.9.3-p551
rbenv global 1.9.3-p551
</code></pre>

<p>Tutaj zaczynają się schody, zaczynamy od stworzenia pliku z bibliotekami jakie zainstalowały się z ruby.</p>

<pre><code>find /home/$USER/.rbenv -iname '*.so' &gt; /tmp/ruby.gems.local.so.lst
</code></pre>

<p>Zamykamy wszystkie sesje babuna i uruchamiamy <code>dash.exe</code> z katalogu <code>.babun\cygwin\bin</code>, tam wydajemy polecenie:</p>

<pre><code>/usr/bin/rebaseall -v -T /tmp/ruby.gems.local.so.lst
</code></pre>

<p>Bez &ldquo;rebaseall&rdquo; podczas instalacji wymaganych bibliotek przez Octopress-a miałem takie problemy:</p>

<pre><code>{ octopress } master » bundle install                                                
Fetching gem metadata from https://rubygems.org/........
Resolving dependencies...
      0 [main] ruby 3412 child_info_fork::abort: address space needed by 'fcntl.so' (0x5F0000) is already occupied
      1 [main] ruby 2692 child_info_fork::abort: address space needed by 'fcntl.so' (0x5F0000) is already occupied
      0 [main] ruby 10092 child_info_fork::abort: address space needed by 'fcntl.so' (0x5F0000) is already occupied
      0 [main] ruby 3188 child_info_fork::abort: address space needed by 'fcntl.so' (0x5F0000) is already occupied
</code></pre>

<p>Instalacja Octopress-a:</p>

<pre><code>git clone git://github.com/imathis/octopress.git octopress
cd octopress
gem install bundler
rbenv rehash
bundle install
</code></pre>

<p>Po &ldquo;rebaseall&rdquo; wygląda to lepiej:</p>

<pre><code>{ octopress } master » bundle install                                                
Fetching gem metadata from https://rubygems.org/........
Resolving dependencies...
Installing rake 10.4.2
Installing RedCloth 4.2.9
Installing blankslate 2.1.2.4
Installing hitimes 1.2.2
Installing timers 4.0.1
Installing celluloid 0.16.0
...
</code></pre>

<p>Kolejny krok to zmiana w pliku <code>Rakefile</code> z:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="sr">/cygwin|mswin|mingw|bccwin|wince|emx/</span> <span class="o">=~</span> <span class="no">RUBY_PLATFORM</span><span class="p">)</span> <span class="o">!=</span> <span class="kp">nil</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s1">&#39;## Set the codepage to 65001 for Windows machines&#39;</span>
</span><span class='line'>  <span class="sb">`chcp 65001`</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>na:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="sr">/cygwin|mswin|mingw|bccwin|wince|emx/</span> <span class="o">=~</span> <span class="no">RUBY_PLATFORM</span><span class="p">)</span> <span class="o">!=</span> <span class="kp">nil</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s1">&#39;## Set the codepage to 65001 for Windows machines&#39;</span>
</span><span class='line'>  <span class="sb">`chcp.com 65001`</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Bez powyższego kroku miałem taki problem:</p>

<pre><code>{ octopress } master » rake install                                                   
rake aborted!
Errno::ENOENT: No such file or directory - chcp 65001
/home/itoutline/octopress/Rakefile:32:in ``'
/home/itoutline/octopress/Rakefile:32:in `&lt;top (required)&gt;'
(See full trace by running task with --trace)
</code></pre>

<p>Wykonujemy <code>rake install</code>:</p>

<pre><code>{ octopress } master » rake install                                                   
## Set the codepage to 65001 for Windows machines
## Copying classic theme into ./source and ./sass
mkdir -p source
cp -r .themes/classic/source/. source
mkdir -p sass
cp -r .themes/classic/sass/. sass
mkdir -p source/_posts
mkdir -p public
</code></pre>

<p>Następnie <code>rake generate &amp;&amp; rake preview</code>:</p>

<pre><code>{ octopress } master » rake generate &amp;&amp; rake preview                                  
## Set the codepage to 65001 for Windows machines
## Generating Site with Jekyll
directory source/stylesheets
    write source/stylesheets/screen.css
Configuration file: /home/itoutline/octopress/_config.yml
            Source: source
       Destination: public
      Generating...
                    done.
 Auto-regeneration: disabled. Use --watch to enable.
## Set the codepage to 65001 for Windows machines
Starting to watch source with Jekyll and Compass. Starting Rack on port 4000
[2014-12-29 15:22:08] INFO  WEBrick 1.3.1
[2014-12-29 15:22:08] INFO  ruby 1.9.3 (2014-11-13) [i386-cygwin]
[2014-12-29 15:22:08] WARN  TCPServer Error: Bad file descriptor - listen(2)
[2014-12-29 15:22:08] INFO  WEBrick::HTTPServer#start: pid=4924 port=4000
&gt;&gt;&gt; Compass is watching for changes. Press Ctrl-C to Stop.
Configuration file: /home/itoutline/octopress/_config.yml
    write public/stylesheets/screen.css
            Source: source
       Destination: public
      Generating...
                    done.
</code></pre>

<p>Mamy bloga:</p>

<p><img src="http://itoutline.me/images/babun-octopress.png"></p>

<p>Ale to nie wszystko, próba umieszczenia takiego wpisu:</p>

<p><img src="http://itoutline.me/images/babun-octopress-pb.png"></p>

<p>na blogu, zakończy się tak:</p>

<pre><code>{ octopress } master » rake generate &amp;&amp; rake preview                                  
## Set the codepage to 65001 for Windows machines
## Generating Site with Jekyll
    write source/stylesheets/screen.css
Configuration file: /home/itoutline/octopress/_config.yml
            Source: source
       Destination: public
      Generating...
  Liquid Exception: No such file or directory - C:\Windows\system32\cmd.exe in _posts/2014-12-29-nowy-post.markdown/#excerpt
                    done.
 Auto-regeneration: disabled. Use --watch to enable.
## Set the codepage to 65001 for Windows machines
Starting to watch source with Jekyll and Compass. Starting Rack on port 4000
[2014-12-29 15:35:49] INFO  WEBrick 1.3.1
[2014-12-29 15:35:49] INFO  ruby 1.9.3 (2014-11-13) [i386-cygwin]
[2014-12-29 15:35:49] WARN  TCPServer Error: Bad file descriptor - listen(2)
[2014-12-29 15:35:49] INFO  WEBrick::HTTPServer#start: pid=7540 port=4000
</code></pre>

<p>Rozwiązaniem jest ustawienie COMSPEC:</p>

<pre><code>export COMSPEC=/cygdrive/c/Windows/System32/cmd.exe
</code></pre>

<p>najlepiej od razu dodać do ~/.zshrc:</p>

<pre><code>echo "export COMSPEC=/cygdrive/c/Windows/System32/cmd.exe" &gt;&gt; ~/.zshrc
</code></pre>

<p>Ostatni drobny kłopot to narzekanie na brak &ldquo;python2&rdquo; podczas generowania bloga:</p>

<pre><code>which: no python2 in (/home/itoutline/.rbenv/versions/1.9.3-p551/lib/ruby/gems/1.9.1/bin:/home/itoutline/.rbenv/versions/1.9.3-p551/bin:/home/itoutline/.rbenv/libexec:/home/itoutline/.rbenv/plugins/ruby-build/bin:/home/itoutline/.rbenv/shims:/home/itoutline/.rbenv/bin:/home/itoutline/bin:/usr/local/bin:/usr/bin:/cygdrive/c/ProgramData/Oracle/Java/javap~...
</code></pre>

<p>Wystarczy utworzenie linku symbolicznego:</p>

<pre><code>cd /usr/bin
ln -s python2.7.exe python2
</code></pre>

<p>&ldquo;Chyba&rdquo; wszystko działa:</p>

<p><img src="http://itoutline.me/images/babun-octopress-ok.png"></p>

<h3>Przed podsumowaniem</h3>

<p>Czasami po uruchomieniu Babun-a może się pojawić coś takiego:</p>

<pre><code>compdef: unknown command or service: git
compdef: unknown command or service: git
compdef: unknown command or service: git
compdef: unknown command or service: git
compdef: unknown command or service: git
compdef: unknown command or service: git
compdef: unknown command or service: git
{ ~ }  »
</code></pre>

<p><a href="https://github.com/babun/babun/issues/159">Nie jest tak</a>, że to tylko u mnie. Rozwiązanie w postaci:</p>

<pre><code>compinit
cp .zcompdump .zcompdump-$HOSTNAME-5.0.2
</code></pre>

<p>rzeczywiście działa.</p>

<h3>Podsumowując</h3>

<p>Fajnie, że jest Cygwin, że powstał Babun ale chyba zdecydowanie lepiej jest po prostu uruchomić wirtualną maszynę na Virtualboxie. Chyba, że mamy ograniczone zasoby sprzętowe, nie mamy uprawnień, lubimy &ldquo;grzebać&rdquo; albo potrzebujemy dostępu tylko do podstawowych narzędzi Linux/GNU. Jeśli chodzi o to ostatnie to Cygwin/Babun zdecydowanie wygrywa z wirtualną maszyną.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rigol 1054Z i dekodowanie SPI]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2014/12/22/rigol-1054z-i-dekodowanie-spi/"/>
    <updated>2014-12-22T22:40:45+00:00</updated>
    <id>http://itoutline.me/2014/12/22/rigol-1054z-i-dekodowanie-spi</id>
    <content type="html"><![CDATA[<p>Ciągnie mnie do &ldquo;podsłuchiwania&rdquo;, tym razem padło na protokół <a href="http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus">SPI</a>. W moim wypadku jest tak, że podejrzenie pakietów czy przebiegu prądu w czasie i zobaczenie jak to wygląda od środka daje olbrzymią satysfakcję. A skoro oscyloskop, który umożliwia to drugie kosztuje ok. 1500 zł nie było na co czekać.</p>

<h3>Źródło sygnału SPI</h3>

<p>Źródłem sygnału jest Arduino UNO, bez podłączonego żadnego odbiornika SPI. Wyjścia MOSI i MISO są po prostu ze sobą połączone co tworzy lokalną pętlę (loopback).</p>

<p>Program, który będzie generował ciąg znaków &ldquo;itoutline.me&rdquo;:</p>

<figure class='code'><figcaption><span>spi_test.ino</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include &lt;SPI.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">char</span> <span class="n">outByte</span> <span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;itoutline.me&quot;</span><span class="p">;</span>
</span><span class='line'><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="k">const</span> <span class="kt">int</span> <span class="n">slaveSelectPin</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">pinMode</span> <span class="p">(</span><span class="n">slaveSelectPin</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">SPI</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
</span><span class='line'>  <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">slaveSelectPin</span><span class="p">,</span><span class="n">LOW</span><span class="p">);</span>
</span><span class='line'>  <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">outByte</span> <span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span> <span class="n">i</span> <span class="o">++</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="n">SPI</span><span class="p">.</span><span class="n">transfer</span><span class="p">(</span><span class="n">outByte</span> <span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">slaveSelectPin</span><span class="p">,</span><span class="n">HIGH</span><span class="p">);</span>
</span><span class='line'>  <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nazewnictwo portów w SPI zbyt mocno regulowane nie jest (jak podaje Wikipedia):</p>

<table>
<thead>
<tr>
<th>&ldquo;Oficjalnie&rdquo;</th>
<th>Można spotkać</th>
</tr>
</thead>
<tbody>
<tr>
<td>SCLK</td>
<td>SCK, CLK</td>
</tr>
<tr>
<td>MOSI</td>
<td>SIMO, SDO (for master devices), SDI(for slave devices), DO, DOUT, SI, MTSR</td>
</tr>
<tr>
<td>MISO</td>
<td>SOMI, SDO (for slave devices ), SDI(for master devices), DI, DIN, SO, MRST</td>
</tr>
<tr>
<td>SS</td>
<td>nCS, CS, CSB, CSN, nSS, STE, SYNC</td>
</tr>
</tbody>
</table>


<p><br/>
Konfiguracja pinów jest następująca:</p>

<ul>
<li>pin 10 - SS (Slave Select) - CH2 (CS) niebieski</li>
<li>pin 11 (MOSI) i 12 (MISO) są ze sobą połączone - CH1 (DATA) żółty</li>
<li>pin 13 - SCK (Serial Clock) - CH3 (CLK) różowy</li>
</ul>


<p>Podłączone sondy do Arduino:</p>

<p><img src="http://itoutline.me/images/Rigol_SPI_Arduino_connection.jpg"></p>

<h3>Jak to widać ?</h3>

<p>Piękny oscylogram, ze zdekodowanym SPI. Widać cykle zegara, dane które są wysyłane tylko w cyklach i zmianę stanu SS/CS podczas transmisji:</p>

<p><img src="http://itoutline.me/images/Rigol_SPI_all_characters.png"></p>

<p>Widok &ldquo;EventTable&rdquo;:</p>

<p><img src="http://itoutline.me/images/Rigol_SPI_chars_ok_table.png"></p>

<p>&ldquo;EventTable&rdquo; niestety wyświetla tylko to co jest widoczne na ekranie. Jeśli mamy dużo danych w pojedynczym komunikacie to niekoniecznie rozciągniemy go na ekranie tak, żeby zadziałał dekoder SPI (potrzebna jest do tego zmiana stanu SS/CS widoczna na ekranie). Np. wysyłając 25 bajtów (&ldquo;itoutline.me_itoutline.me&rdquo;).</p>

<p><img src="http://itoutline.me/images/Rigol_SPI_25_bajtow.png"></p>

<p>Zobaczymy za mało miejsca, żeby wyświetlić na zielonej linii dekodera dane. Niestety tabela raczej nie podaje ich do końca poprawnie bo widać, że w trzecim bajcie mamy &ldquo;.&rdquo; zamiast &ldquo;o&rdquo;.</p>

<p>Wracając do tego, że jest potrzebna widoczna zmiana SS/CS na ekranie w celu zdekodowania SPI. Mamy długi komunikat, widać tylko jego 15 bajtów i zmianę SS/CS:</p>

<p><img src="http://itoutline.me/images/Rigol_SPI_15_bajtow_SS_OK.png"></p>

<p>Gdybyśmy chcieli zobaczyć co jest dalej i przesunęli przebieg w lewo, tracąc jednocześnie zmianę SS/CS z pola widzenia:</p>

<p><img src="http://itoutline.me/images/Rigol_SPI_15_bajtow_SS_NOK.png"></p>

<p>Jest problem.</p>

<p>Na poniższym zrzucie zamieściłem wszystkie ustawienia dekodera SPI jakie zastosowałem do jego wykonania:</p>

<p><img src="http://itoutline.me/images/Rigol_SPI_Param.png"></p>

<p>No i najważniejsze rozłożenie pojedynczego bajtu na bity :) 0b01101001 = 0x69 = &ldquo;i&rdquo; ASCII</p>

<p><img src="http://itoutline.me/images/Rigol_SPI_bits.png"></p>

<p>Ostateczna kontrola ołówkiem:</p>

<p><img src="http://itoutline.me/images/Rigol_SPI_bits_exp.png"></p>

<p>Wykorzystuje oscyloskop bardzo mocno amatorsko ale potencjał tego urządzenia jest naprawdę imponujący. Oczywiście zakup oscyloskopu tylko dla dekodowania SPI to bardzo średni pomysł zważywszy na obecność analizatorów logicznych za 30 zł, no ale to dopiero początek :)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Raspberry Pi i podsłuchiwanie ruchu]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2014/09/11/raspberry-pi-i-podsluchiwanie-ruchu/"/>
    <updated>2014-09-11T19:42:10+00:00</updated>
    <id>http://itoutline.me/2014/09/11/raspberry-pi-i-podsluchiwanie-ruchu</id>
    <content type="html"><![CDATA[<p>Czasami zdarza się, że istnieje potrzeba sprawdzenia co się dzieje w dłuższym okresie czasu na danym urządzeniu jeśli chodzi o ruch sieciowy jaki przez nie przechodzi. Rpi nadaje się do tego całkiem nieźle. Do podsłuchania i zapisania ruchu wystarczyłby w zupełności <code>tcpdump</code> lub <code>tshark</code>ale zdecydowałem, że uruchomię wiresharka na Rpi i będę co jakiś czas podglądał pakiety. Stąd też instalacja serwera VNC w postaci <code>tightvncserver</code>.</p>

<h2>Architektura</h2>

<p>W moim wypadku wyglądało to tak, że modem DSL (który nie przydzielał adresów IP) miał być podłączony przez router do badanego urządzenia - Device-A. Pech chciał, że nie miałem pod ręka wolnego routera a testy trzeba było zacząć już. W związku z czym Rpi pełniło jednocześnie funkcje serwera DHCP, routera, sniffera i sieciowej konsoli ponieważ Device-A miał port szeregowy. Dodatkowo dla wygody, Rpi było podłączone do sieci Wifi z której mogłem sobie podglądać co tam się &ldquo;wyrabia&rdquo; ;)</p>

<p><img src="http://itoutline.me/images/rpi_sniffing.png"></p>

<h2>Oprogramowanie</h2>

<pre><code>sudo apt-get update
sudo apt-get install dnsmasq wireshark picocom tightvncserver
</code></pre>

<ul>
<li>dnsmasq - serwer DHCP/TFTP i DNS proxy</li>
<li>wireshark - podsłuchiwanie ruchu</li>
<li>picocom - konsola do połączeń szergowych</li>
<li>tightvncserver - serwer VNC</li>
</ul>


<h2>Konfiguracja Rpi</h2>

<ul>
<li>Konfiguracja <code>/etc/network/interfaces</code></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>auto lo
</span><span class='line'>iface lo inet loopback
</span><span class='line'>
</span><span class='line'>#Interfejs WAN
</span><span class='line'>auto eth0
</span><span class='line'>iface eth0 inet static
</span><span class='line'>      address xxx.xxx.xxx.xxx
</span><span class='line'>      netmask 255.255.255.0
</span><span class='line'>      gateway xxx.xxx.xxx.xxx
</span><span class='line'>
</span><span class='line'>#Interfejs LAN
</span><span class='line'>auto eth1
</span><span class='line'>iface eth1 inet static
</span><span class='line'>      address 192.168.11.1
</span><span class='line'>      network 255.255.255.0
</span><span class='line'>      gateway 192.168.11.1
</span><span class='line'>
</span><span class='line'>allow-hotplug wlan0
</span><span class='line'>auto wlan0
</span><span class='line'>iface wlan0 inet dhcp
</span><span class='line'>        wpa-ssid "SID_WIFI"
</span><span class='line'>        wpa-psk "Haslo_WIFI"
</span><span class='line'>
</span><span class='line'>iface default inet dhcp</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>Włączenie przekazywania ruchu IPV4 pomiędzy interfejsami sieciowymi</p>

<pre><code>  sysctl -w net.ipv4.ip_forward=1`
</code></pre></li>
<li><p>Włączenie &ldquo;maskarady&rdquo;</p>

<pre><code>  sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
  sudo iptables -A FORWARD -i eth0 -o eth1 -m state --state RELATED,ESTABLISHED -j ACCEPT
  sudo iptables -A FORWARD -i eth1 -o eth0 -j ACCEPT
</code></pre></li>
</ul>


<p>Gdybyśmy chcieli, żeby zmiana przetrwała restart Rpi, zapisujemy tablice</p>

<pre><code>    sudo bash -c 'iptables-save &gt; /etc/network/iptables'
</code></pre>

<p>Dodanie do <code>/etc/network/interfaces</code> linijki zaczytującej tablice</p>

<pre><code>    sudo bash -c 'echo "pre-up iptables-restore &lt; /etc/network/iptables" &gt;&gt; /etc/network/interfaces'
</code></pre>

<ul>
<li><p>Konfiguracja tightvncserver</p>

<ul>
<li><p>Konfiguracja hasła do VNC</p>

<pre><code>  tightvncserver
</code></pre></li>
<li><p>Uruchomienie serwera VNC</p>

<pre><code>  vncserver :0 -geometry 1200x800 -depth 16
</code></pre></li>
</ul>
</li>
<li><p>Konfiguracja wireshark</p>

<ul>
<li><p>Nadanie użytkownikowi &ldquo;pi&rdquo; uprawnień do przechwytywania ruchu (oczywiście można uruchomić wiresharka na koncie root ale wyrabianie dobrych nawyków zawsze w cenie)</p>

<pre><code>  sudo dpkg-reconfigure wireshark-common
</code></pre>

<p>  W oknie, które się pojawi wybieramy &ldquo;Yes&rdquo; a następnie dodajemy &ldquo;pi&rdquo; do grupy &ldquo;wireshark&rdquo;</p>

<pre><code>  sudo usermod -a -G wireshark pi
</code></pre>

<p>  Żeby powyższa operacja stała się aktywna konieczne jest ponowne zalogowanie się (ewentualnie restart Rpi)</p></li>
</ul>
</li>
<li><p>Konfiguracja dnsmasq <code>/etc/dnsmasq.conf</code></p></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>interface=eth1
</span><span class='line'>dhcp-range=192.168.11.140,192.168.11.150,255.255.255.0,12h
</span><span class='line'>log-queries
</span><span class='line'>log-dhcp</span></code></pre></td></tr></table></div></figure>


<p><code>dnsmasq</code> jest naprawdę ok, w sumie dwie pierwsze linijki wystarczają do skonfigurowania go jako serwer DHCP. <code>interface=eth1</code> to interfejs na którym nasłuchuje serwer DHCP. <code>log-queries</code> i <code>log-dhcp</code> spowodują, że w <code>/var/log/syslog</code> pojawią się zapytania DNS i DHCP wysyłane przez klientów. Może to być przydatne gdyby były jakieś kłopoty.</p>

<h2>Podsumowując</h2>

<ul>
<li><p>Należy uważać na ilość zbieranych danych, jeśli wiadomo, że interesuje nas ruch tylko z udziałem konkretnego adresu IP można dodać filtr na wejściu (Capture Filter): <code>host 192.168.0.1</code>. Specyficznego portu: <code>port 80</code>. Kombinacja: <code>host 192.168.0.1 and port 80</code>.</p></li>
<li><p>Instalacja wiresharka i tightvncserver może być czasami nadmiarowa i spokojnie wystarczy <code>tcpdump</code> (Instalacja <code>sudo apt-get install tcpdump</code>). Przechwytywanie całych pakietów na interfejsie <code>eth0</code> do pliku zrzut.pcap o maksymalnym rozmiarze 100MB, powstanie 10 takich plików i będą po kolei nadpisywane po przekroczeniu 1GB w sumie:</p>

<pre><code>  sudo tcpdump -i eth0 -C100M -W10 -s0 -w /home/pi/zrzut.pcap &amp;
</code></pre></li>
</ul>


<p>Trzeba pamiętać o uruchomieniu <code>tcpdump</code> w tle <code>&amp;</code> dzięki temu rozłaczenie sesji ssh nie zakończy działania programu. Po ponownym zalogowaniu, kończymy działanie programu:</p>

<pre><code>    killall tcpdump
</code></pre>

<ul>
<li><p>Nic gorszego niż &ldquo;zawieszenie się&rdquo; Rpi podczas sesji trwającej kilka dni. Żeby nie było &ldquo;jak krew w piach&rdquo;, dla bezpieczeństwa można co jakiś czas pobierać przechwytywany ruch za pomocą np. <code>scp</code>. Wireshark zapisuje tymczasowe pliki w katalogu <code>/tmp</code> pod nazwą w takim formacie <code>wireshark_eth1_20140911192644_X8aumU</code>. Bez problemu można je pobrać i analizować w innym miejscu.</p>

<pre><code>  scp pi@raspberrypi:/tmp/wireshark_eth1_20140911192644_X8aumU zrzut.pcap
</code></pre></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress - pierwsze wrażenia]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2014/08/24/octopress-pierwsze-wrazenia/"/>
    <updated>2014-08-24T21:44:22+00:00</updated>
    <id>http://itoutline.me/2014/08/24/octopress-pierwsze-wrazenia</id>
    <content type="html"><![CDATA[<p>Zmieniłem platformę blogową na Octopress-a i muszę przyznać, że jak na razie jest bardzo ok. Nie to żebym miał coś do Wordpress-a, po prostu nie potrzebuje takiego &ldquo;kombajna&rdquo;. Podstawowe zalety Octopress-a wg. mnie:</p>

<ul>
<li>Generuje statyczne pliki html.</li>
<li>Obsługuje bezproblemowo Markdown-a, pisanie tekstu w html-u to męczarnia a pisząc w edytorze wizualnym zawsze miałem wrażenie utraty kontroli nad tym co się ostatecznie pojawi w html-u.</li>
<li>Obrazki wrzucam do jednego katalogu i to wszytko.</li>
<li>Natywnie bardzo fajnie obsługuje wklejanie fragmentów kodu.</li>
</ul>


<p>Oczywiście są też pewne minusy:</p>

<ul>
<li>Jest mało kustomizowalny, oczywiście można sobie zmienić w nim wszystko no ale to już wieksza ingerencja w kod.</li>
<li>Skoro to statyczne strony to brak systemu do komentarzy (to mozna obejść wykorzystując np. Disqus).</li>
<li>Nie działa natywnie funkcjonalność &ldquo;linked list&rdquo; a niby powinna.</li>
</ul>


<p>Zapewne jednych i drugich jest znacznie więcej ale to już wyjdzie w trakcie &ldquo;prania&rdquo;. &ldquo;Linked list&rdquo; już sobie naprawiłem ;)</p>

<!-- comment -->

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vim - intro]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2014/08/20/vim-intro/"/>
    <updated>2014-08-20T07:21:36+00:00</updated>
    <id>http://itoutline.me/2014/08/20/vim-intro</id>
    <content type="html"><![CDATA[<p>Wszystko wskazuje na to, że przerzucę się zupełnie na vim-a. Od tylu lat szukam edytora &ldquo;idealnego&rdquo; a on cały czas czaił się w tle. Chyba największy problem jeśli chodzi o jego popularność to &ldquo;krzywa uczenia się&rdquo;, niestety lekko nie jest ale kiedy już człowiek zacznie się wciągać to szybko zorientuje się jak potężnym i wygodnym narzędziem jest vim. Oceniam moją znajomość tego edytora na jakieś 15%. Mam plan dojścia do 50% ;).</p>

<h2>Tryby</h2>

<table>
<thead>
<tr>
<th>Operacja</th>
<th>Kroki</th>
</tr>
</thead>
<tbody>
<tr>
<td>Insert Mode</td>
<td>W tym trybie edytujemy dokument przechodzimy do niego za pomocą klawisza <kbd>i</kbd>, wychodzimy do trybu &ldquo;Normal Mode&rdquo; - <kbd>Esc</kbd></td>
</tr>
<tr>
<td>Normal Mode</td>
<td>W tym trybie wciskane klawisze są traktowane jako polecenia. Powinien to być domyślny tryb pracy z vim-em</td>
</tr>
<tr>
<td>Visual Mode</td>
<td>Tryb w którym dokonujemy zaznaczania tekstu</td>
</tr>
</tbody>
</table>


<h2>Poruszanie</h2>

<table>
<thead>
<tr>
<th>Operacja</th>
<th>Kroki</th>
</tr>
</thead>
<tbody>
<tr>
<td>Góra, dół, lewo, prawo</td>
<td><kbd>k</kbd>, <kbd>j</kbd>, <kbd>h</kbd>, <kbd>l</kbd></td>
</tr>
<tr>
<td>Początek linii</td>
<td><kbd>0</kbd></td>
</tr>
<tr>
<td>Koniec linii</td>
<td><kbd>$</kbd></td>
</tr>
<tr>
<td>Wyraz do przodu</td>
<td><kbd>w</kbd></td>
</tr>
<tr>
<td>Wyraz wstecz</td>
<td><kbd>b</kbd></td>
</tr>
<tr>
<td>Dół</td>
<td>W przypadku pojedyczej linii, zajmującej kilka linii ekranu <kbd>g</kbd><kbd>j</kbd></td>
</tr>
<tr>
<td>Góra</td>
<td>W przypadku pojedynczej linii, zajmującej kilka linii ekranu <kbd>g</kbd><kbd>k</kbd></td>
</tr>
<tr>
<td>Początek pliku</td>
<td><kbd>:</kbd><kbd>0</kbd> lub <kbd>g</kbd><kbd>g</kbd></td>
</tr>
<tr>
<td>Koniec pliku</td>
<td><kbd>:</kbd><kbd>$</kbd> lub <kbd>G</kbd></td>
</tr>
<tr>
<td>Przejście do miejsca ostatniej edycji</td>
<td><kbd>g</kbd><kbd>i</kbd></td>
</tr>
</tbody>
</table>


<h2>Wprowadzanie tekstu</h2>

<table>
<thead>
<tr>
<th>Operacja</th>
<th>Kroki</th>
</tr>
</thead>
<tbody>
<tr>
<td>Połączenie dwóch linii tekstu</td>
<td><kbd>J</kbd></td>
</tr>
<tr>
<td>Copy/Cut/Paste</td>
<td>Przechodzimy do trybu &ldquo;visual&rdquo; <kbd>v</kbd> lub <kbd>V</kbd> jeśli chcemy od razu zaznaczać całe linie i zaznaczamy interesujący nas tekst, <kbd>y</kbd> (skopiowanie) <kbd>d</kbd> (wycięcie), przechodzimy do miejsca w którym ma się pojawić skopiowany/wycięty tekst,<kbd>p</kbd> wklejenie za kursorem <kbd>P</kbd> wklejenie od miejsca w którym jest kursor</td>
</tr>
<tr>
<td>Wcięcia</td>
<td>Wyłącznie automatycznych wcięć przy wklejaniu <code>:set paste</code>, włączenie <code>:set nopaste</code></td>
</tr>
<tr>
<td>Dodanie linii</td>
<td>Poniżej kursora <kbd>o</kbd>, powyżej <kbd>O</kbd></td>
</tr>
</tbody>
</table>


<h2>Usuwanie</h2>

<table>
<thead>
<tr>
<th>Operacja</th>
<th>Kroki</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pojedynczego znaku pod kursorem</td>
<td><kbd>x</kbd>. W trybie edycji działają również <kbd>Delete</kbd>, <kbd>Backspace</kbd></td>
</tr>
<tr>
<td>Cała linia</td>
<td><kbd>d</kbd><kbd>d</kbd></td>
</tr>
<tr>
<td>Od miejsca w którym jest kursor do początku linii</td>
<td><kbd>d</kbd><kbd>0</kbd></td>
</tr>
<tr>
<td>Od miejsca w którym jest kursor do końca linii</td>
<td><kbd>d</kbd><kbd>$</kbd></td>
</tr>
<tr>
<td>Od miejsca w którym jest kursor do początku pliku</td>
<td><kbd>d</kbd><kbd>g</kbd><kbd>g</kbd></td>
</tr>
<tr>
<td>Od miejsca w którym jest kursor do końca pliku</td>
<td><kbd>d</kbd><kbd>G</kbd></td>
</tr>
<tr>
<td>Usunięcie fragmentu tekstu</td>
<td>Zaznaczamy od którego miejsca ma być usunięty tekst <kbd>m</kbd><kbd>a</kbd>, przechodzimy kursorem do końca fragmentu który chcemy usunąć i wpisujemy <kbd>d</kbd><kbd>&lsquo;</kbd><kbd>a</kbd></td>
</tr>
<tr>
<td>Usuwanie w trybie blokowym</td>
<td>Tryb edycji blokowej jest przydatny kiedy np. w akapicie na początku linii są niepotrzebne odstępy. Można je usunąć za jednym razem, przechodząc do trybu blokowego <kbd>Ctrl</kbd><kbd>v</kbd> i zaznaczyć kursorem kolejne linie, następnie <kbd>d</kbd> lub <kbd>x</kbd></td>
</tr>
<tr>
<td>Usuwanie w trybie liniowym</td>
<td>Włączamy tryb zaznaczania liniowego <kbd>Shift</kbd><kbd>v</kbd>, kursorem zaznaczamy linie do usunięcia a następnie usuwamy <kbd>d</kbd> lub <kbd>x</kbd></td>
</tr>
</tbody>
</table>


<h2>Wyszukiwanie</h2>

<table>
<thead>
<tr>
<th>Operacja</th>
<th>Kroki</th>
</tr>
</thead>
<tbody>
<tr>
<td><kbd> * </kbd></td>
<td>Wyszukanie kolejnego wyrazu znajdującego się w miejscu kursora</td>
</tr>
<tr>
<td><kbd>#</kbd></td>
<td>Wyszukanie poprzedniego wyrazu znajdującego się w miejscu kursora</td>
</tr>
</tbody>
</table>


<h2>Zamiana</h2>

<h2>Zakładki</h2>

<table>
<thead>
<tr>
<th>Operacja</th>
<th>Kroki</th>
</tr>
</thead>
<tbody>
<tr>
<td>Otwarcie nowej zakładki</td>
<td><code>:tabnew</code></td>
</tr>
<tr>
<td>Poruszanie się pomiedzy zakładkami</td>
<td><kbd>g</kbd><kbd>t</kbd></td>
</tr>
<tr>
<td>Przywrócenie przypadkowo zamkniętej zakładki</td>
<td><code>:ls</code> - wyświetlnie bufora a następnie <code>:tabnew +Xbuf</code> gdzie X to numer pod którym plik jest w buforze</td>
</tr>
</tbody>
</table>


<h2>Tips&amp;Tricks</h2>

<table>
<thead>
<tr>
<th>Operacja</th>
<th>Kroki</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mini Kalkulator</td>
<td>W trybie &ldquo;insert&rdquo;, <kbd>Ctrl</kbd><kbd>r</kbd><kbd>=</kbd>, wpisujemy równanie po wciśnięciu <kbd>Enter</kbd> wynik pojawi się w miejscu kursora</td>
</tr>
</tbody>
</table>


<h2>.vimrc</h2>

<table>
<thead>
<tr>
<th>Wpis</th>
<th>Opis</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://itoutline.me/downloads/code/vim_autoindent_switch.txt">paste mode</a></td>
<td>Umożliwi włączanie/wyłączanie automatycznego ustawiania odstępów za pomocą klawisza F2. Zamiast zabawy z <code>:set paste</code> i <code>:set nopaste</code></td>
</tr>
</tbody>
</table>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Jump Desktop i Centos]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2013/12/15/jump-desktop-i-centos/"/>
    <updated>2013-12-15T23:17:00+00:00</updated>
    <id>http://itoutline.me/2013/12/15/jump-desktop-i-centos</id>
    <content type="html"><![CDATA[<p>Jump Desktop to naprawdę przyjemny klient RDP i VNC na OSX, IOS i Androida. Zaczynamy od sprawdzenia czy server VNC jest zainstalowany:</p>

<pre><code>rpm -qa \*vnc\*
</code></pre>

<p>Jeśli nie będzie pakietu <code>tigervnc-server</code>, instalujemy go:</p>

<pre><code>yum install tigervnc-server
</code></pre>

<p>Konfiguracje serwera VNC na Centos 6.5 rozpoczynamy od edycji pliku <code>sudo vi /etc/sysconfig/vncservers</code>:</p>

<pre><code>VNCSERVERS="1:itoutline"
VNCSERVERARGS[1]="-geometry 1280x900 -localhost"
</code></pre>

<p>W zmiennej <code>VNCSERVERS</code> podajemy identyfikator ekranu i nazwę użytkownika a w <code>VNCSERVERARGS</code> parametry połączenia. <code>-localhost</code> powoduje, że możliwe będzie tylko nawiązywanie połaczeń lokalnych (z wykorzytaniem tunelu SSH). W sumie zdalny dostęp za pomocą &ldquo;czystego&rdquo; VNC jest mało rozsądny.</p>

<!-- more -->


<p>Ustawienie hasła VNC dla użytkownika (bez tego server VNC nie chce się uruchomić):</p>

<pre><code>su - itoutline
vncpasswd
</code></pre>

<p>Włączenie uruchamiania serwera VNC po każdym restarcie i uruchomienie go:</p>

<pre><code>chkconfig vncserver on
service vncserver start
</code></pre>

<p>Konfiguarcję połączenia w Jump Desktop rozpoczynamy od zdefiniowania połączenia SSH w ustawieniach globalnych (jak widać użyłem niestandardowego portu 2001):</p>

<p><img src="http://itoutline.me/images/jump-ssh-servers.png"></p>

<p>W konfiguracji serwera podajemy utworzony tunel SSH:</p>

<p><img src="http://itoutline.me/images/jump-server-config-ssh.png"></p>

<p>Na końcu podajemy adres naszego serwera, tutaj oczywiście wprowadzamy localhost ponieważ łączymy się za pomocą zestawionego wcześniej tunelu.</p>

<p><img src="http://itoutline.me/images/jump-server-config.png"></p>

<p>Port na którym będziemy się łaczyć to 5901 ponieważ użytkownik zdefiniowany w <code>/etc/sysconfig/vncservers</code> miał identyfikator 1. VNC standardowo pracuje na porcie 5900 ale wykorzystujac wspomniany plik i identyfikatory ekranów  przypisujemy im kolejne porty po 5900.</p>

<p>Gdyby ktoś chciał zmienić standardowy port na którym pracuje VNC, można go zmodyfikować w pliku <code>/usr/bin/vncserver</code></p>

<pre><code>$vncPort = 5900 + $displayNumber;
</code></pre>

<p>Ustawnie portu na np. 5905 spowoduje, że użytkownik o identyfikatorze ekranu 2, będzie się łączył na port 5907.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Airplay Everywhere]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2013/07/13/airplay-everywhere/"/>
    <updated>2013-07-13T21:09:36+00:00</updated>
    <id>http://itoutline.me/2013/07/13/airplay-everywhere</id>
    <content type="html"><![CDATA[<p><img class="left" src="http://itoutline.me/images/Airplay_on_Android_AOA_Service.png"></p>

<p>Doczekałem się. W końcu znalazłem/jest aplikacja na Androida, która poprawnie strumieniuje dźwięk w trybie Airplay zarówno do RPi jak i AppleTv. Mowa o <a href="https://play.google.com/store/apps/details?id=com.nav.aoaservice&amp;hl=en">Airplay on Android AOA Service</a> Założę się, że nie na każdej wersji Androida powyżej 4.0 i telefonu będzie działać ale na moich obu urządzeniach (Sony Acro S - Cyanogenmod 10 i Nexus 7 - Cyanogenmod 10.1) w końcu nie ma z nią problemu. Na telefonie zaczeła działać poprawnie dopiero po ostatniej aktualizacji, wcześniej była straszna &ldquo;sieczka&rdquo;.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Lirc i Raspberry Pi]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2013/07/13/lirc-i-raspberry-pi/"/>
    <updated>2013-07-13T19:47:28+00:00</updated>
    <id>http://itoutline.me/2013/07/13/lirc-i-raspberry-pi</id>
    <content type="html"><![CDATA[<p>Po dłuższym okresie czasu postanowiłem odkurzyć Harmony 900, od kiedy przesiadłem się na ATV zostałem przy natywnym pilocie do tego urządzenia. Trochę niesamowite jak fajny jest pilot do Apple Tv, jedyne czego mu brakuje to możliwość regulacji głośności. Przy okazji pomyślałem, że sprawdzę jak wygląda sytuacja z Lirc-em na RPi i okazuje się, że jest bardzo dobrze.</p>

<h3>Podłączenie odbiornika IR</h3>

<p>W swoim &ldquo;magazynku&rdquo; znalazłem czujnik TSOP34836 i przyznam, że wykorzystałem ten bo akurat taki miałem&hellip; Działa na zalecanym napięciu 3V (od 2,7 do 5,5V) i maksymalnie pobiera 3mA (w trakcie moich testów nie przekroczył 1,25mA), czyli nie powinien być żadnym problemem dla portu GPIO.</p>

<p><img src="http://itoutline.me/images/rpi-lirc-tsop-ilustracja1.png"></p>

<p>Podłączyłem go w następujący sposób:</p>

<ul>
<li>Pin 1 - Pin 16 (GPIO 23 RPi)</li>
<li>Pin 2 - Pin 14 (GND RPi)</li>
<li>Pin 3 - Pin 1 (3,3V RPi)</li>
</ul>


<!-- more -->


<p><img src="http://itoutline.me/images/rpi-lirc-tsop34836.jpg"></p>

<h3>Konfiguracja RPi</h3>

<p>Instalacja Lirc-a:</p>

<pre><code>sudo apt-get update
sudo apt-get install lirc
</code></pre>

<p>Dodanie sterowników do <code>sudo vi /etc/modules</code>:</p>

<pre><code>lirc_dev
lirc_rpi gpio_in_pin=23 gpio_out_pin=22
</code></pre>

<p><code>gpio_in_pin=23</code> do pinu 23 podłączymy odbiornik podczerwieni a do 22 <code>gpio_out_pin=22</code> nadajnik. Po wydaniu polecenia <code>sudo modprobe lirc_rpi</code> sterowniki powinny się załadować. Można to sprawdzić za pomocą polecenia <code>lsmod | grep lirc</code>, powinniśmy zobaczyć coś takiego:</p>

<pre><code>% lsmod | grep lirc
lirc_rpi                7266  3
lirc_dev               10156  1 lirc_rpi
</code></pre>

<p>Następnie w pliku <code>sudo vi /etc/lirc/hardware.conf</code> umieszczamy poniższą zawartość:</p>

<figure class='code'><figcaption><span> (hardware.conf)</span> <a href='http://itoutline.me/downloads/code/hardware.conf'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">########################################################</span>
</span><span class='line'><span class="c"># /etc/lirc/hardware.conf</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># Arguments which will be used when launching lircd</span>
</span><span class='line'><span class="nv">LIRCD_ARGS</span><span class="o">=</span><span class="s2">&quot;--uinput&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Don&#39;t start lircmd even if there seems to be a good config file</span>
</span><span class='line'><span class="c"># START_LIRCMD=false</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Don&#39;t start irexec, even if a good config file seems to exist.</span>
</span><span class='line'><span class="c"># START_IREXEC=false</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Try to load appropriate kernel modules</span>
</span><span class='line'><span class="nv">LOAD_MODULES</span><span class="o">=</span><span class="nb">true</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Run &quot;lircd --driver=help&quot; for a list of supported drivers.</span>
</span><span class='line'><span class="nv">DRIVER</span><span class="o">=</span><span class="s2">&quot;default&quot;</span>
</span><span class='line'><span class="c"># usually /dev/lirc0 is the correct setting for systems using udev</span>
</span><span class='line'><span class="nv">DEVICE</span><span class="o">=</span><span class="s2">&quot;/dev/lirc0&quot;</span>
</span><span class='line'><span class="nv">MODULES</span><span class="o">=</span><span class="s2">&quot;lirc_rpi&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Default configuration files for your hardware if any</span>
</span><span class='line'><span class="nv">LIRCD_CONF</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">LIRCMD_CONF</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="c">########################################################</span>
</span></code></pre></td></tr></table></div></figure>


<p>W kolejnym kroku musimy skonfigurować jakiegoś pilota w pliku <code>sudo vi /etc/lirc/lircd.conf</code>. Ja akurat znalazłem w &ldquo;szufladzie&rdquo; coś takiego (opisany jako Microsoft Model 1039):</p>

<p><img src="http://itoutline.me/images/rpi-lirc-mce-1039.jpg"></p>

<p>Pliki konfiguracyjne do naprawdę wielu różnych pilotów można pobrać z <a href="http://lirc.sourceforge.net/remotes/">http://lirc.sourceforge.net/remotes/</a>. Niestety są one różnej jakości, dlatego mimo wszystko postanowiłem przygotować swój za pomoca polecenia <code>sudo irrecord  -d /dev/lirc0 my_mce.conf</code> ;) Trzeba przyznać, że proces jest dosyć żmudny ale w rezultacie wygenerowałem plik oparty na protokole RC6 (bardzo nie lubię plików RAW, są mocno nieprecyzyjne i pilot może działać różnie. Chociaż czasami nie ma wyjścia jeśli producent użył jakiegoś abstrakcyjnego protokolu IR). Wygląda on tak:</p>

<figure class='code'><figcaption><span> (my_mce.conf)</span> <a href='http://itoutline.me/downloads/code/my_mce.conf'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'># Please make this file available to others
</span><span class='line'># by sending it to &lt;lirc@bartelmus.de&gt;
</span><span class='line'>#
</span><span class='line'># this config file was automatically generated
</span><span class='line'># using lirc-0.9.0-pre1(default) on Thu Jul 11 13:36:11 2013
</span><span class='line'>#
</span><span class='line'># contributed by itoutline.me
</span><span class='line'>#
</span><span class='line'># brand:                      Harmony 900 (device profile MCE-1039)
</span><span class='line'># model no. of remote control: fully compatible with OEM MCE 1039 (P/N X801143-102)
</span><span class='line'># devices being controlled by this remote:
</span><span class='line'>#
</span><span class='line'># Tested on RPi with TSOP34836 connected to gpio_in_pin 23
</span><span class='line'>
</span><span class='line'>begin remote
</span><span class='line'>
</span><span class='line'>  name MCE
</span><span class='line'>  bits           13
</span><span class='line'>  flags RC6|CONST_LENGTH
</span><span class='line'>  eps            30
</span><span class='line'>  aeps          100
</span><span class='line'>  header       2677   873
</span><span class='line'>  one           466   419
</span><span class='line'>  zero          466   419
</span><span class='line'>  pre_data_bits   24
</span><span class='line'>  pre_data       0x1BFF83
</span><span class='line'>  gap          105884
</span><span class='line'>  min_repeat      3
</span><span class='line'>#  suppress_repeat 3
</span><span class='line'>#  uncomment to suppress unwanted repeats
</span><span class='line'>  toggle_bit_mask 0x8000
</span><span class='line'>  rc6_mask    0x100000000
</span><span class='line'>
</span><span class='line'>      begin codes
</span><span class='line'>          KEY_1                    0x1BFE
</span><span class='line'>          KEY_2                    0x1BFD
</span><span class='line'>          KEY_3                    0x1BFC
</span><span class='line'>          KEY_4                    0x1BFB
</span><span class='line'>          KEY_5                    0x1BFA
</span><span class='line'>          KEY_6                    0x1BF9
</span><span class='line'>          KEY_7                    0x1BF8
</span><span class='line'>          KEY_8                    0x1BF7
</span><span class='line'>          KEY_9                    0x1BF6
</span><span class='line'>          KEY_0                    0x1BFF
</span><span class='line'>          KEY_BLUE                 0x1BA1
</span><span class='line'>          KEY_RED                  0x1BA4
</span><span class='line'>          KEY_GREEN                0x1BA3
</span><span class='line'>          KEY_YELLOW               0x1BA2
</span><span class='line'>          KEY_MENU                 0x1BDB #&#39;Movies&#39; on Harmony 900 LCD and &#39;DVD Menu&#39; on MCE 1039 Remote
</span><span class='line'>          KEY_INFO                 0x1BF0
</span><span class='line'>          KEY_EXIT                 0x1BDC #&#39;Back&#39; on Harmony 900 LCD and MCE 1039 Remote
</span><span class='line'>          KEY_UP                   0x1BE1
</span><span class='line'>          KEY_DOWN                 0x1BE0
</span><span class='line'>          KEY_LEFT                 0x1BDF
</span><span class='line'>          KEY_RIGHT                0x1BDE
</span><span class='line'>          KEY_OK                   0x1BDD
</span><span class='line'>          KEY_VOLUMEDOWN           0x1BEE
</span><span class='line'>          KEY_VOLUMEUP             0x1BEF
</span><span class='line'>          KEY_MUTE                 0x1BF1
</span><span class='line'>          KEY_START                0x1BF2
</span><span class='line'>          KEY_CHANNELDOWN          0x1BEC
</span><span class='line'>          KEY_CHANNELUP            0x1BED
</span><span class='line'>          KEY_PLAY                 0x1BE9
</span><span class='line'>          KEY_PAUSE                0x1BE7
</span><span class='line'>          KEY_RECORD               0x1BE8
</span><span class='line'>          KEY_STOP                 0x1BE6
</span><span class='line'>          KEY_REWIND               0x1BEA
</span><span class='line'>          KEY_FORWARD              0x1BEB
</span><span class='line'>          KEY_PREVIOUS             0x1BE4
</span><span class='line'>          KEY_NEXT                 0x1BE5
</span><span class='line'>          KEY_ASCPECT              0x7BD8
</span><span class='line'>          KEY_RECORDEDTV           0x1BB7
</span><span class='line'>          KEY_LIVETV               0x1BDA
</span><span class='line'>          KEY_MYRADIO              0x7BAF
</span><span class='line'>          KEY_MYMUSIC              0x1BB8
</span><span class='line'>          KEY_MYPICTURES           0x1BB6
</span><span class='line'>          KEY_MYVIDEO              0x1BB5
</span><span class='line'>          KEY_AUDIO                0x7BB3
</span><span class='line'>          KEY_CLEAR                0x1BF5
</span><span class='line'>          KEY_ENTER                0x1BF4
</span><span class='line'>          KEY_NUMERIC_STAR         0x7BE2
</span><span class='line'>          KEY_NUMERIC_POUND        0x7BE3
</span><span class='line'>          KEY_AUDIO                0xEBB8
</span><span class='line'>          KEY_POWER                0x7BF3
</span><span class='line'>          KEY_OFF                  0x7BD5
</span><span class='line'>          KEY_ON                   0x7BD6
</span><span class='line'>          KEY_TELETEXT             0x1BA5
</span><span class='line'>          KEY_SUBTITLE             0x7BB2
</span><span class='line'>          KEY_GUIDE                0x7BD9
</span><span class='line'>      end codes
</span><span class='line'>end remote
</span></code></pre></td></tr></table></div></figure>


<p>Jak widać jest tutaj trochę zamieszane a to dlatego, że powyższy plik w pełni obsługuje również profil &ldquo;MCE-1039&rdquo; zdefiniowany na Harmony 900:</p>

<p><img src="http://itoutline.me/images/rpi-lirc-harmony-select-device.png"></p>

<p>Czyli pilot ze zdjęcia powyżej działa prawidłowo jak i Harmony 900 ze zdefiniowanym urzadzeniem &ldquo;MCE-1039&rdquo;. W przypadku Harmony jest sporo dodatkowych przycisków, których nie ma na moim pilocie &ldquo;Microsoft Model 1039&rdquo;.</p>

<p>Kopiujemy wygenerowany plik (lub pobrany z sieci do naszego pilota) w miejsce <code>/etc/lirc/lircd.conf</code> i można uruchamiać Lirc-a <code>sudo /etc/init.d/lirc start</code></p>

<p><img src="http://itoutline.me/images/rpi-lirc-start.png"></p>

<p>Za pomocą polecenia <code>irw</code> możemy sprawdzić czy rzeczywiście polcenia wysyłane przez pilota są odbierane przez Lirc-a:</p>

<p><img src="http://itoutline.me/images/rpi-lirc-irw.png"></p>

<p>U mnie dopiero po restarcie RPi zaczęło to działać.</p>

<h3>Go deep</h3>

<p>Z uwagi na to, że mam akurat pod ręką oscyloskop postanowiłem zobaczyć jak w rzeczywistości wygląda jakieś polecenie, trafiło na KEY_DOWN 0x1BE0 = 110111110000. Sondę podłączyłem bezpośrednio do wyjścia odbiornika IR.</p>

<p>Przebieg wygląda następująco (RC6 używa &ldquo;Manchester Encoding&rdquo; do kodowania sygnału):</p>

<p><img src="http://itoutline.me/images/key_down_mce_rc6.png"></p>

<p>Ostatnie 13 bitów to kod polecenia (pokrywa się to z tym co mamy w lircd.conf), następnie są 24 &ldquo;pre_data_bits&rdquo; i po ich konwersji do hex otrzymujemy 0x1BFF83 czyli wartość &ldquo;pre_data&rdquo;.</p>

<p>W sumie wszystko by się zgadzało :)</p>

<h3>Problemy</h3>

<ul>
<li>Jeśli wygrzebaliśmy pilota z &ldquo;szuflady&rdquo; to zaczynamy od sprawdzenia czy generuje w ogóle jakiś sygnał. Potrzebne jest do tego tak specjalistyczne narzędzie jak telefon z aparatem ;) Naciskanie przycisków powinno powodować pojawienie się fioletowego światła na ekranie telefonu. Szanse na to, że pilot wysyła sygnał ale jest on nieprawidłowy są bliskie 0.</li>
</ul>


<p><img src="http://itoutline.me/images/rpi-lirc-phone1.jpg" width="400"></p>

<ul>
<li>Kolejnym krokiem jest sprawdzenie czy sterowniki są poprawnie zainstalowane, czyli <code>lsmod</code>. U mnie wygląda to tak:</li>
</ul>


<p><img src="http://itoutline.me/images/rpi-lirc-lsusb.png"></p>

<ul>
<li>Jeśli <code>irw</code> nic nie wyświetla warto sprawdzić czy coś w ogóle dociera do portu RPi za pomocą polecenia <code>mode2 -d /dev/lirc0</code>, wcześniej trzeba zatrzymać Lirc-a <code>sudo /etc/init.d/lirc stop</code>. Jeżeli zobaczymy tam jakieś dane to znaczy, że Lirc i konfiguracja pilota zdefiniowana w <code>/etc/lirc/lircd.conf</code> nie do końca chce współpracować z pilotem który mamy.</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Typy plików obsługiwane przez XBMC]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2013/07/09/typy-plikow-obslugiwane-przez-xbmc/"/>
    <updated>2013-07-09T08:00:05+00:00</updated>
    <id>http://itoutline.me/2013/07/09/typy-plikow-obslugiwane-przez-xbmc</id>
    <content type="html"><![CDATA[<p>Mam w swoim archiwum pliki z rozszerzeniem .f4v, niezbyt ich dużo dlatego problem z wyświetlaniem ich podczas przeglądania zakładki Video nie pojawiał się zbyt często.</p>

<p>Okazuje się, że dodanie/usunięcie nowych rozszerzeń obsługiwanych przez XBMC jest bardzo proste (oczywiście format pliku musi być przede wszystkim &ldquo;zjadliwy&rdquo; dla XBMC). W pliku <code>advancedsettings.xml</code> (w przypadku ATV2 plik ten należy stworzyć w katalogu <code>/private/var/mobile/Library/Preferences/XBMC/userdata</code>) dodajemy następującą sekcję:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;advancedsettings&gt;</span>
</span><span class='line'>    <span class="nt">&lt;videoextensions&gt;</span>
</span><span class='line'>       <span class="nt">&lt;add&gt;</span>.f4v<span class="nt">&lt;/add&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/videoextensions&gt;</span>
</span><span class='line'><span class="nt">&lt;/advancedsettings&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>W pliku <code>advancedsettings.xml</code> można spersonalizować o wiele więcej ustawień. Szczegóły: <a href="http://wiki.xbmc.org/index.php?title=Userdata/advancedsettings.xml">http://wiki.xbmc.org/index.php?title=Userdata/advancedsettings.xml</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Połączenie konsolowe Rasberry Pi]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2013/06/25/polaczenie-konsolowe-rasberry-pi/"/>
    <updated>2013-06-25T21:49:16+00:00</updated>
    <id>http://itoutline.me/2013/06/25/polaczenie-konsolowe-rasberry-pi</id>
    <content type="html"><![CDATA[<p>Ostatnio zakupiłem kabelek USB => RS TTL, pracujący na napięciu 3.3V. Wygląda on tak:</p>

<p><img src="http://itoutline.me/images/rpi_serial_kabelek.jpg"></p>

<p>Dzięki niemu możemy podłączyć się do Rpi za pomocą konsoli. Ma to ten plus, że nie potrzebujemy monitora, klawiatury, sieci a i tak wiadomo co się dzieje od samego początku czyli podłączenia zasilania do Rpi.</p>

<p>Kabelek podłączamy w taki sposób:</p>

<p><img src="http://itoutline.me/images/rpi_serial_2.jpg"></p>

<p>Oczywiście musimy mieć zainstalowe sterowniki do chipsetu PL2303 (<a href="http://www.itoutline.me/pl2303-z-osx">jak to zrobić na OSX</a>). Następnie wydając polecenie:</p>

<pre><code>picocom -b 115200 /dev/cu.PL2303-00001014
</code></pre>

<p>podłączamy się do konsoli Rpi. Konsola jest skonfigurowana w dystrybucji Raspbian “wheezy” (Ostatnia linia w <code>/etc/inittab</code>). W Arch Linux, trzeba ją ustawić (btw odpuściłem Arch-a na razie;)</p>

<p>To wszystko, jesteśmy zalogowani przez ttyAMA0:</p>

<p><img src="http://itoutline.me/images/rpi_serial_login_2_retina_gotowy.png"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Wyłączenie Dashboard-a na OSX]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2013/06/09/wylaczenie-dashboard-a-na-osx/"/>
    <updated>2013-06-09T22:26:46+00:00</updated>
    <id>http://itoutline.me/2013/06/09/wylaczenie-dashboard-a-na-osx</id>
    <content type="html"><![CDATA[<p><img src="http://itoutline.me/images/dashboard.jpg"></p>

<p>Chyba nie przekonam się nigdy do tego rozwiązania. W każdym bądź razie wyłączam je permanentnie:</p>

<pre><code>defaults write com.apple.dashboard mcx-disabled -boolean YES
killall Dock
</code></pre>

<p>Gdybym jednak kiedyś zmienił zdanie:</p>

<pre><code>defaults write com.apple.dashboard mcx-disabled -boolean NO
killall Dock
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[PL2303 z OSX]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2013/06/09/pl2303-z-osx/"/>
    <updated>2013-06-09T18:34:26+00:00</updated>
    <id>http://itoutline.me/2013/06/09/pl2303-z-osx</id>
    <content type="html"><![CDATA[<p>Zaskakująco łatwo można dodać sterowniki do konwerterów USB-TTL opartych na chipsecie PL2303. Wystarczy pobrać archiwum osx-pl2303.kext.tgz <a href="http://www.xbsd.nl/2011/07/pl2303-serial-usb-on-osx-lion.html">http://www.xbsd.nl/2011/07/pl2303-serial-usb-on-osx-lion.html</a></p>

<p><img src="http://itoutline.me/images/PL2303.jpg"></p>

<!-- more -->


<p>Instalacja sprowadza się do następujących kroków:</p>

<pre><code>cd $TMPDIR
wget http://www.xbsd.nl/pub/osx-pl2303.kext.tgz
tar -xzf osx-pl2303.kext.tgz
sudo chmod -R 755 osx-pl2303.kext
sudo chown -R root:wheel osx-pl2303.kext
sudo cp -R osx-pl2303.kext /System/Library/Extensions/
sudo kextload /System/Library/Extensions/osx-pl2303.kext
sudo kextcache -system-cache
cd -
</code></pre>

<p>Teraz po podłączeniu konwertera do portu USB powinien pojawić się w katalogu pod nazwami <code>/dev/cu.PL2303-XXX</code> i <code>/dev/tty.PL2303-XXX</code></p>

<p><img src="http://itoutline.me/images/PL2303_dev_dir.png"></p>

<p>Do komunikacji szeregowej używam <code>picocom</code>, w tym terminalu najbardziej podoba mi się, że jest taki &ldquo;pico&rdquo; ;). Można go zainstalować przez <code>brew install picocom</code></p>

<p><img src="http://itoutline.me/images/PL2303_picocom.png"></p>

<p>Podłączenie do jakiegoś urządzenia może wyglądać np. tak:</p>

<p><img src="http://itoutline.me/images/PL2303_picocom_connection.png" width="350"></p>

<p>Powyższe rozwiązanie bez problemu działa na OSX 10.8.4</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[PartKeepr na OSX]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2013/05/09/partkeepr-na-osx/"/>
    <updated>2013-05-09T14:22:44+00:00</updated>
    <id>http://itoutline.me/2013/05/09/partkeepr-na-osx</id>
    <content type="html"><![CDATA[<p>Zauważyłem, że w związku z coraz większą ilością części elektronicznych w moim &ldquo;warsztacie&rdquo; coraz słabiej orientuje się co mam na &ldquo;stanie magazynowym&rdquo;. Pomyślałem, że stworzę prymitywną bazę z prostym frontendem i będę tam wrzucał informacje o zakupach. Zanim przystąpiłem do działania sprawdziłem czy przypadkiem nie ma już takiego rozwiązania i okazało się, że jest <a href="http://www.partkeepr.org">http://www.partkeepr.org</a></p>

<p>Przy okazji znacznie wykraczające poza moje wymagania, postanowiłem tym razem nie wymyślać koła na nowo.</p>

<p>Instalacja na OSX na pewno nie należy do kategorii &ldquo;agree, next, finish&rdquo;.</p>

<!-- more -->


<p>Zaczynamy od instalacji MySQL-a <code>brew install mysql</code>:</p>

<p><img src="http://itoutline.me/images/PartKeepr_mysql_-prerequisites.png"></p>

<p>Uruchamiamy bazę i tworzymy schemat z którego będzie korzystał Partkeepr:</p>

<pre><code>mysql.server start
mysql -uroot
CREATE DATABASE partkeepr CHARACTER SET UTF8;
GRANT USAGE ON *.* TO root@localhost IDENTIFIED BY '';
GRANT ALL PRIVILEGES ON partkeepr.* TO root@localhost;
</code></pre>

<p><img src="http://itoutline.me/images/PartKeepr_mysql_sql_-prerequisites.png"></p>

<p>Partkeepr wymaga również ImageMagick, DoctrineORM oraz Twig-a. Do instalacji ImageMagick użyłem Homebrew (wszystkie niestandardowe rzeczy staram się instalować za pomocą tego menadżera), &ldquo;niestety&rdquo; musimy dodać nieoficjalne źródła <code>brew tap josegonzalez/php</code> oraz <code>brew tap homebrew/dupes</code>:</p>

<p><img src="http://itoutline.me/images/PartKeepr_-tap_1_prerequisites_.png" width="640"></p>

<p><img src="http://itoutline.me/images/PartKeepr_-tap_2_prerequisites_.png" width="640"></p>

<p>Potem <code>brew install josegonzalez/php/php54-imagick</code>. Jedną z zależności jest instalacja PHP w wersji 5.4. Generalnie zawsze staram się korzystać z natywnych narzędzi OSX (PHP jest w OSX) ale i tak później potrzebny jest <code>pear</code> a tego już nie ma.</p>

<p>Na szczęscie można skorzystać z natywnego serwera Apache, trzeba tylko zmienić w pliku <code>/private/etc/apache2/httpd.conf</code> lokalizację PHP z <code>LoadModule php5_module libexec/apache2/libphp5.so</code> na <code>LoadModule php5_module /usr/local/opt/php54/libexec/apache2/libphp5.so</code></p>

<p>Warto się upewnić czy wszystko poszło jak powinno, można to zrobić np. tak:</p>

<pre><code>echo -e '' | sudo tee /Library/WebServer/Documents/phpinfo.php
</code></pre>

<p>Uruchamiamy Apache <code>sudo apachectl start</code>. Otwierając teraz w przeglądarce adres <a href="http://localhost/phpinfo.php">http://localhost/phpinfo.php</a> powinniśmy zobaczyć wersję PHP 5.4.15 i &ldquo;gdzieś na dole&rdquo; moduł imagick</p>

<p>Kolejnym krokiem jest instalacja DoctrineORM oraz Twig-a, wydajemy następujące polecenia:</p>

<pre><code>sudo pear channel-discover pear.symfony.com
sudo pear channel-discover pear.doctrine-project.org
sudo pear install pear.doctrine-project.org/DoctrineORM
sudo pear install pear.doctrine-project.org/DoctrineSymfonyYaml
sudo pear install pear.doctrine-project.org/DoctrineSymfonyConsole
sudo pear channel-discover pear.twig-project.org
sudo pear install twig/Twig
</code></pre>

<p>Pobieramy Partkeepr i ustawiamy uprawnienia do katalogu w którym chcemy umieścić Partkeepr, ja zainstalowałem go w <code>/Library/WebServer/Documents/partkeepr/</code></p>

<pre><code>cd /Library/WebServer/Documents/
sudo wget http://partkeepr.org/downloads/partkeepr-0.1.9.tbz2
sudo tar -xvf partkeepr-0.1.9.tbz2
sudo mv partkeepr-0.1.9 partkeepr
sudo chown -R _www:_www /Library/WebServer/Documents/partkeepr
</code></pre>

<p>Instalator Partkeepr sprawdza strefę czasową, dlatego trzeba ją ustawić w <code>/usr/local/etc/php/5.4/php.ini</code> np. <code>date.timezone = "Europe/Warsaw"</code>. Warto również upewnić się, że <code>short_open_tag = Off</code></p>

<p>Teraz można już uruchomić instalatora Partkeepr za pomocą linku: <a href="http://localhost/partkeepr/setup/">http://localhost/partkeepr/setup/</a></p>

<p>Powinniśmy zobaczyć poniższy ekran:</p>

<p><img src="http://itoutline.me/images/PartKeepr_Setup.png"></p>

<p>W następnym kroku instalator sprawdzi czy nie ma jakichś problemów ze środowiskiem:</p>

<p><img src="http://itoutline.me/images/PartKeepr_Setup_-prerequisites.png"></p>

<p>Definiowanie dostępu do wcześniej stworzonej bazy:</p>

<p><img src="http://itoutline.me/images/PartKeepr_Setup_db.png"></p>

<p>Jeśli nie będzie problemów powinna rozpocząć się instalacja:</p>

<p><img src="http://itoutline.me/images/PartKeepr_Setup_-db_ok.png"></p>

<p>Zapis lub wyświetlenie pliku konfiguracyjnego:</p>

<p><img src="http://itoutline.me/images/PartKeepr_Setup_-save_file.png"></p>

<p>Informacje na temat konfiguracji cron-a:</p>

<p><img src="http://itoutline.me/images/PartKeepr_Setup_cron.png"></p>

<p>Koniec:</p>

<p><img src="http://itoutline.me/images/PartKeepr_Setup_-finish.png"></p>

<p>Po otworzeniu linku <a href="http://localhost/partkeepr/frontend/">http://localhost/partkeepr/frontend/</a> powinniśmy mieć możliwość zalogowania się do aplikacji (admin/admin):</p>

<p><img src="http://itoutline.me/images/PartKeepr_page.png"></p>

<p>Jak widać w mojej bazie jest już Arduino ;), pozostała najgorsza część zadania czyli uzupełnienie &ldquo;aplikacji magazynowej&rdquo;.</p>

<p>Jeśli chcemy możemy uruchamiać MySQL-a od razu przy starcie systemu w tym celu należy wykonać polecenie:</p>

<p><code>ln -sfv /usr/local/opt/mysql/*.plist ~/Library/LaunchAgents</code></p>

<p>Co ciekawe uruchomienie Apache-a poprzez <code>sudo apachectl start</code> spowoduje, że będzie on już uruchamiany przy starcie systemu.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Problem Bitlocker]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2013/04/16/problem-bitlocker/"/>
    <updated>2013-04-16T13:42:27+00:00</updated>
    <id>http://itoutline.me/2013/04/16/problem-bitlocker</id>
    <content type="html"><![CDATA[<p><img class="left" src="http://itoutline.me/images/BitLocker_icon.png" width="150"></p>

<p>Przyznam, że nigdy nie myślałem, że coś takiego może mi sie przydarzyć&hellip; ale jednak. Klucze do bitlockera miałem zapisane na karcie micro-SD włożonej do miniaturowego czytnika USB. W pewnym momencie pojawił się nowy element w pobliżu komputera w postaci drukarki, &ldquo;głównej winowajczyjni&rdquo; ;). Drukarka była niestety zbyt blisko czytnika i prawdopodobnie za którymś razem spowodowała jakieś większe przesunięcie się czytnika, co zakończyło się strukturą katalogów na karcie jak poniżej. Oczywiście mogłem to sprawdzić tylko na ja jakimś innym komputerze ponieważ komputer który zabezpieczała ta karta w ogóle nie miał zamiaru się z nią uruchomić.</p>

<p><img src="http://itoutline.me/images/Bitlocker_sd_card_1.png"></p>

<!--more -->


<p>W sumie zbytnio się tym nie przejąłem dopóki nie wyszło na jaw, że zapasowe klucze przechowywane &ldquo;gdzieś&rdquo; w sieci pochodzą sprzed ostatniej instalacji Windows-a. Następnie zaczęło się gorączkowe poszukiwanie papierowej kopii &ldquo;Bitlocker Recovery Key&rdquo;. Nie trudno się domyśleć, że ukryłem ją dobrze. Ostatecznie okazało się, że nawet za dobrze. Poza tym miałem silne przeczucie, że znajdę tam te same klucze co w sieci. Plecy były mokre, ileś tam lat zdjęć o ironio zabezpieczonych RAID-em wydawały się stracone na dobre.</p>

<p>Niestety żaden program do odzyskiwania danych nie odnalazł interesujących mnie plików, jak to zwykle bywa bez problemu można było odtworzyć rzeczy zupełnie archaiczne i kompletnie zbędne. Zacząłem nawet szukać czy jakoś nie da się &ldquo;złamać&rdquo; Bitlockera i jedyne co znalazłem to możliwość odzyskania kluczy z obrazu pamięci wyciągniętego przez FireWire z działającej maszyny za pomocą <a href="http://www.lostpassword.com/">Passware Kit</a>. Mój komputer był już po restarcie czyli nawet taka ekwilibrystyka nie wchodziła w grę.</p>

<p>W akcie desperacji pomyślałem, że przeszukam jakimś edytorem HEX tą kartę i może coś tam znajdę. Skorzystałem z całkiem przyjemnego i darmowego edytora <a href="http://www.wxhexeditor.org/">wxHexEditor</a>. Wyszukiwanie ciągu znaków takich jak &ldquo;bitlocker&rdquo;, &ldquo;recovery&rdquo; nic nie dawało. Dopiero przy przeglądaniu PGUP/PGDOWN trafiłem na coś co spowodowało, że serce &ldquo;nabrało obrotów&rdquo;:</p>

<p><img src="http://itoutline.me/images/Bitlocker_wxHexEditor_1.png"></p>

<p>Kiedy zobaczyłem, że &ldquo;Recovery key identification&rdquo; pokrywa się z tym o który jestem proszony na ekranie a na dodatek po &ldquo;BitLocker Recovery Key&rdquo; są jakieś cyfry o mało nie zemdlałem ;). To i tak był dopiero jeden z dysków&hellip; Z drugim poszło już znacznie łatwiej, po prostu wyszukałem ciągu HEX:</p>

<pre><code>4200690074004C006F0063006B00650072 = B.i.t.l.o.c.k.e.r
5200650063006F0076006500720079 = R.e.c.o.v.e.r.y
</code></pre>

<p>Jeśli Twój napęd USB na którym były zapisane informacje dot. Bitlockera się uszkodził ale da się jeszcze go odczytać, można spróbować wyszukać jednego z powyższych ciągów znaków. W okolicy powinny być cyfry umożliwiajace uruchomienie komputera.</p>

<p><img src="http://itoutline.me/images/Bitlocker_search_wxHexEditor_1.png"></p>

<p>Wnioski z tej sytuacji nasunęły mi się następujące:</p>

<ul>
<li><p>Coś co niesie za sobą jakieś ryzyko i jest wykonywane po raz pierwszy, jest wykonywane starannie. Za pierwszym razem miałem kopię w sieci i wydrukowane klucze. Kiedy drugi raz użyłem Bitlockera zapomniałem o tym jak ważny jest backup tych informacji.</p></li>
<li><p>Naprawdę miałem szczęście, że plik z &ldquo;recovery key&rdquo; przetrwał na karcie SD w sposób nie naruszony. Ciekawe, że żaden z programów nie był w stanie go znaleźć (ostatecznie znalazłem wszystkie cztery pliki w <a href="http://www.wxhexeditor.org/">wxHexEditor</a> - dwa z pierwszego użycia Bitlockera i kolejne, po reinstalacji systemu).</p></li>
<li><p>Całkiem sensowne wydaje się zrobienie kilku katalagów w których będą zapisane klucze. Dzięki temu znacząco zwiękaszmy szansę, na ich odzyskanie. Chociaż zdecydowanie lepiej mieć po prostu więcej ich kopii na innych nośnikach.</p></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA["Aplikacja" dla OSX]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2013/04/09/aplikacja-dla-osx/"/>
    <updated>2013-04-09T08:41:01+00:00</updated>
    <id>http://itoutline.me/2013/04/09/aplikacja-dla-osx</id>
    <content type="html"><![CDATA[<p>Słowo aplikacja nie bez powodu jest w cudzysłowiu. Tak naprawdę to bash-owy skrypt umieszczony w odpowiedniej strukturze katalogowej wykorzystujący narzędzie <a href="http://www.bluem.net/en/mac/pashua/">Pashua</a>. W sumie najbardziej mi odpowiada <a href="http://www.itoutline.me/xfreerdp-na-szybko/">ten sposób</a> ale pomyślałem sobie, że w ramach ćwiczeń spróbuje zrobić jak najprostsze ale w miarę funkcjonalne GUI do <code>xfreerdp</code>. Stąd cała zabawa z Pashua.</p>

<p>Aplikacje w OSX są aplikacjami dzięki rozszerzeniu .app, tak naprawdę to katalog w którym są umieszczone pliki i zasoby niezbędne do działania programu. Moją &ldquo;aplikację&rdquo; postanowiłem nazwać &ldquo;XFreerdp Client&rdquo;. Jej zawartość wygląda następująco (&ldquo;Show package content&rdquo; z menu podręcznego):</p>

<p><img src="http://itoutline.me/images/Xfreerdp_Client.app_directory.png" width="400"></p>

<ul>
<li><p>Info.plist - to plik zawierający informacje o aplikacji. Zdefiniowana jest w nim nazwa pliku, który ma byc uruchomiony, ikony, wersji, architektury itp.</p></li>
<li><p>rdp_connect - to skrypt, który jest uruchamiany</p></li>
<li><p>rdp_connect_image.png - obraz który jest wyświetlany w oknie Pashua</p></li>
<li><p>rdp_connect.icns - ikona aplikacji Xfreerdp Client</p></li>
</ul>


<!-- more -->


<p>Zawartość Info.plist:</p>

<figure class='code'><figcaption><span> (Info.plist)</span> <a href='http://itoutline.me/downloads/code/Info.plist'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;plist</span> <span class="na">version=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;dict&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>CFBundleDevelopmentRegion<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>en<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>CFBundleExecutable<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>rdp_connect<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>CFBundleIconFile<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>rdp_connect.icns<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>CFBundleIdentifier<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>itoutline.me.Xfreerdp_Client<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>CFBundleInfoDictionaryVersion<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>6.0<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>CFBundleName<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>Xfreerdp Client<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>CFBundlePackageType<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>APPL<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>CFBundleShortVersionString<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>1.0<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>CFBundleSignature<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>????<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>CFBundleVersion<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>1<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>LSApplicationCategoryType<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>public.app-category.utilities<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>LSMinimumSystemVersion<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>10.5.0<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>LSUIElement<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>1<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>NSHumanReadableCopyright<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>© 2013 itoutline.me<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>NSMainNibFile<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>MainMenu<span class="nt">&lt;/string&gt;</span>
</span><span class='line'>    <span class="nt">&lt;key&gt;</span>NSPrincipalClass<span class="nt">&lt;/key&gt;</span>
</span><span class='line'>    <span class="nt">&lt;string&gt;</span>NSApplication<span class="nt">&lt;/string&gt;</span>
</span><span class='line'><span class="nt">&lt;/dict&gt;</span>
</span><span class='line'><span class="nt">&lt;/plist&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Klucz <code>LSUIElement</code> z wartością ustawioną na <code>1</code> powoduje, że aplikacja nie pojawia się w Dock-u, co ma sens bo i tak po kliknięciu OK uruchamia się <code>xfreerdp</code>. Modyfikację powyższego klucza można wykorzystać w dowolnym programie, którego nie chcemy widzieć w Dock-u.</p>

<p>Pashua daje całkiem spore możliwości jeżeli chodzi o wprowadzanie danych. Może to być pole tekstowe, pole hasła, check box, lista rozwijana, przycisk.</p>

<p>Tak wygląda sam skrypt <code>rdp_connect</code>:</p>

<figure class='code'><figcaption><span>rdp_connect</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash -l</span>
</span><span class='line'>
</span><span class='line'><span class="nv">xfreerdp</span><span class="o">=</span><span class="sb">`</span>which xfreerdp<span class="sb">`</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> ! -f <span class="nv">$HOME</span>/.serverauth.* <span class="o">]</span>
</span><span class='line'>    <span class="k">then</span>
</span><span class='line'>        osascript -e <span class="s1">&#39;launch application &quot;Xquartz&quot;&#39;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> ! <span class="s2">&quot;$DISPLAY&quot;</span> <span class="o">]</span>
</span><span class='line'>    <span class="k">then</span>
</span><span class='line'>        <span class="nb">export </span><span class="nv">DISPLAY</span><span class="o">=</span>:0
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'>pashua_run<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Write config file</span>
</span><span class='line'>    <span class="nv">pashua_configfile</span><span class="o">=</span><span class="sb">`</span>/usr/bin/mktemp /tmp/pashua_XXXXXXXXX<span class="sb">`</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;$1&quot;</span> &gt; <span class="nv">$pashua_configfile</span>
</span><span class='line'>
</span><span class='line'>    <span class="nv">bundlepath</span><span class="o">=</span><span class="s2">&quot;Pashua.app/Contents/MacOS/Pashua&quot;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$3&quot;</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">]</span>
</span><span class='line'>    <span class="k">then</span>
</span><span class='line'>        <span class="nv">mypath</span><span class="o">=</span><span class="sb">`</span>dirname <span class="s2">&quot;$0&quot;</span><span class="sb">`</span>
</span><span class='line'>        <span class="k">for</span> searchpath in <span class="s2">&quot;$mypath/Pashua&quot;</span> <span class="s2">&quot;$mypath/$bundlepath&quot;</span> <span class="s2">&quot;./$bundlepath&quot;</span> <span class="se">\</span>
</span><span class='line'>                          <span class="s2">&quot;/Applications/$bundlepath&quot;</span> <span class="s2">&quot;$HOME/Applications/$bundlepath&quot;</span>
</span><span class='line'>        <span class="k">do</span>
</span><span class='line'>            <span class="k">if</span> <span class="o">[</span> -f <span class="s2">&quot;$searchpath&quot;</span> -a -x <span class="s2">&quot;$searchpath&quot;</span> <span class="o">]</span>
</span><span class='line'>            <span class="k">then</span>
</span><span class='line'>                <span class="nv">pashuapath</span><span class="o">=</span><span class="nv">$searchpath</span>
</span><span class='line'>                <span class="nb">break</span>
</span><span class='line'><span class="nb">            </span><span class="k">fi</span>
</span><span class='line'>        <span class="k">done</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>        <span class="c"># Directory given as argument</span>
</span><span class='line'>        <span class="nv">pashuapath</span><span class="o">=</span><span class="s2">&quot;$3/$bundlepath&quot;</span>
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> ! <span class="s2">&quot;$pashuapath&quot;</span> <span class="o">]</span>
</span><span class='line'>    <span class="k">then</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">&quot;Error: Pashua could not be found&quot;</span>
</span><span class='line'>        <span class="nb">exit </span>1
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Manage encoding</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$2&quot;</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">]</span>
</span><span class='line'>    <span class="k">then</span>
</span><span class='line'>        <span class="nv">encoding</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>        <span class="nv">encoding</span><span class="o">=</span><span class="s2">&quot;-e $2&quot;</span>
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Get result</span>
</span><span class='line'>    <span class="nv">result</span><span class="o">=</span><span class="sb">`</span><span class="s2">&quot;$pashuapath&quot;</span> <span class="nv">$encoding</span> <span class="nv">$pashua_configfile</span> <span class="p">|</span> sed <span class="s1">&#39;s/ /;;;/g&#39;</span><span class="sb">`</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Remove config file</span>
</span><span class='line'>    rm <span class="nv">$pashua_configfile</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Parse result</span>
</span><span class='line'>    <span class="k">for</span> line in <span class="nv">$result</span>
</span><span class='line'>    <span class="k">do</span>
</span><span class='line'>        <span class="nv">key</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$line</span> <span class="p">|</span> sed <span class="s1">&#39;s/^\([^=]*\)=.*$/\1/&#39;</span><span class="sb">`</span>
</span><span class='line'>        <span class="nv">value</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$line</span> <span class="p">|</span> sed <span class="s1">&#39;s/^[^=]*=\(.*\)$/\1/&#39;</span> <span class="p">|</span> sed <span class="s1">&#39;s/;;;/ /g&#39;</span><span class="sb">`</span>
</span><span class='line'>        <span class="nv">varname</span><span class="o">=</span><span class="nv">$key</span>
</span><span class='line'>        <span class="nv">varvalue</span><span class="o">=</span><span class="s2">&quot;$value&quot;</span>
</span><span class='line'>        <span class="nb">eval</span> <span class="nv">$varname</span><span class="o">=</span><span class="s1">&#39;$varvalue&#39;</span>
</span><span class='line'>    <span class="k">done</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span> <span class="c"># pashua_run()</span>
</span><span class='line'>
</span><span class='line'><span class="nv">conf</span><span class="o">=</span><span class="s2">&quot;</span>
</span><span class='line'><span class="s2"># Set transparency: 0 is transparent, 1 is opaque</span>
</span><span class='line'><span class="s2">*.transparency=1</span>
</span><span class='line'>
</span><span class='line'><span class="s2"># Set window title</span>
</span><span class='line'><span class="s2">*.title = Xfreerdp Client</span>
</span><span class='line'>
</span><span class='line'><span class="s2"># Host</span>
</span><span class='line'><span class="s2">txh.type = textfield</span>
</span><span class='line'><span class="s2">txh.label = Host:Port</span>
</span><span class='line'><span class="s2">txh.default = 192.168.1.1:8403</span>
</span><span class='line'><span class="s2">txh.width = 150</span>
</span><span class='line'>
</span><span class='line'><span class="s2"># User name</span>
</span><span class='line'><span class="s2">txu.type = textfield</span>
</span><span class='line'><span class="s2">txu.label = User</span>
</span><span class='line'><span class="s2">txu.default = itoutline.me</span>
</span><span class='line'><span class="s2">txu.width = 120</span>
</span><span class='line'>
</span><span class='line'><span class="s2"># Password</span>
</span><span class='line'><span class="s2">pw.type = password</span>
</span><span class='line'><span class="s2">pw.label = Password</span>
</span><span class='line'><span class="s2">pw.default = Secret!</span>
</span><span class='line'><span class="s2">pw.width = 120</span>
</span><span class='line'>
</span><span class='line'><span class="s2"># Resolution - radiobuttons</span>
</span><span class='line'><span class="s2">res.type = radiobutton</span>
</span><span class='line'><span class="s2">res.label = Resolution</span>
</span><span class='line'><span class="s2">res.option = 1024x768</span>
</span><span class='line'><span class="s2">res.option = 1280x800</span>
</span><span class='line'><span class="s2">res.option = 1440x900</span>
</span><span class='line'><span class="s2">res.option = 1920x1080</span>
</span><span class='line'><span class="s2">res.option = fullscreen</span>
</span><span class='line'><span class="s2">res.default = 1280x800</span>
</span><span class='line'>
</span><span class='line'><span class="s2"># Connection Speed - popup menu</span>
</span><span class='line'><span class="s2">popspeed.type = popup</span>
</span><span class='line'><span class="s2">popspeed.label = Connection Speed</span>
</span><span class='line'><span class="s2">popspeed.width = 100</span>
</span><span class='line'><span class="s2">popspeed.option = lan</span>
</span><span class='line'><span class="s2">popspeed.option = broadband</span>
</span><span class='line'><span class="s2">popspeed.option = modem</span>
</span><span class='line'><span class="s2">popspeed.default = lan</span>
</span><span class='line'>
</span><span class='line'><span class="s2"># Console session</span>
</span><span class='line'><span class="s2">cons.type = checkbox</span>
</span><span class='line'><span class="s2">cons.label = Connect to console session</span>
</span><span class='line'><span class="s2">cons.rely = -18</span>
</span><span class='line'><span class="s2">cons.default = 0</span>
</span><span class='line'>
</span><span class='line'><span class="s2"># Compression</span>
</span><span class='line'><span class="s2">compres.type = checkbox</span>
</span><span class='line'><span class="s2">compres.label = Enable compression</span>
</span><span class='line'><span class="s2">compres.rely = -18</span>
</span><span class='line'><span class="s2">compres.default = 1</span>
</span><span class='line'>
</span><span class='line'><span class="s2"># desktop composition</span>
</span><span class='line'><span class="s2">compos.type = checkbox</span>
</span><span class='line'><span class="s2">compos.label = Enable desktop composition</span>
</span><span class='line'><span class="s2">compos.rely = -18</span>
</span><span class='line'><span class="s2">compos.default = 0</span>
</span><span class='line'>
</span><span class='line'><span class="s2"># kill x after dissconection</span>
</span><span class='line'><span class="s2">killx.type = checkbox</span>
</span><span class='line'><span class="s2">killx.label = Exit Xquartz after disconnection</span>
</span><span class='line'><span class="s2">killx.rely = -18</span>
</span><span class='line'><span class="s2">killx.default = 0</span>
</span><span class='line'>
</span><span class='line'><span class="s2"># Add a cancel button with default label</span>
</span><span class='line'><span class="s2">cb.type=cancelbutton</span>
</span><span class='line'><span class="s2">&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Set the images&#39; paths relative to this file&#39;s path /</span>
</span><span class='line'><span class="c"># skip images if they can not be found in this file&#39;s path</span>
</span><span class='line'><span class="nv">bgimg</span><span class="o">=</span><span class="k">$(</span>dirname <span class="s2">&quot;$0&quot;</span><span class="k">)</span><span class="s1">&#39;/rdp_connect_image.png&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -e <span class="s2">&quot;$bgimg&quot;</span> <span class="o">]</span>
</span><span class='line'><span class="k">then</span>
</span><span class='line'>    <span class="c"># Display background image</span>
</span><span class='line'>    <span class="nv">conf</span><span class="o">=</span><span class="s2">&quot;$conf</span>
</span><span class='line'><span class="s2">          bg.type = image</span>
</span><span class='line'><span class="s2">          bg.x = 70</span>
</span><span class='line'><span class="s2">          bg.y = 40</span>
</span><span class='line'><span class="s2">          bg.path = $bgimg&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'>pashua_run <span class="s2">&quot;$conf&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[[</span> <span class="nv">$cons</span> <span class="o">==</span> <span class="m">1</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>    <span class="nv">cons</span><span class="o">=</span><span class="s2">&quot;-0&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>    <span class="nv">cons</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[[</span> <span class="nv">$res</span> <span class="o">==</span> fullscreen <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>    <span class="nv">res</span><span class="o">=</span><span class="s2">&quot;-f&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>    <span class="nv">res</span><span class="o">=</span><span class="s2">&quot;-g $res&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[[</span> <span class="nv">$compres</span> <span class="o">==</span> <span class="m">1</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>    <span class="nv">compres</span><span class="o">=</span><span class="s2">&quot;-z&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>    <span class="nv">compres</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[[</span> <span class="nv">$compos</span> <span class="o">==</span> <span class="m">1</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>    <span class="nv">compos</span><span class="o">=</span><span class="s2">&quot;--composition&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>    <span class="nv">compos</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[[</span> <span class="nv">$cb</span> !<span class="o">=</span> <span class="m">1</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>    <span class="nv">$xfreerdp</span> -u <span class="nv">$txu</span> -p <span class="nv">$pw</span> <span class="nv">$res</span> <span class="nv">$cons</span> <span class="nv">$compres</span> --no-rdp -x <span class="nv">$popspeed</span> <span class="nv">$compos</span> --plugin cliprdr --plugin rdpdr --data disk:HDD:<span class="nv">$HOME</span> -- <span class="nv">$txh</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$killx</span> <span class="o">==</span> <span class="m">1</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>        osascript -e <span class="s1">&#39;tell application &quot;Xquartz&quot; to quit&#39;</span>
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>W powyższym skrypcie wart wspomnienia jest sposób w jaki uruchamiany jest serwer X. Wykorzystałem do tego <code>osascript</code> i przyznam, że nie znalazłem jakiegoś lepszego rozwiązania.</p>

<p>Uruchomienie serwera X:</p>

<pre><code>osascript -e 'launch application "Xquartz"'
</code></pre>

<p>Zatrzymanie:</p>

<pre><code>osascript -e 'tell application "Xquartz" to quit'
</code></pre>

<p>W poleceniu <code>xfreerdp</code> automatycznie ładowane są pluginy opowiedzialne za funkcjonalność schowka i dostępu do lokalnych dysków (<code>--plugin rdpdr --data disk:HDD:$HOME</code>), na Windowsie montowany jest katalog domowy.</p>

<p>Konieczne jest również zainstalowanie aplikacji <a href="http://www.bluem.net/en/mac/pashua/">Pashua</a>. Można tego nie robić i umieść tylko binarkę (Pashua) w katalogu <code>XFreerdp Client.app/Contents/MacOS</code>. Ma to sens kiedy chcemy wykorzystać tylko do jednej &ldquo;aplikacji&rdquo; narzędzie Pashua ale jeśli chcemy przygotować więcej tego typu rozwiązań to nie najlepszym pomysłem jest umieszczanie w każdej paczce wspomnianej binarki.</p>

<p>Po skopiowaniu <code>Xfreerdp Ciient.app</code> do katalogu <code>/Applications</code> w Launchpadzie wygląda bardzo dobrze:</p>

<p><img src="http://itoutline.me/images/Xfreerdp_Client.app_lista.png" width="500"></p>

<p>Okno generowane przez Pashua, w przypadku kiedy nie działa serwer X trzeba chwilę na nie poczekać. Pojawi się dopiero po zainicjowaniu serwera:</p>

<p><img src="http://itoutline.me/images/Xfreerdp_Client_app.png" width="300"></p>

<p>Nawiązana sesja:</p>

<p><img src="http://itoutline.me/images/Xfreerdp_Client.app_connection.png" width="800"></p>

<p>Jeśli ktoś nie przepada za shellem albo musi pomóc komuś kto tak ma, może w całkiem prosty sposób zrobić sobie nakładkę graficzną na dowolny program, który po uruchomieniu wymaga jakichś parametrów. Rozwiązanie jest bardzo proste i oczywiście ma w związku z tym swoje ograniczenia (np. kiepska obsługa błędów a w zasadzie jej brak).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Xfreerdp na szybko]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2013/04/08/xfreerdp-na-szybko/"/>
    <updated>2013-04-08T22:36:42+00:00</updated>
    <id>http://itoutline.me/2013/04/08/xfreerdp-na-szybko</id>
    <content type="html"><![CDATA[<p>Xfreerdp działa bardzo dobrze ale ma ten minus, że wymaga podania sporej ilości parametrów do każdego połączenia. Można &ldquo;przegrepować&rdquo; historię, wkleić linijkę do skryptu ale można też zrobić to tak:</p>

<figure class='code'><figcaption><span>Funkcja start_rdp w .bash_profile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">function</span> start_rdp <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> ! -f ~/.serverauth.* <span class="o">]</span>
</span><span class='line'>        <span class="k">then</span>
</span><span class='line'>            <span class="nb">echo</span> <span class="s2">&quot;Starting Xquartz...&quot;</span>
</span><span class='line'>            osascript -e <span class="s1">&#39;launch application &quot;Xquartz&quot;&#39;</span>
</span><span class='line'>            sleep 3
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> ! <span class="s2">&quot;$DISPLAY&quot;</span> <span class="o">]</span>
</span><span class='line'>        <span class="k">then</span>
</span><span class='line'>            <span class="nb">export </span><span class="nv">DISPLAY</span><span class="o">=</span>:0
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">case</span> <span class="nv">$1</span> in
</span><span class='line'>    workpc <span class="o">)</span>
</span><span class='line'>        <span class="sb">`</span>which xfreerdp<span class="sb">`</span> -u user01 -g 1280x800 -z --no-rdp -x lan --plugin cliprdr --plugin rdpdr --data disk:HDD:<span class="nv">$HOME</span> -- 192.168.1.1:8403
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    testpc <span class="o">)</span>
</span><span class='line'>        <span class="sb">`</span>which xfreerdp<span class="sb">`</span> -u itoutline.me -g 1280x800 -z --no-rdp -x lan --plugin cliprdr --plugin rdpdr --data disk:HDD:<span class="nv">$HOME</span> -- 192.168.1.1:8404
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    * <span class="o">)</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">&quot;You need to provide hostname: workpc, testpc&quot;</span>
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    <span class="k">esac</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nb">alias </span><span class="nv">rdp</span><span class="o">=</span>start_rdp
</span></code></pre></td></tr></table></div></figure>


<p>Powyższy kawałek kodu należy umieścić w <code>.bash_profile</code> (o ile korzystamy właśnie z tego shell-a). Teraz, żeby połączyć się z hostem o nazwie <code>workpc</code> wystarczy w terminalu wpisać <code>rdp workpc</code>. Jak widać funkcja sprawdza czy jest uruchomiony serwer X oraz ustawiona zmienna <code>DISPLAY</code>. Niezbyt eleganckie jest użycie polecenia <code>sleep</code> ale Xquartz trochę się uruchamia&hellip;</p>

<p><img src="http://itoutline.me/images/xfreerdp_na_szybko.png"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SSH tips]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2013/03/31/ssh-tips/"/>
    <updated>2013-03-31T17:17:08+00:00</updated>
    <id>http://itoutline.me/2013/03/31/ssh-tips</id>
    <content type="html"><![CDATA[<p><img class="left" src="http://itoutline.me/images/OpenSSH_logo-e1365113790448.png"></p>

<p>Kilka usprawnień i wskazówek ułatwiających korzystanie z SSH.</p>

<h4>Konfiguracja hostów zdalnych</h4>

<p>Korzystanie z pliku <code>~/.ssh/config</code> ułatwia łączenie się ze zdalnymi hostami. Wystarczy wpisać <code>ssh</code>, pierwszą literę hosta i wcisnąć klawisz  ⇥ tab. Nie trzeba pamiętać o porcie, użytkowniku, parametrach połączenia. <code>ForwardX11 yes</code> umożliwia uruchamianie aplikacji graficznych (oczywiście musimy mieć uruchomiony na kliencie serwer X-ów). Poniżej przykładowy plik:</p>

<pre><code>Host centos-01
HostName 192.168.1.190
User itoutline
ForwardX11 yes

Host openwrt
Hostname 192.168.1.1
User root

Host appletv
Hostname 192.168.1.60
User root

Host workstation
Hostname 192.168.1.1
Port 8511
User itoutline
</code></pre>

<h4>Automatyczne logowanie</h4>

<p>Umieszczenie naszego klucza publicznego w pliku <code>~/.ssh/authorized_keys</code> na serwerze umożliwia zalogowanie się bez użycia hasła. Najpierw musimy wygenerować parę kluczy np.:</p>

<pre><code>[itoutline@centos-01 ~]$ ssh-keygen -t rsa -C "itoutline@centos-01"
Generating public/private rsa key pair.
Enter file in which to save the key (/home/itoutline/.ssh/id_rsa):
Created directory '/home/itoutline/.ssh'.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/itoutline/.ssh/id_rsa.
Your public key has been saved in /home/itoutline/.ssh/id_rsa.pub.
The key fingerprint is:
81:c4:99:69:cd:c5:39:d8:01:26:f7:bd:05:3a:bd:df itoutline@centos-01
The key's randomart image is:
+--[ RSA 2048]----+
|     .o*+*oo.    |
|     .*=+.=+ .   |
|     .. . +.o .  |
|         . . +   |
|        S   o    |
|             . . |
|              . E|
|                 |
|                 |
+-----------------+
</code></pre>

<p>Niepodanie &ldquo;passphrase&rdquo; podczas generowania kluczy spowoduje, że zawsze będziemy mogli zalogować się na zdalnego hosta. Ma to jednak zasadniczy minus, ktoś kto zdobędzie nasz klucz prywatny zapisany w pliku <code>/home/itoutline/.ssh/id_rsa</code> zaloguje się bezproblemowo wszędzie tam gdzie dodaliśmy nasz klucz publiczny do <code>~/.ssh/authorized_keys</code>. Trochę jak zapisanie hasła w pliku tekstowym&hellip;</p>

<p>Pozostaje skopiowanie klucza publiczngo na zdalny serwer, można to zrobić np. za pomocą <code>ssh-copy-id</code>:</p>

<pre><code>[itoutline@centos-01 ~]$ ssh-copy-id centos-03
The authenticity of host 'centos-03 (192.168.1.200)' can't be established.
RSA key fingerprint is 5b:85:ee:ee:d5:12:a3:f1:fe:10:5f:4d:66:f5:e5:7a.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'centos-03' (RSA) to the list of known hosts.
itoutline@centos-03's password:
Now try logging into the machine, with "ssh 'centos-03'", and check in:

  .ssh/authorized_keys

to make sure we haven't added extra keys that you weren't expecting.
</code></pre>

<p>W przypadku kiedy ssh nasłuchuje na porcie innym niż standardowy można użyć polecenia</p>

<p><code>ssh-copy-id -i ~/.ssh/id_rsa.pub "-p 2222 itoutline@centos-03"</code></p>

<p>Jeśli mamy więcej niż jeden klucz publiczny w katalogu <code>~/.ssh</code> warto podać jego nazwę (jak w ostatnim przykładzie) ponieważ <code>ssh-copy-id</code> kopiuje wszystkie jakie znajdzie.</p>

<p>Jeśli na kliencie polecenie <code>ssh-copy-id</code> jest niedostępne, można wykorzystać poniższego one-linera:</p>

<p> <code>cat ~/.ssh/id_rsa.pub | ssh itoutline@centos-03 “mkdir ~/.ssh; cat &gt;&gt; ~/.ssh/authorized_keys”</code></p>

<p>Jeśli zdecydujemy się na używanie &ldquo;passphrase&rdquo; z pomocą przyjdzie nam <code>ssh-agent</code>, umożliwia on zapamiętanie naszego klucza prywatnego poświadczonego &ldquo;passphrase&rdquo; do czasu np. restartu hosta.</p>

<p>Przykładowy kod dodany do <code>.bash_profile</code> lub <code>.bashrc</code> załatwiający obsługę <code>ssh-agent</code>.</p>

<figure class='code'><figcaption><span>Obsluga ssh-agent w .bash_profile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">SSH_ENV</span><span class="o">=</span><span class="nv">$HOME</span>/.ssh/environment
</span><span class='line'>
</span><span class='line'><span class="k">function</span> start_agent <span class="o">{</span>
</span><span class='line'>     <span class="nb">echo</span> <span class="s2">&quot;Initialising new SSH agent...&quot;</span>
</span><span class='line'>     /usr/bin/ssh-agent <span class="p">|</span> sed <span class="s1">&#39;s/^echo/#echo/&#39;</span> &gt; <span class="k">${</span><span class="nv">SSH_ENV</span><span class="k">}</span>
</span><span class='line'>     <span class="nb">echo </span>succeeded
</span><span class='line'>     chmod <span class="m">600</span> <span class="k">${</span><span class="nv">SSH_ENV</span><span class="k">}</span>
</span><span class='line'>     . <span class="k">${</span><span class="nv">SSH_ENV</span><span class="k">}</span> &gt; /dev/null
</span><span class='line'>     /usr/bin/ssh-add<span class="p">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Source SSH settings, if applicable</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -f <span class="s2">&quot;${SSH_ENV}&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>     . <span class="k">${</span><span class="nv">SSH_ENV</span><span class="k">}</span> &gt; /dev/null
</span><span class='line'>     <span class="c">#ps ${SSH_AGENT_PID} doesn&#39;t work under cywgin</span>
</span><span class='line'>     ps -ef <span class="p">|</span> grep <span class="k">${</span><span class="nv">SSH_AGENT_PID</span><span class="k">}</span> <span class="p">|</span> grep ssh-agent<span class="nv">$ </span>&gt; /dev/null <span class="o">||</span> <span class="o">{</span>
</span><span class='line'>         start_agent<span class="p">;</span>
</span><span class='line'>     <span class="o">}</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>     start_agent<span class="p">;</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>Teraz kiedy po raz pierwszy zalogujemy się na centos-01, zobaczymy coś takiego:</p>

<pre><code>[itoutline.sputnik: itoutline]$ ssh centos-01
Last login: Sun Mar 31 11:17:17 2013 from sputnik.local
Initialising new SSH agent...
succeeded
Enter passphrase for /home/itoutline/.ssh/id_rsa:
Identity added: /home/itoutline/.ssh/id_rsa (/home/itoutline/.ssh/id_rsa)
</code></pre>

<p>Wejście na centos-03 odbędzie się już bez podawania żadnych poświadczeń:</p>

<pre><code>[itoutline@centos-01 ~]$ ssh centos-03
Last login: Sun Mar 31 11:20:40 2013 from centos-01.local
[itoutline@centos-03 ~]$
</code></pre>

<h4>Modyfikacja &ldquo;passphrase&rdquo;</h4>

<p>Następujące polecenie umożliwia dodanie, usunięcie lub zmianę &ldquo;passphrase&rdquo; w przypadku istniejących kluczy:</p>

<p><code>ssh-keygen -p -f $HOME/.ssh/id_rsa</code></p>

<pre><code>[itoutline@centos-01 ~]$ ssh-keygen -p -f $HOME/.ssh/id_rsa
Enter old passphrase:
Key has comment '/home/itoutline/.ssh/id_rsa'
Enter new passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved with the new passphrase.
</code></pre>

<h4>Uruchamianie aplikacji graficznych przez SSH</h4>

<p>Na maszynach wirtualnych instaluję z reguły minimalną wersję systemu plus to co akurat chce sprawdzić. Rzadko kiedy pojawia się konieczność skorzystania z grafiki a jeśli już to wystarczy doinstalować tylko środowisko X. Dzięki czemu wirtualna maszyna jest &ldquo;lżejsza&rdquo;.</p>

<p>Nawiązanie sesji SSH ze wsparciem dla X-ów <code>ssh -X centos-03</code></p>

<p>Po stronie serwera w konfiguracji <code>/etc/ssh/sshd_config</code> musi znaleźć się linia <code>X11Forwarding yes</code></p>

<p>Uruchomienie linuxowego kalkulatora na pulpicie OSX (XQuartz musi być zainstalowany i uruchomiony):</p>

<pre><code>[itoutline.sputnik: itoutline]$ ssh -X centos-01
Last login: Sun Mar 31 15:08:49 2013 from sputnik.local
[itoutline@centos-01 ~]$ gcalctool &amp;
</code></pre>

<p><img src="http://itoutline.me/images/Calculator.png"></p>

<p>Jeśli pojawia się poniższy problem:</p>

<pre><code>(gcalctool:3141): Gtk-WARNING **: cannot open display:
</code></pre>

<p>Może oznaczać, że zmienna <code>DISPLAY</code> na kliencie nie jest ustawiona, można to naprawić dodając poniższą linię do <code>.bash_profile</code> lub <code>.bashrc</code></p>

<pre><code>export DISPLAY=:0
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Unblock-us i Openwrt]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2012/11/03/unblock-us-i-openwrt/"/>
    <updated>2012-11-03T22:52:45+00:00</updated>
    <id>http://itoutline.me/2012/11/03/unblock-us-i-openwrt</id>
    <content type="html"><![CDATA[<p>Unblock-us.com to serwis, który umożliwia dostęp do <a href="http://www.unblock-us.com/supported-services">usług</a> posiadających ograniczenia regionalne podczas gdy jesteśmy akurat za granicą. Jest o tyle lepszy od rozwiązań opartych na VPN, że nie musimy niczego instalować i prędkość naszego połączenia nie jest ograniczona jak to ma zazwyczaj miejsce w przypadku dostawców rozwiązań VPN.</p>

<p>W przypadku OpenWrt konfiguracja jest bardzo prosta (oczywiście to nie jedyny sposób, ale właśnie z tą metodą nigdy nie miałem problemów). Tworzymy nowy plik zawierający informację o serwerach DNS i umieszczamy w nim wpisy związane z Unblock-us.com np. <code>/etc/my_resolv.conf</code>:</p>

<pre><code># Interface lan
nameserver 184.106.242.193
nameserver 208.122.23.23
nameserver 208.122.23.22
# Interface wan
nameserver 184.106.242.193
nameserver 208.122.23.23
nameserver 208.122.23.22
</code></pre>

<p>Następnie modyfikujemy plik <code>/etc/config/dhcp</code>, komentujemy linię zawierającą dane oryginalnego pliku i dodajemy nasz:</p>

<pre><code>#option resolvfile '/tmp/resolv.conf.auto';
option resolvfile '/etc/my_resolv.conf';
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Archlinux na Raspberry Pi]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2012/10/14/archlinux-na-raspberry-pi/"/>
    <updated>2012-10-14T23:30:31+00:00</updated>
    <id>http://itoutline.me/2012/10/14/archlinux-na-raspberry-pi</id>
    <content type="html"><![CDATA[<p>W końcu do mnie dotarł Raspberry Pi. Instalacja Archlinuxa, co do którego nie jestem jeszcze przekonany z uwagi na to, że &ldquo;prawie wszystko jest inaczej&rdquo; wyglądała następująco.</p>

<p>Przygotowanie karty SD. Znalazłem jakąś kartę 4GB, image Archlinuxa na stronie <a href="http://www.raspberrypi.org/downloads">http://www.raspberrypi.org/downloads</a> ma 2GB w związku z czym trzeba się pobawić <code>parted</code>, którego na OSX nie ma. Nie wnikałem już czy da się przygotować kartę na OSX z wiadomych względów, czas naglił. Całość przygotowania karty przeprowadziłem na CentOS</p>

<p>Pobranie obrazu:</p>

<p><code>wget http://downloads.raspberrypi.org/images/archlinuxarm/archlinux-hf-2012-09-18/archlinux-hf-2012-09-18.zip</code></p>

<p>Wypakowanie:</p>

<p><code>unzip archlinux-hf-2012-09-18.zip</code></p>

<p>Sprawdzenie w jaki sposób karta pojawiła się w systemie. Po włożeniu karty do slotu SD należy wydać polecenie:</p>

<p><code>dmesg | tail -15</code></p>

<pre><code>usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
usb-storage: device found at 3
usb-storage: waiting for device to settle before scanning
usb-storage: device scan complete
scsi 8:0:0:0: Direct-Access     APPLE    SD Card Reader   2.00 PQ: 0 ANSI: 0
sd 8:0:0:0: Attached scsi generic sg2 type 0
sd 8:0:0:0: [sdb] 8040448 512-byte logical blocks: (4.11 GB/3.83 GiB)
sd 8:0:0:0: [sdb] Write Protect is off
sd 8:0:0:0: [sdb] Mode Sense: 0b 00 00 08
sd 8:0:0:0: [sdb] Assuming drive cache: write through
sd 8:0:0:0: [sdb] Assuming drive cache: write through
 sdb: sdb1
sd 8:0:0:0: [sdb] Assuming drive cache: write through
sd 8:0:0:0: [sdb] Attached SCSI removable disk
</code></pre>

<p>Ponieważ uruchamiam CentOSa w <code>init 3</code> automontowanie jak widać nie działa <code>df</code>:</p>

<pre><code>Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/mapper/vg_centos01-lv_root
                     100670904   2620032  97028396   3% /
tmpfs                   508396         0    508396   0% /dev/shm
/dev/sda1               495844     56404    413840  12% /boot
none                 4294967296         0 4294967296   0% /media/psf
</code></pre>

<p>I bardzo dobrze ;), można zapisywać obraz na kartę:</p>

<p><code>sudo dd bs=4M if=archlinux-hf-2012-09-18.img of=/dev/sdb</code></p>

<pre><code>471+1 records in
471+1 records out
1977614336 bytes (2.0 GB) copied, 120.311 s, 16.4 MB/s
</code></pre>

<p>Bardzo ważne jest, żeby podać właściwą nazwę dysku ponieważ powyższym poleceniem można uszkodzić system na którym karta jest przygotowywana. Jak widać u mnie karta zamontowała się jako sdb</p>

<p>Zmiana rozmiaru partycji root</p>

<p><code>sudo parted /dev/sdb</code></p>

<pre><code>GNU Parted 2.1
Using /dev/sdb
Welcome to GNU Parted! Type 'help' to view a list of commands.
(parted) unit chs
(parted) print
Model: APPLE SD Card Reader (scsi)
Disk /dev/sdb: 500,126,9
Sector size (logical/physical): 512B/512B
BIOS cylinder,head,sector geometry: 500,255,63.  Each cylinder is 8225kB.
Partition Table: msdos

Number  Start     End         Type     File system  Flags
 1      0,32,32   12,28,15    primary  fat16        boot, lba
 2      12,28,16  240,109,60  primary  ext4

(parted) rm 2
(parted) mkpart primary 12,28,16 500,126,8
</code></pre>

<p>Polecenie <code>unit chs</code> wyświetla informacje o zajętości przestrzeni na dysku w formacie &ldquo;cylinders, heads, sectors&rdquo;. Polecenie <code>print</code> wyświetla tablice partycji. <code>rm 2</code> usuwa drugą partycję, jest usuwana tylko informacja o partycji a nie dane jakie się na niej znajdują. Polecenie <code>mkpart primary 12,28,16 500,126,8</code> zakłada ponownie partycję zaczynającą się w tym samym miejscu ale kończącą na przedostatnim sektorze dysku (karty SD).</p>

<p>Sprawdzenie poprawności struktury systemu plików:</p>

<p><code>sudo e2fsck -f /dev/sdb2</code></p>

<pre><code>Pass 1: Checking inodes, blocks, and sizes
Pass 2: Checking directory structure
Pass 3: Checking directory connectivity
Pass 4: Checking reference counts
Pass 5: Checking group summary information
/dev/sdb2: 32513/114688 files (0.0% non-contiguous), 110601/458496 blocks
</code></pre>

<p>Rozszerzenie wielkości partycji do zadeklarowanej w tablicy partycji:</p>

<p><code>sudo resize2fs /dev/sdb2</code></p>

<pre><code>resize2fs 1.41.12 (17-May-2010)
Resizing the filesystem on /dev/sdb2 to 980735 (4k) blocks.
The filesystem on /dev/sdb2 is now 980735 blocks long.
</code></pre>

<p>To wszystko, można umieszczać kartę w Raspberry Pi</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Parallels Desktop tips]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2012/10/14/parallels-desktop-tips/"/>
    <updated>2012-10-14T16:27:20+00:00</updated>
    <id>http://itoutline.me/2012/10/14/parallels-desktop-tips</id>
    <content type="html"><![CDATA[<p>Kilka użytecznych poleceń usprawniających prace z Parallels Desktop</p>

<p>Wylistowanie wszystkich wirtualnych maszyn:</p>

<p><code>prlctl list -a</code></p>

<pre><code>UUID                                    STATUS       IP_ADDR         NAME
{8XXX3dd4-9f0b-406b-a5bc-XXXXXXXXXXXX}  stopped      -               CentOS-01
{8XXXa248-def7-4f3e-8405-XXXXXXXXXXXX}  stopped      -               CentOS-03
{eXXX4b67-f98b-4bc9-a9a8-XXXXXXXXXXXX}  stopped      -               Mac OS X
{5XXXe2ef-786b-4873-a5aa-XXXXXXXXXXXX}  suspended    -               Windows 8
{4XXX3137-7fb3-4ec9-a7fa-XXXXXXXXXXXX}  suspended    -               Windows XP
</code></pre>

<p>Wylistowanie parametrów konkretnej maszyny:</p>

<p><code>prlctl list -i CentOS-01</code></p>

<p>Uruchomienie wirtualnej maszyny:</p>

<p><code>prlctl start CentOS-01</code></p>

<p>Wyłączenie wirtualnej maszyny:</p>

<p><code>prlctl stop CentOS-01</code></p>

<p>Użycie przełącznika <code>--kill</code> wymusi zamknięcie maszyny, która nie odpowiada.</p>

<p>Restart:</p>

<p><code>prlctl reset CentOS-01</code></p>

<p>Przejście w stan uśpienia:</p>

<p><code>prlctl suspend CentOS-01</code></p>

<pre><code>Suspending the VM...
The VM has been successfully suspended.
</code></pre>

<p>Wyjście ze stanu uśpienia:</p>

<p><code>prlctl resume CentOS-01</code></p>

<p>Wykonanie szablonu wirtualnej maszyny:</p>

<p><code>prlctl clone CentOS-01 --name CentOS --template</code></p>

<pre><code>Clone the CentOS-01 VM to VM template CentOS...
Operation progress 88%
The VM has been successfully cloned.
</code></pre>

<p>Utworzenie nowej wirtualnej maszyny z wcześniej przygotowanego szablonu:</p>

<p><code>prlctl create CentOS-05 --ostemplate CentOS</code></p>

<pre><code>Creating the VM on the basis of the CentOS template...
Clone the CentOS VM to VM CentOS-05...
Operation progress 88%
The VM has been successfully cloned.
</code></pre>

<p>Klonowanie, czyli stworzenie kopii istniejącej maszyny:</p>

<p><code>prlctl clone CentOS-10 --name CentOS-10-clon</code></p>

<pre><code>Clone the CentOS-10 VM to VM CentOS-10-clon...
Operation progress 88%
The VM has been successfully cloned.
</code></pre>

<p>Jak już wspominałem, wykorzystując <code>prlctl start VM_NAME</code> maszyna uruchomi się w tle bez GUI Parallels. Czasami jednak chcemy coś do niej podłączyć, można to zrobić również z konsoli. Wylistowanie dostępnych urządzeń USB:</p>

<p><code>prlsrvctl usb list</code></p>

<pre><code>Apple FaceTime HD Camera (Built-in)      '1a110000|05ac|8510|high|--|XXXXXX8M1XXXC8C0'
Apple Internal Memory Card Reader        '1d183000|05ac|8404|high|--|0000000XXXXX'
Apple Internal Keyboard / Trackpad       '1d182000|05ac|024c|full|KM|Empty'
Apple Bluetooth USB Host Controller      '1d181300|05ac|821f|full|--|Empty'
Patriot Memory                           '1a120000|13fe|3100|high|--|07XX6XXXXX'
StoreJet Transcend                       '14a10000|174c|5106|super|--|S2SXXXXXX209'
Flash Disk                               '1a120000|090c|1000|high|--|FBXXXXXXXX000141'
Logitech Illuminated Keyboard            '14200000|046d|c318|full|KM|Empty'
JTAGICE mkII                             '14200000|03eb|2103|full|PR|00B000XXXXXXX'
FT232R USB UART                          '14100000|0403|6001|full|PR|AXXXXX'
USB Flash Memory                         '1d110000|0930|6544|high|--|001422XXXXXXXXXX'
Apple - Composite                        '1d181100|05ac|820a|full|--|Empty'
</code></pre>

<p>Podłączenie czytnika kart SD do wirtualnej maszyny:</p>

<p><code>prlctl set CentOS-01 --device-connect "Apple Internal Memory Card Reader"</code></p>

<p>Odłączenie:</p>

<p><code>prlctl set CentOS-01 --device-disconnect "Apple Internal Memory Card Reader"</code></p>

<p>Podłączenie/odłączenie adaptera sieciowego:</p>

<p><code>prlctl set "CentOS-01" --device-connect "Apple USB Ethernet Adapter"</code>
<code>prlctl set "CentOS-01" --device-disconnect "Apple USB Ethernet Adapter"</code></p>

<p>Jeśli nasza maszyna korzysta z DHCP i interfejs sieciowy ma skonfigurowany w trybie bridge to niekoniecznie musimy wiedzieć jaki dostała adres kiedy korzystamy z &ldquo;obcej&rdquo; sieci. Oczywiście można uruchomić Parallels Desktop, dostać się do konsoli i podejrzeć. Można też wykonać polecenie na wirtualnej maszynie bez uruchamiania GUI.</p>

<p><code>prlctl exec "CentOS-01" ifconfig</code></p>

<p>W ten sposób możemy wykonywać dowolne polecenia. Innym ciekawym sposobem jest po prostu bezpośredni dostęp do konsoli:</p>

<p><code>prlctl enter Windows\ XP</code></p>

<pre><code>Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\&gt;dir
dir
 Volume in drive C has no label.
 Volume Serial Number is 08BC-EDC8

 Directory of C:\

10/05/2012  02:43 PM                 0 AUTOEXEC.BAT
10/05/2012  02:43 PM                 0 CONFIG.SYS
10/05/2012  01:43 PM    &lt;DIR&gt;          Documents and Settings
10/05/2012  02:45 PM    &lt;DIR&gt;          Program Files
10/05/2012  02:49 PM    &lt;DIR&gt;          WINDOWS
               2 File(s)              0 bytes
               3 Dir(s)  103,939,588,096 bytes free

C:\&gt;
</code></pre>

<p><code>prlctl enter CentOS-01</code></p>

<pre><code>-bash-4.1# uname -a
Linux centos-01.local 2.6.32-279.5.2.el6.x86_64 #1 SMP Fri Aug 24 01:07:11 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux
-bash-4.1#
</code></pre>

<p>Wykonania zrzutu ekranu z wirtualnej maszyny:</p>

<p><code>prlctl capture CentOS-01 --file login_screen.png</code></p>

<p>Konwersja dysku wirtualnego do typu &ldquo;plain&rdquo; (zostanie wykorzystana cała przestrzeń na dysku fizycznym zadeklarowana na dysk wirtualny) z podziałem na 2GB części. Przyznam, że raczej to mało pożyteczne polecenie, może tylko ma sens kiedy nie chcemy się zaskoczyć nagłym brakiem miejsca na dysku fizycznym w związku z rozrostem dysków wirtualnych. Możliwe, że ma też wpływ na wydajność maszyn wirtualnych&hellip; być może na produkcyjnych maszynach warto ustawiać ten tryb</p>

<p><code>prl_disk_tool convert --plain --split --hdd /Users/norbert/Documents/Parallels/CentOS-01.pvm/CentOS-01-0.hdd</code></p>

<p>Np. tak wyglądał katalog dysku przed powyższą operacją, dysk był ustawiony na 100GB w trybie &ldquo;expandable&rdquo;, bez podziału na 2GB części</p>

<pre><code>[norbert.macair: CentOS-01-0.hdd]$ ll
total 3.8G
-rw------- 1 norbert staff    0 Sep 21 01:21 CentOS-01-0.hdd
-rw------- 1 norbert staff 2.8G Sep 21 02:01 CentOS-01-0.hdd.0.{39a46e95-08c5-414c-bc03-6581f77b6dda}.hds
-rw------- 1 norbert staff 988M Oct 14 14:11 CentOS-01-0.hdd.0.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw------- 1 norbert staff  14K Oct 14 13:09 CentOS-01-0.hdd.drh
-rw------- 1 norbert staff 1.9K Sep 21 02:01 DiskDescriptor.xml
-rw------- 1 norbert staff 1.5K Sep 21 01:47 DiskDescriptor.xml.Backup
</code></pre>

<p>Po zabiegu, zajmujemy niepotrzebnie ponad 95GB</p>

<pre><code>[norbert.macair: CentOS-01-0.hdd]$ ll
total 101G
-rw-r--r-- 1 norbert staff    0 Oct 14 14:29 CentOS-01-0.hdd
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:25 CentOS-01-0.hdd.copy.0.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:25 CentOS-01-0.hdd.copy.1.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.10.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.11.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.12.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.13.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.14.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.15.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.16.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.17.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.18.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.19.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:25 CentOS-01-0.hdd.copy.2.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.20.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.21.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.22.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.23.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.24.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.25.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.26.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.27.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.28.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.29.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.3.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.30.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.31.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.32.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.33.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.34.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.35.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.36.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.37.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.38.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.39.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.4.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.40.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.41.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.42.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.43.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.44.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.45.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.46.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.47.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.48.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.49.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.5.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.50.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.51.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 1.1G Oct 14 14:29 CentOS-01-0.hdd.copy.52.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.6.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.7.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.8.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.9.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-rw-rw- 1 norbert staff    0 Oct 14 14:20 CentOS-01-0.hdd.copy.hdd
-rw-r--r-- 1 norbert staff  21K Oct 14 14:25 DiskDescriptor.xml
-rw-r--r-- 1 norbert staff  21K Oct 14 14:25 DiskDescriptor.xml.Backup
</code></pre>

<p>Powrót do dysku w trybie &ldquo;expandable&rdquo;:</p>

<p><code>prl_disk_tool convert --expanding --split --hdd /Users/norbert/Documents/Parallels/CentOS-01.pvm/CentOS-01-0.hdd</code></p>

<p>Mała uwaga, u mnie zabawa w konwersje zakończyła się komunikatem:</p>

<p><code>Not enough free space on the physical disk to complete the operation.</code></p>

<p>Dlatego warto się upewnić, że kiedy dysk nam &ldquo;spuchnie&rdquo; to będziemy mieć drugie tyle miejsca na jego odchudzanie albo pod ręką jakiś w miarę szybki dysk na którym będzie można tą operację wykonać</p>

<p>Rozszerzenie wirtualnego dysku:</p>

<p><code>prl_disk_tool resize --size 105G --split --hdd /Users/norbert/Documents/Parallels/CentOS-01.pvm/CentOS-01-0.hdd</code></p>

<p>Powyższe polecenie nie zawsze zwiększy od razu przestrzeń dostępną w wirtualnej maszynie, w zależności od systemu jaki na niej jest może być konieczne użycie narzędzi dyskowych systemu gościa. Dlatego najlepiej od razu definiować całkiem duży dysk w trybie &ldquo;expandable&rdquo; z podziałem dysku wirtualnego na 2GB części.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CentOS na Parallels]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2012/09/16/centos-na-parallels/"/>
    <updated>2012-09-16T18:49:30+00:00</updated>
    <id>http://itoutline.me/2012/09/16/centos-na-parallels</id>
    <content type="html"><![CDATA[<p>Wirtualizacja to jedna z technologii, jakie zdecydowanie podniosły komfort pracy wielu osobom. Pomijam oszczędności wynikające z lepszej utylizacji sprzętu, ale kiedy przypomnę sobie jak kiedyś przygotowywałem się do egzaminów MS ze stertą blaszaków stojących jeden na drugim, to do tej pory przechodzą mnie dreszcze. Olbrzymia strata czasu. Teraz mając 16GB pamięci można sobie postawić całkiem rozbudowane środowisko, testować, robić snapshoty i co tam dusza zapragnie.</p>

<p>Właśnie skończyłem instalować CentOS-a na Parallels. Poniżej kilka kroków, jakie zazwyczaj wykonuje po tej opercji.</p>

<p>Dodanie uzytkownika do <code>sudoers</code>. Przechodzimy na root-a <code>su -</code> i uruchamiamy edytor <code>visudo</code> następnie dopisujemy swojego użytkownika, poniżej root-a np.</p>

<pre><code>## Allow root to run any commands anywhere
root    ALL=(ALL)       ALL
norbert ALL=(ALL)       ALL
</code></pre>

<p>Instalacja Paralles Tools. Jeśli jest zamontowana płyta instalacyjna CentOS należy ją odmontować, a następnie z menu wybieramy &ldquo;Virtual Machine&rdquo; i &ldquo;Install Paralles Tools&hellip;&rdquo;, potem</p>

<pre><code>cd /media/Parallels\ Tools/
sudo ./install
</code></pre>

<p>Później wybieramy tylko kilka razy &ldquo;Next&rdquo; i restartujemy maszynę.</p>

<p><img src="http://itoutline.me/images/centos_parallels_01.png"></p>

<p>Ustawienie nazwy hosta, <code>vi /etc/sysconfig/network</code></p>

<pre><code>NETWORKING=yes
NETWORKING_IPV6=no
HOSTNAME=centos-02.local
</code></pre>

<p>Ustawienie automatycznego uruchamiania ssh i jego uruchomienie</p>

<pre><code>sudo chkconfig sshd on
sudo service sshd start
</code></pre>

<p>Włączenie automatycznego logowania, <code>vi /etc/gdm/custom.conf</code></p>

<pre><code>[daemon]
AutomaticLoginEnable=true
AutomaticLogin=norbert
</code></pre>

<p>Wyłączenie wygaszacza ekranu, dzięki któremu maszyna nie będzie automatycznie blokowana.</p>

<p><code>sudo gconftool-2 --direct --config-source xml:readwrite:/etc/gconf/gconf.xml.mandatory --type bool --set /apps/gnome-screensaver/idle_activation_enabled false</code></p>

<p>Uruchamianie maszyny w trybie tekstowym, zazwyczaj nie potrzebuje interfejsu graficznego. Edycja <code>vi /etc/inittab</code>, zmiana wartości <code>id</code> na 3</p>

<pre><code># Default runlevel. The runlevels used are:
#   0 - halt (Do NOT set initdefault to this)
#   1 - Single user mode
#   2 - Multiuser, without NFS (The same as 3, if you do not have networking)
#   3 - Full multiuser mode
#   4 - unused
#   5 - X11
#   6 - reboot (Do NOT set initdefault to this)
#
id:3:initdefault:
</code></pre>

<p>Parallels ma bardzo pożyteczne polecenie <code>prlctl</code>. Wylistowanie wszystkich zainstalowanych maszyn wirtualnych <code>prlctl list -a</code></p>

<p><img src="http://itoutline.me/images/centos_parallels_02.png"></p>

<p>Uruchomienie maszyny to <code>prlctl start CentOS-01</code></p>

<p><img src="http://itoutline.me/images/centos_parallels_03.png"></p>

<p>To co jest najlepsze w powyższym poleceniu to to, że wirtualna maszyna uruchamiana jest w tle i nie pojawia się okno aplikacji Parallels. Do maszyny można się dostać np. przez ssh, jak dla mnie to rewelacja.</p>

<p>Bardzo mile zaskakuje całkiem niskie obciążenie systemu. Przy uruchomionych czterech maszynach wirtualnych 2xCentOS w trybie graficznym z dysku USB 3.0 (pomarańczowa strzałka), 1xCentOS w trybie tekstowym (zielona), 1xOSX Mountain Lion (niebieska) zajętość procesora sięga tylko ok. 10%. Na systemach nic się nie dzieje, jest tylko zalogowany użytkownik ale i tak wydaje mi się, że to całkiem nieźle. Tym bardziej, że to MBA. Jak widać jeśli nie potrzebujemy grafiki to warto uruchamiać wirtualne OS-y w trybie tekstowym na co wskazuje zielona strzałka.</p>

<p><img src="http://itoutline.me/images/centos_parallels_04.png"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Home & End]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2012/09/09/home-end/"/>
    <updated>2012-09-09T15:08:40+00:00</updated>
    <id>http://itoutline.me/2012/09/09/home-end</id>
    <content type="html"><![CDATA[<p>Klawisze Home i End w OSX przemieszczają kursor na początek albo koniec strony, inaczej niż w windows, gdzie przechodzimy na początek albo koniec linii. Ostatnio podłączyłem klawiaturę z takimi klawiszami i okazało się, że moje palce mają świadomość okien, ponieważ co chwilę niepotrzebnie w nie stukały. Ja sam wiedziałem, że to bezcelowe i wyrzuci mnie do niechcianego miejsca w dokumencie. Na szczęście udało mi się zsynchronizować. Wystarczy dopisać do <code>~/Library/KeyBindings/DefaultKeyBinding.dict</code> poniższe linie:</p>

<pre><code>{
"UF729"  = "moveToBeginningOfLine:";
"UF72B"  = "moveToEndOfLine:";
"$UF729" = "moveToBeginningOfLineAndModifySelection:";
"$UF72B" = "moveToEndOfLineAndModifySelection:";
}
</code></pre>

<p>Po instalacji ML, katalog <code>KeyBindings</code> nie jest obecny. Trzeba go założyć i stworzyć plik <code>DefaultKeyBinding.dict</code></p>

<p>Sprawę można załatwić tym one-linerem o ile oczywiście nie mamy już jakichś własnych ustawień w <code>DefaultKeyBinding.dict</code> ponieważ zostaną one <strong>nadpisane</strong>.</p>

<pre><code>mkdir ~/Library/KeyBindings/; echo -e "{\n\"UF729\" = \"moveToBeginningOfLine:\";\n\"UF72B\" = \"moveToEndOfLine:\";\n\"\$UF729\" = \"moveToBeginningOfLineAndModifySelection:\";\n\"\$UF72B\" = \"moveToEndOfLineAndModifySelection:\";\n}" &gt; ~/Library/KeyBindings/DefaultKeyBinding.dict
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Make life easier]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2012/09/09/make-life-easier/"/>
    <updated>2012-09-09T13:02:15+00:00</updated>
    <id>http://itoutline.me/2012/09/09/make-life-easier</id>
    <content type="html"><![CDATA[<p>Czasami łatwość z jaką można sobie podnieść komfort pracy jest zaskakująca. Zawsze przy testowaniu jakichś skryptów, najpierw tworzyłem katalog, przechodziłem do niego, potem otwierałem vi, potem zmieniałem uprawnienia i uruchamiałem skrypt. Za pomocą funkcji btouch dodanej do <code>.bash_profile</code> cztery czynności złożą się w jedną po wpisaniu takiej linii:</p>

<p><code>btouch ~/SampleDir/DirBelow/SampleScript.sh</code></p>

<p>Oczywiście można to zrobić też tak:</p>

<p><code>mkdir -p ~/SampleDir/DirBelow/ &amp;&amp; cd ~/SampleDir/DirBelow/ &amp;&amp; touch SampleScript.sh &amp;&amp; chmod u+x SampleScript.sh &amp;&amp; vi SampleScript.sh</code></p>

<p>Ale jak widać pisania jest znacznie więcej. Funkcja <code>btouch</code>:</p>

<pre><code>btouch()

{

FULLPATH=$1
FILENAME=${FULLPATH##*/}
FILEEXTENSION=${FILENAME##*.}
BASEDIRECTORY=${FULLPATH%$FILENAME}

[ ! -d $BASEDIRECTORY ] &amp;&amp; mkdir -p $BASEDIRECTORY
[ ! -f $FILENAME ] &amp;&amp; touch $BASEDIRECTORY/$FILENAME
if [ $FILEEXTENSION = "sh" ] || [ $FILEEXTENSION = "py" ] || [ $FILEEXTENSION = "pl" ]; then
   chmod u+x $BASEDIRECTORY/$FILENAME
fi
cd $BASEDIRECTORY
sub . $FILENAME

}
</code></pre>

<p>W ostatniej linii <code>sub . $FILENAME</code>, nie uruchamiam już vi, powoli przesiadam się na <a href="http://www.sublimetext.com">Sublime Text</a>, który ma ogromne możliwości personalizacji.</p>

<p>Żeby polecenie btouch działało poprawnie trzeba jeszcze dodać poniższy alias do <code>.bash_profile</code>:</p>

<p><code>alias sub="/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl"</code></p>

<p>Dzięki czemu Sublime Text będzie mógł być uruchamiany za pomocą polecenia <code>sub</code> np.</p>

<p><code>sub .</code> - otwiera program w trybie przeglądania obecnego folderu</p>

<p><img src="http://itoutline.me/images/btouch_01.png"></p>

<p><code>sub . SampleScript.sh</code> - tak samo jak powyżej, dodatkowo otwiera plik do edycji</p>

<p><img src="http://itoutline.me/images/btouch_02.png"></p>

<p>Po dodaniu funkcji i aliasu do <code>.bash_profile</code> należy go ponownie zaczytać np.</p>

<p><code>cd ~;. .bash_profile</code></p>

<p>albo uruchomić nowe okno terminala.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[No power, no bluetooth]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2012/09/09/no-power-no-bluetooth/"/>
    <updated>2012-09-09T02:14:33+00:00</updated>
    <id>http://itoutline.me/2012/09/09/no-power-no-bluetooth</id>
    <content type="html"><![CDATA[<p><img class="left" src="http://itoutline.me/images/bluetooth_symbol_128.png"></p>

<p>W sumie nigdy nie podłączałem Air-a do większego ekranu tak, żeby na nim pracować. Aż sam się dziwie, spokojnie wystarczało mi 13&#8221;. W końcu wpadłem na pomysł korzystania z niego jak ze stacjonarnego kompa. Zakupiłem cały zestaw klawiatura, mysz, gładzik i pracuje się naprawdę świetnie na 24&#8221; (oczywiście teraz chodzi mi po głowie Cinema Display). Nigdy nie miałem zaufania do bluetooth i obsługi przez niego urządzeń wskazujących, okazuje się, że nie ma z tym problemu. Oczywiście trochę męczy konieczność podłączenia dwóch kabelków ale te minusy nie przesłaniają plusów.</p>

<p>Tak naprawdę bluetooth jest mi potrzebny tylko kiedy jestem przy biurku, kiedy od niego odchodzę jest zbędny i tylko niepotrzebnie zużywa baterię. Można go wyłączać ręcznie ale udało mi się znaleźć lepszy sposób. Byłaby to chyba całkiem fajna opcja w systemie. Chodzi o wyłączenie bluetooth w momencie odłączenia kabla zasilacza. Naturalnie musi być możliwość włączenia ręcznego również na baterii. Okazuje się, że tym prostym skryptem coś takiego można załatwić:</p>

<figure class='code'><figcaption><span>bluetooth_mon.sh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="nv">PREVIOUS_SOURCE</span><span class="o">=</span><span class="k">$(</span>pmset -g ps <span class="p">|</span> perl -ne <span class="s2">&quot;/(w+) Power/ &amp;&amp; print $1&quot;</span><span class="k">)</span><span class="p">;</span>
</span><span class='line'><span class="k">while</span> <span class="o">[</span> <span class="m">1</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>
</span><span class='line'>  <span class="nv">CURRENT_SOURCE</span><span class="o">=</span><span class="k">$(</span>pmset -g ps <span class="p">|</span> perl -ne <span class="s2">&quot;/(w+) Power/ &amp;&amp; print $1&quot;</span><span class="k">)</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="o">[</span> <span class="nv">$CURRENT_SOURCE</span> !<span class="o">=</span> <span class="nv">$PREVIOUS_SOURCE</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>    <span class="nv">PREVIOUS_SOURCE</span><span class="o">=</span><span class="nv">$CURRENT_SOURCE</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> <span class="nv">$CURRENT_SOURCE</span> <span class="o">=</span> <span class="s2">&quot;AC&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>      /usr/local/bin/blueutil power 1
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      /usr/local/bin/blueutil power 0
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'>  <span class="k">fi</span>
</span><span class='line'>sleep 5
</span></code></pre></td></tr></table></div></figure>


<p>Potrzebny jest tylko blueutil, który można zainstalować z repozytoriów Homebrew. Pozwala na podejrzenie i zmianę stanu bluetooth, włączone/wyłączone/tryb wykrywania. Działa bardzo sprawnie.</p>

<p><code>brew install blueutil</code></p>

<p>Dodatkowo dobrze by było gdyby skrypt działał cały czas w tle od uruchomienia komputera. Znalazłem bardzo fajny skrót na coś takiego bez zabawy z launchd. Wystarczy do crontab-a dodać taką linię:</p>

<p><code>@reboot /Users/norbert/Scripts/blue_pow_sav.sh</code></p>

<p>Jak widać skrypt nazywa się blue_pow_sav.sh i jest umieszczony w katalogu <code>/Users/norbert/Scripts/</code></p>

<p>Edycja crontab-a to <code>crontab -e</code>, wylistowanie zadań <code>crontab -l</code>. Usunięcie crontab-a użytkownika <code>crontab -r</code>. Mam wrażenie, że trochę za blisko jest klawisz edycji od tego który powoduje usunięcie crontab-a bez pytania.</p>

<p>Dodanie jakiegoś zadania z poziomu shell-a, dotychczasowe jeśli były są zachowywane:</p>

<p><code>crontab -l | { cat; echo "@reboot /Users/norbert/Scripts/blue_pow_sav.sh"; } | crontab -</code></p>

<p>Można też inaczej, zapisanie obecnych zadań do tmp_cron:</p>

<p><code>crontab -l &gt; tmp_cron</code></p>

<p>Dodanie nowego:</p>

<p><code>echo "@reboot /Users/norbert/Scripts/blue_pow_sav.sh" &gt;&gt; tmp_cron</code></p>

<p>Instalacja:</p>

<p><code>crontab tmp_cron</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Qemu]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2012/09/07/qemu/"/>
    <updated>2012-09-07T11:51:37+00:00</updated>
    <id>http://itoutline.me/2012/09/07/qemu</id>
    <content type="html"><![CDATA[<p>Dzięki quemu możemy uruchamiać na x86 obrazy systemów które do tej architektury nie należą. Można szybko coś sprawdzić bez konieczności instalacji systemu na docelowym urządzeniu. Minusem qemu jest to, że nie jest zbyt wydajne w swojej natywnej postaci ale do niezbyt &ldquo;grubych&rdquo; dystrybucji sprawdza się doskonale.</p>

<h3>Instalacja qemu</h3>

<p>Tylko z tą wersją gcc udało się uniknąć &ldquo;białego ekranu&rdquo; po uruchomieniu qemu:</p>

<p><code>brew install https://raw.github.com/Homebrew/homebrew-dupes/master/apple-gcc42.rb</code></p>

<p>Instalacja pakietow potrzebnych do poprawnej pracy qemu:</p>

<p><code>brew install jpeg gnutls glib</code></p>

<p>Chwilowa podmiana wersji gcc zainstalowanej przez Xcode 4.4.1 na tą zainstalowaną przez brew:</p>

<p><code>sudo mv /usr/bin/gcc /usr/bin/gcc_orig</code>
<code>sudo ln -s /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 /usr/bin/gcc</code></p>

<p>Instalacja qemu:</p>

<p><code>brew install qemu --use-gcc</code></p>

<p><img src="http://itoutline.me/images/qemu_03.png"></p>

<p>Powrót do oryginalnej konfiguracji systemu:</p>

<p><code>sudo mv /usr/bin/gcc_orig /usr/bin/gcc</code></p>

<p>Jeśli <code>gcc -v</code> wyświetla w ostatniej linii taką wersję:</p>

<p><code>gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)</code></p>

<p>Tzn. że gcc instalowany przez Xcode 4.4.1 został przywrócony.</p>

<h3>Centos</h3>

<p>Zaczynamy od przygotowanie dysku który będzie wykorzystywany przez system:</p>

<p><code>qemu-img create -f qcow2 centos_hdd.img 10G</code></p>

<p>Na szczęście nie jest tworzony od razu plik 10GB, miejsce jest sukcesywnie dobierane w miarę potrzeb.</p>

<p>Uruchomienie:</p>

<p><code>qemu-system-x86_64 -m 1G -localtime centos_hdd.img -cdrom CentOS-6.2-x86_64-LiveDVD.iso</code></p>

<p><img src="http://itoutline.me/images/qemu_01.png"></p>

<h3>Openwrt</h3>

<p>Pobieramy Openwrt:</p>

<p><code>curl -O http://downloads.openwrt.org/backfire/10.03/x86/openwrt-x86-ext2.image.gz</code></p>

<p>Otwieramy archiwum:</p>

<p><code>gunzip openwrt-x86-ext2.image.gz</code></p>

<p>Uruchomienie:</p>

<p><code>qemu-system-x86_64 -hda openwrt-x86-ext2.image</code></p>

<p><img src="http://itoutline.me/images/qemu_05.png"></p>

<h3>Debian Squeeze</h3>

<p>Tym razem wersja przeznaczona pod architekture ARM.</p>

<p>Pobieramy pliki:</p>

<p><code>curl -O http://people.debian.org/~aurel32/qemu/armel/vmlinuz-2.6.32-5-versatile</code>
<code>curl -O http://people.debian.org/~aurel32/qemu/armel/initrd.img-2.6.32-5-versatile</code>
<code>curl -O http://people.debian.org/~aurel32/qemu/armel/debian_squeeze_armel_standard.qcow2</code></p>

<p>Uruchomienie:</p>

<p><code>qemu-system-arm -M versatilepb -kernel vmlinuz-2.6.32-5-versatile -initrd initrd.img-2.6.32-5-versatile -hda debian_squeeze_armel_standard.qcow2 -append "root=/dev/sda1"</code></p>

<p><img src="http://itoutline.me/images/qemu_02.png"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[OneNote na OSX - RemoteApp]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2012/08/23/onenote-na-osx-remoteapp/"/>
    <updated>2012-08-23T14:52:23+00:00</updated>
    <id>http://itoutline.me/2012/08/23/onenote-na-osx-remoteapp</id>
    <content type="html"><![CDATA[<p>Rozszerzenie funkcjonalności RDP o RemoteApp jest bardzo fajnym pomysłem. Nie potrzebuje całego pulpitu Windowsa a tylko dostępu do maksymalnie kilku aplikacji, których nie ma na osx. Jedną z takich aplikacji MS jest OneNote, powoli tracę nadzieję, że kiedykolwiek się pojawi wersja osx. Testowałem różne rozwiązania EverNote, Springpad, Google Notebook (już zamknięty) i jednak OneNote najbardziej mi odpowiada. W sumie gdyby MS aktualizował swojego klienta RDP to już niczego więcej od tej firmy bym nie oczekiwał jeśli chodzi o osx. Mam dostęp do serwera MS, który działa sobie 24h na nim zainstalował bym to czego mi brakuje i voilà.</p>

<p>Póki co trzeba sobie radzić inaczej. Dzięki <a href="http://www.freerdp.com">freerdp</a> można już korzystać z RemoteApp na osx. Oczywiście nie jest tak kolorowo jakbym chciał ponieważ freerdp korzysta z X11 i &ldquo;wszystkich jego dobrodziejstw&rdquo; ale widoki są.</p>

<h3>Instalacja freerdp</h3>

<p><code>brew install freerdp</code></p>

<p>Wydaje mi się, że jest mały bug w tej recepturze ponieważ o ile freerdp się instaluje to nie działało mapowanie dysków:</p>

<p><img src="http://itoutline.me/images/freerdp01.png"></p>

<p><code>freerdp_load_library_symbol: failed to open /usr/local/Cellar/freerdp/1.0.1/lib/freerdp/rdpdr: dlopen(/usr/local/Cellar/freerdp/1.0.1/lib/freerdp/rdpdr, 5): image not found</code></p>

<p>Problem rozwiązałem tworząc linki symboliczne w katalogu <code>/usr/local/Cellar/freerdp/1.0.1/lib/freerdp/</code>.</p>

<p><code>cd /usr/local/Cellar/freerdp/1.0.1/lib/freerdp/  
for i in *; do ln -s $i "${i%.*}"; done</code></p>

<p><img src="http://itoutline.me/images/freerdp02.png"></p>

<p>Po tej operacji nie było już kłopotu z tym poleceniem:</p>

<p><code>xfreerdp -u norbert -g 1440x800 --plugin cliprdr --plugin rdpdr --data disk:HDD:$HOME -- 192.168.1.1:9800</code></p>

<p>Kilka słów wyjaśnienia odnośnie tych niekoniecznie oczywistych parametrów xfreerdp:</p>

<p><code>--plugin cliprdr</code> - powoduje, że działa funkcjonalność schowka<br/>
<code>--plugin rdpdr --data disk:HDD:$HOME</code> - odpowiada za przekierowanie lokalnego dysku, HDD to nazwa dysku/partycji który chcemy przekierowywać (u mnie np. partycja z osx nazywa się HDD), $HOME to katalog który chcemy przekierować, jeśli cały filesystem to można użyć /`</p>

<p>Na razie to tylko uruchomienie zwykłego klienta rdp który wyświetli cały pulpit zdalnej maszyny. Działa całkiem przyzwoicie, CoRD np. ostatnio ma problem z gubieniem wskaźnika myszy po wprowadzeniu tekstu co jest nieco uciążliwe.</p>

<h3>RemoteAPP</h3>

<p>Funkcjonalność ta zadziała na XP, Vista, 7 Ultimate i Enterprise, 2008. Windows 2008 ma natywne narzędzia do wystawiania aplikacji w trybie RemoteApp. W przypadku pozostałych systemów można skorzystać z prostego narzędzia do modyfikacji rejestru</p>

<p><a href="https://sites.google.com/site/kimknight/remoteapptool">https://sites.google.com/site/kimknight/remoteapptool</a></p>

<p><img src="http://itoutline.me/images/freerdp03.png"></p>

<p>albo zaimportować poniższy plik onenote.reg, który jest poprawny dla standardowej instalacji OneNote 2010:</p>

<pre><code>Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINESOFTWAREMicrosoftWindows NTCurrentVersionTerminal ServerTSAppAllowList]
"fDisabledAllowList"=dword:00000001

[HKEY_LOCAL_MACHINESOFTWAREMicrosoftWindows NTCurrentVersionTerminal ServerTSAppAllowListApplicationsONENOTE]
"CommandLineSetting"=dword:00000000
"RequiredCommandLine"=""
"IconIndex"=dword:00000000
"IconPath"="%SYSTEMDRIVE%\Program Files (x86)\Microsoft Office\Office14\ONENOTE.EXE"
"Path"="C:\Program Files (x86)\Microsoft Office\Office14\ONENOTE.EXE"
"ShortPath"="C:\PROGRA~2\MICROS~1\Office14\ONENOTE.EXE"
"VPath"="%SYSTEMDRIVE%\Program Files (x86)\Microsoft Office\Office14\ONENOTE.EXE"
"ShowInTSWA"=dword:00000001
"Name"="Microsoft OneNote 2010"
"SecurityDescriptor"=""
</code></pre>

<p>Podłączenie do OneNote w trybie RemoteApp wygląda tak:</p>

<p><code>xfreerdp -u norbert -g 800x800  --app --plugin rail --data "||onenote" -- 192.168.1.1:9800</code></p>

<p><img src="http://itoutline.me/images/freerdp04.png"></p>

<p>Idealnie nie jest, nie działa schowek (mam nadzieje, że na razie, w trybie pulpitu nie ma z nim problemu) czyli coś podstawowego przy robieniu notatek. Zwinięcie okna spowoduje, że rozwinie się już tylko białe okienko bez śladu OneNote. Mam jednak nadzieje, że freerdp będzie rozwijane bo widać potencjał w RDP.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Cowsay fortune]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2012/08/21/cowsay-fortune/"/>
    <updated>2012-08-21T18:54:38+00:00</updated>
    <id>http://itoutline.me/2012/08/21/cowsay-fortune</id>
    <content type="html"><![CDATA[<p>Skoro mamy Homebrew i coreutils można pokusić się o instalację tak kluczowych elementów systemu jak cowsay i fortune. Wydajemy polecenie:</p>

<p><code>brew install cowsay fortune</code></p>

<p><img src="http://itoutline.me/images/cowsay_01.png"></p>

<p>Następnie dodajemy do <code>.bash_profile</code> linijkę:</p>

<p><code>cowsay -f "$(ls /usr/local/Cellar/cowsay/3.03/share/cows | gsort -R | head -1)" "$(fortune -s)"</code></p>

<p>Dzięki czemu przy każdym uruchomieniu terminala zostaniemy mile powitani albo dowiemy się czegoś ciekawego.</p>

<p><img src="http://itoutline.me/images/cowsay_02.png">
<img src="http://itoutline.me/images/cowsay_03.png">
<img src="http://itoutline.me/images/cowsay_04.png"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Homebrew]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2012/08/21/homebrew/"/>
    <updated>2012-08-21T18:01:35+00:00</updated>
    <id>http://itoutline.me/2012/08/21/homebrew</id>
    <content type="html"><![CDATA[<p>Homebrew ułatwia instalacje open source&#8217;owych narzędzi, aplikacji itd. Znam trzy tego typu rozwiązania <a href="http://www.macports.org">MacPorts</a>, <a href="http://www.finkproject.org">Fink</a> i <a href="http://mxcl.github.com/homebrew/">Homebrew</a>. Jakoś najbardziej polubiłem Homebrew :)</p>

<p>Ponieważ prawie wszystkie paczki są dostępne jako kod źródłowy, Homebrew wymaga zainstalowania Xcode, Xcode Command Line Tools. Ewentualnie X11 i Javy (jeśli wiemy, że któryś z pakietów będzie tego potrzebował).</p>

<p>Xcode instaluje się z App Store, następnie w preferencjach, zakładka Downloads pobieramy Xcode Command Line Tools. Od wersji 10.8 X11 nie jest już częścią systemu i trzeba je pobrać z <a href="http://xquartz.macosforge.org/landing/">http://xquartz.macosforge.org/landing/</a>. Jave można zainstalować klikając na ikonkę &ldquo;Java Preferences&rdquo; w /Applications/Utilities.</p>

<p>Instalacja samego Homebrew jest dosyć trywialna, wydajemy tylko polecenie:</p>

<p><code>ruby &lt;(curl -fsSkL raw.github.com/mxcl/homebrew/go)</code></p>

<p><img src="http://itoutline.me/images/homebrew_01.png"></p>

<p>Kilka przydatnych poleceń:</p>

<p>Weryfikacja czy wszystko jest ok z Homebrew</p>

<p><code>brew doctor</code></p>

<p><img src="http://itoutline.me/images/homebrew_02.png"></p>

<p>Insalacja pakietu <a href="http://www.gnu.org/software/coreutils/">coreutils</a> (w tej paczce dostepny jest ls w wersji GNU, czyli będzie działać <code>gls --color</code>)</p>

<p><code>brew install coreutils</code></p>

<p><img src="http://itoutline.me/images/homebrew_03.png"></p>

<p>Lista poleceń, które są instalowane przez coreutils (Jak widać większość ma prefix g, chodzi o to, że duża część z nich jest natywnie dostępna w osx ale w wersji BSD i często dosyć starych przez co czasmi brakuje możliwości użycia jakichś fajnych parametrów które pojawiły się kolejnych wersjach GNU danego polecenia. Prefix załatwia problem, jeśli chcemy skorzystać z polecenia GNU wpisujemy <code>gls</code>, <code>gcat</code>, <code>gsort</code> itd. System nie jest w żaden sposób naruszony):</p>

<p><img src="http://itoutline.me/images/homebrew_04.png"></p>

<p>Usunięcie <a href="http://www.gnu.org/software/coreutils/">coreutils</a></p>

<p><code>brew uninstall coreutils</code></p>

<p>Wyświetlnie zainstalowanych pakietów</p>

<p><code>brew list</code></p>

<p>Sprawdzenie czy pakiet o nazwie xyz jest dostepny</p>

<p><code>brew search xyz</code></p>

<p>Wyświetlenie możliwych parametrów dla instalacji danego pakietu (warto to sprawdzać ponieważ np. zainstalowanie wiresharka bez parametru <code>--with-x</code> spowoduje, że nie będzie GUI)</p>

<p><code>brew options xyz</code></p>

<p><img src="http://itoutline.me/images/homebrew_05.png"></p>

<p>Aktualizacja dostępnych receptur (to również należy wykonywać przed każdą instalacją)</p>

<p><code>brew update</code></p>

<p>Sprawdzenie, które z zainstalowanych pakietów są w nie aktualnych wersjach</p>

<p><code>brew outdated</code></p>

<p>Aktualizacja zainstalowanych pakietów</p>

<p><code>brew upgrade</code></p>

<p>Warto dodać <code>source</code>brew &ndash;prefix<code>/Library/Contributions/brew_bash_completion.sh</code> do <code>.bash_profile</code> dzięki czemu będzie działać autouzupełnianie klawiszem ⇥ tab poleceń brew-a.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mountain Lion]]></title>
    <summary><![CDATA[]]></summary>
    <link href="http://itoutline.me/2012/08/19/mountain-lion/"/>
    <updated>2012-08-19T14:48:56+00:00</updated>
    <id>http://itoutline.me/2012/08/19/mountain-lion</id>
    <content type="html"><![CDATA[<p>Ponad dwa lata temu przesiadłem się na osx z trzech powodów, po pierwsze wydawało mi się, że łączy dwa światy bardzo naturalnie tj. terminal i przyjemne dla oka stabilne GUI. Drugim była ciekawość, a trzecim macbook air.</p>

<p>Nie jest to niezbędne, ale każdy nowy osx instaluję od 0. Ma to ten plus, że definitywnie czyszczę dysk z wszystkich zbierających się tam &ldquo;śmieci&rdquo;, które za takowe podczas instalacji owych programów nie uważałem. Zasadniczym minusem jest to, że odtworzenie całego środowiska trochę czasu jednak zajmuje.</p>

<p>Właśnie zbliżam się do końca kastomizacji, czas zatem na notatki :)</p>

<h3>Programy</h3>

<ul>
<li><p>iTerm <a href="http://www.iterm2.com">http://www.iterm2.com</a> - jestem orędownikiem używania natywnych narzędzi systemowych, jednak iTerm jest lepszy od Terminala</p></li>
<li><p>The Unarchiver <a href="http://unarchiver.c3.cx">http://unarchiver.c3.cx</a> - chyba najlepszy archiwizator</p></li>
<li><p>Caffeine <a href="http://lightheadsw.com/caffeine/">http://lightheadsw.com/caffeine/</a> - nie pozwala macowi przysypiać</p></li>
<li><p>AppCleaner <a href="http://www.freemacsoft.net/appcleaner/">http://www.freemacsoft.net/appcleaner/</a> - nie miałem z nim nigdy problemów</p></li>
<li><p>Disk Inventory X <a href="http://www.derlien.com">http://www.derlien.com</a> - inwentaryzacja dysku</p></li>
<li><p>CoRD <a href="http://cord.sourceforge.net">http://cord.sourceforge.net</a> - przyjemny klient RDP</p></li>
<li><p>Homebrew <a href="http://mxcl.github.com/homebrew/">http://mxcl.github.com/homebrew/</a> - rewelacyjny sposób na dodawanie tych narzędzi, których brakuje w osx</p></li>
<li><p><a href="http://itunes.apple.com/app/palua/id431494195">Palua</a> (płatny 1$) - lepiej rozwiazać problemu klawiszy funkcyjnych chyba się nie da</p></li>
<li><p>CHM View <a href="http://www.enolsoft.com/chm-view-for-mac.html#">http://www.enolsoft.com/chm-view-for-mac.html#</a> - przeglądarka plików pomocy MS .chm</p></li>
<li><p>BetterTouchTool <a href="http://blog.boastr.net">http://blog.boastr.net</a> - ogromne możliwości kastomizacji multidotyku, przy okazji dostajemy funkcję inteligentnego rozmieszczania okien</p></li>
<li><p>KeyboardCleanTool - <a href="http://blog.boastr.net">http://blog.boastr.net</a> - czasami trzeba to zrobić</p></li>
<li><p>CheatSheet <a href="http://www.grandtotal.biz/CheatSheet/">http://www.grandtotal.biz/CheatSheet/</a> - fajny pomysł, przytrzymanie command powoduje wyświetlenie dostępnych skrótów dla danej aplikacji</p></li>
<li><p>KeePassX <a href="http://www.keepassx.org/dev/projects/keepassx/files">http://www.keepassx.org/dev/projects/keepassx/files</a> - menadżer haseł, gdzieś je trzeba trzymać</p></li>
<li><p>VLC <a href="http://www.videolan.org/vlc/index.html">http://www.videolan.org/</a> - wiadomo</p></li>
<li><p>Teamviewer - <a href="http://www.teamviewer.com/en/index.aspx">http://www.teamviewer.com/</a> -  zdalny dostęp</p></li>
<li><p>Parallels <a href="http://www.parallels.com">http://www.parallels.com</a> (płatny 95$) - w mojej ocenie najlepszy sposób na wirtualizację, testowałem Fusion, Virtualboxa, qemu i jednak zostałem przy Parallels</p></li>
<li><p>Pixelminator <a href="http://www.pixelmator.com">http://www.pixelmator.com</a> (płatny 15$) - obróbka grafiki</p></li>
<li><p>Skitch <a href="http://skitch.com">http://skitch.com</a> - zrzuty ekranu</p></li>
<li><p>TotalFinder <a href="http://totalfinder.binaryage.com">http://totalfinder.binaryage.com</a> (płatny 18$) - Finder nie jest najgorszy, ale jednak ma pewne braki. Nie jestem jeszcze przekonany do TotalFindera ale na razie działa ok i w końcu na pulpicie nie wyświetla się duet &ldquo;.DS_Store .localized&rdquo;</p></li>
</ul>


<h3>Środowisko</h3>

<h4>.bash_profile</h4>

<figure class='code'><figcaption><span>.bash_profile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">alias </span><span class="nv">helpik</span><span class="o">=</span><span class="s1">&#39;cat ~/helpfile.txt&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># wymaga gls</span>
</span><span class='line'><span class="nb">alias </span><span class="nv">l</span><span class="o">=</span><span class="s1">&#39;gls --color&#39;</span>
</span><span class='line'><span class="nb">alias </span><span class="nv">ll</span><span class="o">=</span><span class="s1">&#39;gls --color -lh&#39;</span>
</span><span class='line'><span class="nb">alias </span><span class="nv">lll</span><span class="o">=</span><span class="s1">&#39;gls --color -alh&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">export </span><span class="nv">LC_CTYPE</span><span class="o">=</span>en_US.UTF-8
</span><span class='line'>
</span><span class='line'><span class="c"># vim jako domyslny edytor</span>
</span><span class='line'><span class="nb">export </span><span class="nv">EDITOR</span><span class="o">=</span><span class="s2">&quot;vim&quot;</span>
</span><span class='line'><span class="c"># po wyjsciu z man page zostanie on na terminalu</span>
</span><span class='line'><span class="nb">export </span><span class="nv">MANPAGER</span><span class="o">=</span><span class="s2">&quot;less -X&quot;</span>
</span><span class='line'><span class="c"># kluczowe slowa w man page zostana wyswietlone na pomaranczowo</span>
</span><span class='line'><span class="nb">export </span><span class="nv">LESS_TERMCAP_md</span><span class="o">=</span><span class="s2">&quot;$ORANGE&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># zwiekszamy historie polecen</span>
</span><span class='line'><span class="nb">export </span><span class="nv">HISTSIZE</span><span class="o">=</span>32768
</span><span class='line'><span class="nb">export </span><span class="nv">HISTFILESIZE</span><span class="o">=</span><span class="nv">$HISTSIZE</span>
</span><span class='line'><span class="c"># nie zapisujemy duplikatow i kilku standardowych polecen</span>
</span><span class='line'><span class="nb">export </span><span class="nv">HISTCONTROL</span><span class="o">=</span>erasedups
</span><span class='line'><span class="nb">export </span><span class="nv">HISTIGNORE</span><span class="o">=</span><span class="s2">&quot;ls:cd:cd -:pwd:exit:date:* --help&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># ustawienie wiersza polecen</span>
</span><span class='line'><span class="nv">PROMPT_COMMAND</span><span class="o">=</span><span class="s1">&#39;PS1=&quot;[33[0;33m][!]`if [[ $? = &quot;0&quot; ]]; then echo &quot;\[33[32m\]&quot;; else echo &quot;\[33[31m\]&quot;; fi`[u.h: `if [[ `pwd|wc -c|tr -d &quot; &quot;` &gt; 18 ]]; then echo &quot;\W&quot;; else echo &quot;\w&quot;; fi`]$[33[0m] &quot;; echo -ne &quot;33]0;`hostname -s`:`pwd`07&quot;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ustawiamy parę aliasów, historię i fajnego prompta, który wyświetla numer polecenia i zmienia kolor w zależności od tego czy wykonało się poprawnie, działa to tak:</p>

<p><img src="http://itoutline.me/images/mountain_lion_012.png"></p>

<p>Wyświetlenie zawartości katalogu w kolorze można też osiągnąć bez instalacji ls w wersji GNU. Wystarczy zamienić linie 4,5,6 na np.:</p>

<pre><code>export CLICOLOR=1
export LSCOLORS=GxFxCxDxBxegedabagaced
alias l='ls'
alias ll='ls -lh'
alias lll='ls -alh'
</code></pre>

<p>albo</p>

<pre><code>alias l='ls -G'
alias ll='ls -Glh'
alias lll='ls -Galh'
</code></pre>

<h3>Defaults</h3>

<p>Korzystam z następującyh:</p>

<pre><code># wylaczenie przezroczystosci paska menu
defaults write NSGlobalDomain AppleEnableMenuBarTransparency -bool false
# wylaczenie pytania o potwierdze uruchomienia aplikacji pobranej z sieci
defaults write com.apple.LaunchServices LSQuarantine -bool false
# wylaczenie "naturalnego" przewijania
defaults write NSGlobalDomain com.apple.swipescrolldirection -bool false
# przyspiesznie powtarzania danego klawisza
defaults write NSGlobalDomain KeyRepeat -int 0
# pozwala na zamkniecie Findera
defaults write com.apple.finder QuitMenuItem -bool true
# wyswietla ukryte plki
defaults write com.apple.Finder AppleShowAllFiles -bool true
# wyswietla rozszerzenia plikow
defaults write NSGlobalDomain AppleShowAllExtensions -bool true
# wyswietla pasek statusu
defaults write com.apple.finder ShowStatusBar -bool true
# nie zapisuje .DS_Store na dyskach sieciowych
defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true
# nie weryfikuje plikow obrazow dysku
defaults write com.apple.frameworks.diskimages skip-verify -bool true
defaults write com.apple.frameworks.diskimages skip-verify-locked -bool true
defaults write com.apple.frameworks.diskimages skip-verify-remote -bool true
</code></pre>
]]></content>
  </entry>
  
</feed>
