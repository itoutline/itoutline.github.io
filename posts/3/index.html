
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>itoutline.me</title>
  <meta name="author" content="itoutline.me">

  
  <meta name="description" content="Zaskakująco łatwo można dodać sterowniki do konwerterów USB-TTL opartych na chipsecie PL2303. Wystarczy pobrać archiwum osx-pl2303.kext.tgz http:// &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://itoutline.me/posts/3/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="itoutline.me" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!-- Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
<link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
<link href="/stylesheets/keys.css" rel="stylesheet" type="text/css" />
<link href='https://fonts.googleapis.com/css?family=Ubuntu:400,700' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34734923-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">itoutline.me</a></h1>
  
    <h2>&nbsp;</h2>
  
  <meta name="google-translate-customization" content="e81cdd0ed4c87a5-36a8c112e17b44b8-g4197450913b80893-c"></meta>
  <script type="text/javascript">
function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage: 'pl', multilanguagePage: true, autoDisplay: false}, 'google_translate_element');
}
  </script>
  <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="itoutline.me">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
   
	<!-- Now we're back to normal posts. Note the links used under href in both headers.-->
	 	<h1 class="entry-title"><a href="/2013/06/09/pl2303-z-osx/">PL2303 z OSX</a></h1>
		
  	 
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-09T18:34:26+00:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>6:34 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Zaskakująco łatwo można dodać sterowniki do konwerterów USB-TTL opartych na chipsecie PL2303. Wystarczy pobrać archiwum osx-pl2303.kext.tgz <a href="http://www.xbsd.nl/2011/07/pl2303-serial-usb-on-osx-lion.html">http://www.xbsd.nl/2011/07/pl2303-serial-usb-on-osx-lion.html</a></p>

<p><img src="/images/PL2303.jpg"></p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2013/06/09/pl2303-z-osx/">Read on &rarr;</a>
    </footer>
  





    </article>
  
  
    <article>
      
  <header>
   
	<!-- Now we're back to normal posts. Note the links used under href in both headers.-->
	 	<h1 class="entry-title"><a href="/2013/05/09/partkeepr-na-osx/">PartKeepr na OSX</a></h1>
		
  	 
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-09T14:22:44+00:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:22 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Zauważyłem, że w związku z coraz większą ilością części elektronicznych w moim &ldquo;warsztacie&rdquo; coraz słabiej orientuje się co mam na &ldquo;stanie magazynowym&rdquo;. Pomyślałem, że stworzę prymitywną bazę z prostym frontendem i będę tam wrzucał informacje o zakupach. Zanim przystąpiłem do działania sprawdziłem czy przypadkiem nie ma już takiego rozwiązania i okazało się, że jest <a href="http://www.partkeepr.org">http://www.partkeepr.org</a></p>

<p>Przy okazji znacznie wykraczające poza moje wymagania, postanowiłem tym razem nie wymyślać koła na nowo.</p>

<p>Instalacja na OSX na pewno nie należy do kategorii &ldquo;agree, next, finish&rdquo;.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2013/05/09/partkeepr-na-osx/">Read on &rarr;</a>
    </footer>
  





    </article>
  
  
    <article>
      
  <header>
   
	<!-- Now we're back to normal posts. Note the links used under href in both headers.-->
	 	<h1 class="entry-title"><a href="/2013/04/16/problem-bitlocker/">Problem Bitlocker</a></h1>
		
  	 
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-04-16T13:42:27+00:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>1:42 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="left" src="/images/BitLocker_icon.png" width="150"></p>

<p>Przyznam, że nigdy nie myślałem, że coś takiego może mi sie przydarzyć&hellip; ale jednak. Klucze do bitlockera miałem zapisane na karcie micro-SD włożonej do miniaturowego czytnika USB. W pewnym momencie pojawił się nowy element w pobliżu komputera w postaci drukarki, &ldquo;głównej winowajczyjni&rdquo; ;). Drukarka była niestety zbyt blisko czytnika i prawdopodobnie za którymś razem spowodowała jakieś większe przesunięcie się czytnika, co zakończyło się strukturą katalogów na karcie jak poniżej. Oczywiście mogłem to sprawdzić tylko na ja jakimś innym komputerze ponieważ komputer który zabezpieczała ta karta w ogóle nie miał zamiaru się z nią uruchomić.</p>

<p><img src="/images/Bitlocker_sd_card_1.png"></p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2013/04/16/problem-bitlocker/">Read on &rarr;</a>
    </footer>
  





    </article>
  
  
    <article>
      
  <header>
   
	<!-- Now we're back to normal posts. Note the links used under href in both headers.-->
	 	<h1 class="entry-title"><a href="/2013/04/09/aplikacja-dla-osx/">&#8220;Aplikacja&#8221; dla OSX</a></h1>
		
  	 
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-04-09T08:41:01+00:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>8:41 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Słowo aplikacja nie bez powodu jest w cudzysłowiu. Tak naprawdę to bash-owy skrypt umieszczony w odpowiedniej strukturze katalogowej wykorzystujący narzędzie <a href="http://www.bluem.net/en/mac/pashua/">Pashua</a>. W sumie najbardziej mi odpowiada <a href="http://www.itoutline.me/xfreerdp-na-szybko/">ten sposób</a> ale pomyślałem sobie, że w ramach ćwiczeń spróbuje zrobić jak najprostsze ale w miarę funkcjonalne GUI do <code>xfreerdp</code>. Stąd cała zabawa z Pashua.</p>

<p>Aplikacje w OSX są aplikacjami dzięki rozszerzeniu .app, tak naprawdę to katalog w którym są umieszczone pliki i zasoby niezbędne do działania programu. Moją &ldquo;aplikację&rdquo; postanowiłem nazwać &ldquo;XFreerdp Client&rdquo;. Jej zawartość wygląda następująco (&ldquo;Show package content&rdquo; z menu podręcznego):</p>

<p><img src="/images/Xfreerdp_Client.app_directory.png" width="400"></p>

<ul>
<li><p>Info.plist - to plik zawierający informacje o aplikacji. Zdefiniowana jest w nim nazwa pliku, który ma byc uruchomiony, ikony, wersji, architektury itp.</p></li>
<li><p>rdp_connect - to skrypt, który jest uruchamiany</p></li>
<li><p>rdp_connect_image.png - obraz który jest wyświetlany w oknie Pashua</p></li>
<li><p>rdp_connect.icns - ikona aplikacji Xfreerdp Client</p></li>
</ul>


</div>
  
  
    <footer>
      <a rel="full-article" href="/2013/04/09/aplikacja-dla-osx/">Read on &rarr;</a>
    </footer>
  





    </article>
  
  
    <article>
      
  <header>
   
	<!-- Now we're back to normal posts. Note the links used under href in both headers.-->
	 	<h1 class="entry-title"><a href="/2013/04/08/xfreerdp-na-szybko/">Xfreerdp na szybko</a></h1>
		
  	 
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-04-08T22:36:42+00:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:36 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Xfreerdp działa bardzo dobrze ale ma ten minus, że wymaga podania sporej ilości parametrów do każdego połączenia. Można &ldquo;przegrepować&rdquo; historię, wkleić linijkę do skryptu ale można też zrobić to tak:</p>

<figure class='code'><figcaption><span>Funkcja start_rdp w .bash_profile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">function</span> start_rdp <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> ! -f ~/.serverauth.* <span class="o">]</span>
</span><span class='line'>        <span class="k">then</span>
</span><span class='line'>            <span class="nb">echo</span> <span class="s2">&quot;Starting Xquartz...&quot;</span>
</span><span class='line'>            osascript -e <span class="s1">&#39;launch application &quot;Xquartz&quot;&#39;</span>
</span><span class='line'>            sleep 3
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> ! <span class="s2">&quot;$DISPLAY&quot;</span> <span class="o">]</span>
</span><span class='line'>        <span class="k">then</span>
</span><span class='line'>            <span class="nb">export </span><span class="nv">DISPLAY</span><span class="o">=</span>:0
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">case</span> <span class="nv">$1</span> in
</span><span class='line'>    workpc <span class="o">)</span>
</span><span class='line'>        <span class="sb">`</span>which xfreerdp<span class="sb">`</span> -u user01 -g 1280x800 -z --no-rdp -x lan --plugin cliprdr --plugin rdpdr --data disk:HDD:<span class="nv">$HOME</span> -- 192.168.1.1:8403
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    testpc <span class="o">)</span>
</span><span class='line'>        <span class="sb">`</span>which xfreerdp<span class="sb">`</span> -u itoutline.me -g 1280x800 -z --no-rdp -x lan --plugin cliprdr --plugin rdpdr --data disk:HDD:<span class="nv">$HOME</span> -- 192.168.1.1:8404
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    * <span class="o">)</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">&quot;You need to provide hostname: workpc, testpc&quot;</span>
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    <span class="k">esac</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nb">alias </span><span class="nv">rdp</span><span class="o">=</span>start_rdp
</span></code></pre></td></tr></table></div></figure>


<p>Powyższy kawałek kodu należy umieścić w <code>.bash_profile</code> (o ile korzystamy właśnie z tego shell-a). Teraz, żeby połączyć się z hostem o nazwie <code>workpc</code> wystarczy w terminalu wpisać <code>rdp workpc</code>. Jak widać funkcja sprawdza czy jest uruchomiony serwer X oraz ustawiona zmienna <code>DISPLAY</code>. Niezbyt eleganckie jest użycie polecenia <code>sleep</code> ale Xquartz trochę się uruchamia&hellip;</p>

<p><img src="/images/xfreerdp_na_szybko.png"></p>
</div>
  
  





    </article>
  
  
    <article>
      
  <header>
   
	<!-- Now we're back to normal posts. Note the links used under href in both headers.-->
	 	<h1 class="entry-title"><a href="/2013/03/31/ssh-tips/">SSH tips</a></h1>
		
  	 
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-03-31T17:17:08+00:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2013</span></span> <span class='time'>5:17 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="left" src="/images/OpenSSH_logo-e1365113790448.png"></p>

<p>Kilka usprawnień i wskazówek ułatwiających korzystanie z SSH.</p>

<h4>Konfiguracja hostów zdalnych</h4>

<p>Korzystanie z pliku <code>~/.ssh/config</code> ułatwia łączenie się ze zdalnymi hostami. Wystarczy wpisać <code>ssh</code>, pierwszą literę hosta i wcisnąć klawisz  ⇥ tab. Nie trzeba pamiętać o porcie, użytkowniku, parametrach połączenia. <code>ForwardX11 yes</code> umożliwia uruchamianie aplikacji graficznych (oczywiście musimy mieć uruchomiony na kliencie serwer X-ów). Poniżej przykładowy plik:</p>

<pre><code>Host centos-01
HostName 192.168.1.190
User itoutline
ForwardX11 yes

Host openwrt
Hostname 192.168.1.1
User root

Host appletv
Hostname 192.168.1.60
User root

Host workstation
Hostname 192.168.1.1
Port 8511
User itoutline
</code></pre>

<h4>Automatyczne logowanie</h4>

<p>Umieszczenie naszego klucza publicznego w pliku <code>~/.ssh/authorized_keys</code> na serwerze umożliwia zalogowanie się bez użycia hasła. Najpierw musimy wygenerować parę kluczy np.:</p>

<pre><code>[itoutline@centos-01 ~]$ ssh-keygen -t rsa -C "itoutline@centos-01"
Generating public/private rsa key pair.
Enter file in which to save the key (/home/itoutline/.ssh/id_rsa):
Created directory '/home/itoutline/.ssh'.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/itoutline/.ssh/id_rsa.
Your public key has been saved in /home/itoutline/.ssh/id_rsa.pub.
The key fingerprint is:
81:c4:99:69:cd:c5:39:d8:01:26:f7:bd:05:3a:bd:df itoutline@centos-01
The key's randomart image is:
+--[ RSA 2048]----+
|     .o*+*oo.    |
|     .*=+.=+ .   |
|     .. . +.o .  |
|         . . +   |
|        S   o    |
|             . . |
|              . E|
|                 |
|                 |
+-----------------+
</code></pre>

<p>Niepodanie &ldquo;passphrase&rdquo; podczas generowania kluczy spowoduje, że zawsze będziemy mogli zalogować się na zdalnego hosta. Ma to jednak zasadniczy minus, ktoś kto zdobędzie nasz klucz prywatny zapisany w pliku <code>/home/itoutline/.ssh/id_rsa</code> zaloguje się bezproblemowo wszędzie tam gdzie dodaliśmy nasz klucz publiczny do <code>~/.ssh/authorized_keys</code>. Trochę jak zapisanie hasła w pliku tekstowym&hellip;</p>

<p>Pozostaje skopiowanie klucza publiczngo na zdalny serwer, można to zrobić np. za pomocą <code>ssh-copy-id</code>:</p>

<pre><code>[itoutline@centos-01 ~]$ ssh-copy-id centos-03
The authenticity of host 'centos-03 (192.168.1.200)' can't be established.
RSA key fingerprint is 5b:85:ee:ee:d5:12:a3:f1:fe:10:5f:4d:66:f5:e5:7a.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'centos-03' (RSA) to the list of known hosts.
itoutline@centos-03's password:
Now try logging into the machine, with "ssh 'centos-03'", and check in:

  .ssh/authorized_keys

to make sure we haven't added extra keys that you weren't expecting.
</code></pre>

<p>W przypadku kiedy ssh nasłuchuje na porcie innym niż standardowy można użyć polecenia</p>

<p><code>ssh-copy-id -i ~/.ssh/id_rsa.pub "-p 2222 itoutline@centos-03"</code></p>

<p>Jeśli mamy więcej niż jeden klucz publiczny w katalogu <code>~/.ssh</code> warto podać jego nazwę (jak w ostatnim przykładzie) ponieważ <code>ssh-copy-id</code> kopiuje wszystkie jakie znajdzie.</p>

<p>Jeśli na kliencie polecenie <code>ssh-copy-id</code> jest niedostępne, można wykorzystać poniższego one-linera:</p>

<p> <code>cat ~/.ssh/id_rsa.pub | ssh itoutline@centos-03 “mkdir ~/.ssh; cat &gt;&gt; ~/.ssh/authorized_keys”</code></p>

<p>Jeśli zdecydujemy się na używanie &ldquo;passphrase&rdquo; z pomocą przyjdzie nam <code>ssh-agent</code>, umożliwia on zapamiętanie naszego klucza prywatnego poświadczonego &ldquo;passphrase&rdquo; do czasu np. restartu hosta.</p>

<p>Przykładowy kod dodany do <code>.bash_profile</code> lub <code>.bashrc</code> załatwiający obsługę <code>ssh-agent</code>.</p>

<figure class='code'><figcaption><span>Obsluga ssh-agent w .bash_profile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">SSH_ENV</span><span class="o">=</span><span class="nv">$HOME</span>/.ssh/environment
</span><span class='line'>
</span><span class='line'><span class="k">function</span> start_agent <span class="o">{</span>
</span><span class='line'>     <span class="nb">echo</span> <span class="s2">&quot;Initialising new SSH agent...&quot;</span>
</span><span class='line'>     /usr/bin/ssh-agent <span class="p">|</span> sed <span class="s1">&#39;s/^echo/#echo/&#39;</span> &gt; <span class="k">${</span><span class="nv">SSH_ENV</span><span class="k">}</span>
</span><span class='line'>     <span class="nb">echo </span>succeeded
</span><span class='line'>     chmod <span class="m">600</span> <span class="k">${</span><span class="nv">SSH_ENV</span><span class="k">}</span>
</span><span class='line'>     . <span class="k">${</span><span class="nv">SSH_ENV</span><span class="k">}</span> &gt; /dev/null
</span><span class='line'>     /usr/bin/ssh-add<span class="p">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Source SSH settings, if applicable</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -f <span class="s2">&quot;${SSH_ENV}&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>     . <span class="k">${</span><span class="nv">SSH_ENV</span><span class="k">}</span> &gt; /dev/null
</span><span class='line'>     <span class="c">#ps ${SSH_AGENT_PID} doesn&#39;t work under cywgin</span>
</span><span class='line'>     ps -ef <span class="p">|</span> grep <span class="k">${</span><span class="nv">SSH_AGENT_PID</span><span class="k">}</span> <span class="p">|</span> grep ssh-agent<span class="nv">$ </span>&gt; /dev/null <span class="o">||</span> <span class="o">{</span>
</span><span class='line'>         start_agent<span class="p">;</span>
</span><span class='line'>     <span class="o">}</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>     start_agent<span class="p">;</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>Teraz kiedy po raz pierwszy zalogujemy się na centos-01, zobaczymy coś takiego:</p>

<pre><code>[itoutline.sputnik: itoutline]$ ssh centos-01
Last login: Sun Mar 31 11:17:17 2013 from sputnik.local
Initialising new SSH agent...
succeeded
Enter passphrase for /home/itoutline/.ssh/id_rsa:
Identity added: /home/itoutline/.ssh/id_rsa (/home/itoutline/.ssh/id_rsa)
</code></pre>

<p>Wejście na centos-03 odbędzie się już bez podawania żadnych poświadczeń:</p>

<pre><code>[itoutline@centos-01 ~]$ ssh centos-03
Last login: Sun Mar 31 11:20:40 2013 from centos-01.local
[itoutline@centos-03 ~]$
</code></pre>

<h4>Modyfikacja &ldquo;passphrase&rdquo;</h4>

<p>Następujące polecenie umożliwia dodanie, usunięcie lub zmianę &ldquo;passphrase&rdquo; w przypadku istniejących kluczy:</p>

<p><code>ssh-keygen -p -f $HOME/.ssh/id_rsa</code></p>

<pre><code>[itoutline@centos-01 ~]$ ssh-keygen -p -f $HOME/.ssh/id_rsa
Enter old passphrase:
Key has comment '/home/itoutline/.ssh/id_rsa'
Enter new passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved with the new passphrase.
</code></pre>

<h4>Uruchamianie aplikacji graficznych przez SSH</h4>

<p>Na maszynach wirtualnych instaluję z reguły minimalną wersję systemu plus to co akurat chce sprawdzić. Rzadko kiedy pojawia się konieczność skorzystania z grafiki a jeśli już to wystarczy doinstalować tylko środowisko X. Dzięki czemu wirtualna maszyna jest &ldquo;lżejsza&rdquo;.</p>

<p>Nawiązanie sesji SSH ze wsparciem dla X-ów <code>ssh -X centos-03</code></p>

<p>Po stronie serwera w konfiguracji <code>/etc/ssh/sshd_config</code> musi znaleźć się linia <code>X11Forwarding yes</code></p>

<p>Uruchomienie linuxowego kalkulatora na pulpicie OSX (XQuartz musi być zainstalowany i uruchomiony):</p>

<pre><code>[itoutline.sputnik: itoutline]$ ssh -X centos-01
Last login: Sun Mar 31 15:08:49 2013 from sputnik.local
[itoutline@centos-01 ~]$ gcalctool &amp;
</code></pre>

<p><img src="/images/Calculator.png"></p>

<p>Jeśli pojawia się poniższy problem:</p>

<pre><code>(gcalctool:3141): Gtk-WARNING **: cannot open display:
</code></pre>

<p>Może oznaczać, że zmienna <code>DISPLAY</code> na kliencie nie jest ustawiona, można to naprawić dodając poniższą linię do <code>.bash_profile</code> lub <code>.bashrc</code></p>

<pre><code>export DISPLAY=:0
</code></pre>
</div>
  
  





    </article>
  
  
    <article>
      
  <header>
   
	<!-- Now we're back to normal posts. Note the links used under href in both headers.-->
	 	<h1 class="entry-title"><a href="/2012/11/03/unblock-us-i-openwrt/">Unblock-us i Openwrt</a></h1>
		
  	 
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-11-03T22:52:45+00:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2012</span></span> <span class='time'>10:52 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Unblock-us.com to serwis, który umożliwia dostęp do <a href="http://www.unblock-us.com/supported-services">usług</a> posiadających ograniczenia regionalne podczas gdy jesteśmy akurat za granicą. Jest o tyle lepszy od rozwiązań opartych na VPN, że nie musimy niczego instalować i prędkość naszego połączenia nie jest ograniczona jak to ma zazwyczaj miejsce w przypadku dostawców rozwiązań VPN.</p>

<p>W przypadku OpenWrt konfiguracja jest bardzo prosta (oczywiście to nie jedyny sposób, ale właśnie z tą metodą nigdy nie miałem problemów). Tworzymy nowy plik zawierający informację o serwerach DNS i umieszczamy w nim wpisy związane z Unblock-us.com np. <code>/etc/my_resolv.conf</code>:</p>

<pre><code># Interface lan
nameserver 184.106.242.193
nameserver 208.122.23.23
nameserver 208.122.23.22
# Interface wan
nameserver 184.106.242.193
nameserver 208.122.23.23
nameserver 208.122.23.22
</code></pre>

<p>Następnie modyfikujemy plik <code>/etc/config/dhcp</code>, komentujemy linię zawierającą dane oryginalnego pliku i dodajemy nasz:</p>

<pre><code>#option resolvfile '/tmp/resolv.conf.auto';
option resolvfile '/etc/my_resolv.conf';
</code></pre>
</div>
  
  





    </article>
  
  
    <article>
      
  <header>
   
	<!-- Now we're back to normal posts. Note the links used under href in both headers.-->
	 	<h1 class="entry-title"><a href="/2012/10/14/archlinux-na-raspberry-pi/">Archlinux na Raspberry Pi</a></h1>
		
  	 
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-10-14T23:30:31+00:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>11:30 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>W końcu do mnie dotarł Raspberry Pi. Instalacja Archlinuxa, co do którego nie jestem jeszcze przekonany z uwagi na to, że &ldquo;prawie wszystko jest inaczej&rdquo; wyglądała następująco.</p>

<p>Przygotowanie karty SD. Znalazłem jakąś kartę 4GB, image Archlinuxa na stronie <a href="http://www.raspberrypi.org/downloads">http://www.raspberrypi.org/downloads</a> ma 2GB w związku z czym trzeba się pobawić <code>parted</code>, którego na OSX nie ma. Nie wnikałem już czy da się przygotować kartę na OSX z wiadomych względów, czas naglił. Całość przygotowania karty przeprowadziłem na CentOS</p>

<p>Pobranie obrazu:</p>

<p><code>wget http://downloads.raspberrypi.org/images/archlinuxarm/archlinux-hf-2012-09-18/archlinux-hf-2012-09-18.zip</code></p>

<p>Wypakowanie:</p>

<p><code>unzip archlinux-hf-2012-09-18.zip</code></p>

<p>Sprawdzenie w jaki sposób karta pojawiła się w systemie. Po włożeniu karty do slotu SD należy wydać polecenie:</p>

<p><code>dmesg | tail -15</code></p>

<pre><code>usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
usb-storage: device found at 3
usb-storage: waiting for device to settle before scanning
usb-storage: device scan complete
scsi 8:0:0:0: Direct-Access     APPLE    SD Card Reader   2.00 PQ: 0 ANSI: 0
sd 8:0:0:0: Attached scsi generic sg2 type 0
sd 8:0:0:0: [sdb] 8040448 512-byte logical blocks: (4.11 GB/3.83 GiB)
sd 8:0:0:0: [sdb] Write Protect is off
sd 8:0:0:0: [sdb] Mode Sense: 0b 00 00 08
sd 8:0:0:0: [sdb] Assuming drive cache: write through
sd 8:0:0:0: [sdb] Assuming drive cache: write through
 sdb: sdb1
sd 8:0:0:0: [sdb] Assuming drive cache: write through
sd 8:0:0:0: [sdb] Attached SCSI removable disk
</code></pre>

<p>Ponieważ uruchamiam CentOSa w <code>init 3</code> automontowanie jak widać nie działa <code>df</code>:</p>

<pre><code>Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/mapper/vg_centos01-lv_root
                     100670904   2620032  97028396   3% /
tmpfs                   508396         0    508396   0% /dev/shm
/dev/sda1               495844     56404    413840  12% /boot
none                 4294967296         0 4294967296   0% /media/psf
</code></pre>

<p>I bardzo dobrze ;), można zapisywać obraz na kartę:</p>

<p><code>sudo dd bs=4M if=archlinux-hf-2012-09-18.img of=/dev/sdb</code></p>

<pre><code>471+1 records in
471+1 records out
1977614336 bytes (2.0 GB) copied, 120.311 s, 16.4 MB/s
</code></pre>

<p>Bardzo ważne jest, żeby podać właściwą nazwę dysku ponieważ powyższym poleceniem można uszkodzić system na którym karta jest przygotowywana. Jak widać u mnie karta zamontowała się jako sdb</p>

<p>Zmiana rozmiaru partycji root</p>

<p><code>sudo parted /dev/sdb</code></p>

<pre><code>GNU Parted 2.1
Using /dev/sdb
Welcome to GNU Parted! Type 'help' to view a list of commands.
(parted) unit chs
(parted) print
Model: APPLE SD Card Reader (scsi)
Disk /dev/sdb: 500,126,9
Sector size (logical/physical): 512B/512B
BIOS cylinder,head,sector geometry: 500,255,63.  Each cylinder is 8225kB.
Partition Table: msdos

Number  Start     End         Type     File system  Flags
 1      0,32,32   12,28,15    primary  fat16        boot, lba
 2      12,28,16  240,109,60  primary  ext4

(parted) rm 2
(parted) mkpart primary 12,28,16 500,126,8
</code></pre>

<p>Polecenie <code>unit chs</code> wyświetla informacje o zajętości przestrzeni na dysku w formacie &ldquo;cylinders, heads, sectors&rdquo;. Polecenie <code>print</code> wyświetla tablice partycji. <code>rm 2</code> usuwa drugą partycję, jest usuwana tylko informacja o partycji a nie dane jakie się na niej znajdują. Polecenie <code>mkpart primary 12,28,16 500,126,8</code> zakłada ponownie partycję zaczynającą się w tym samym miejscu ale kończącą na przedostatnim sektorze dysku (karty SD).</p>

<p>Sprawdzenie poprawności struktury systemu plików:</p>

<p><code>sudo e2fsck -f /dev/sdb2</code></p>

<pre><code>Pass 1: Checking inodes, blocks, and sizes
Pass 2: Checking directory structure
Pass 3: Checking directory connectivity
Pass 4: Checking reference counts
Pass 5: Checking group summary information
/dev/sdb2: 32513/114688 files (0.0% non-contiguous), 110601/458496 blocks
</code></pre>

<p>Rozszerzenie wielkości partycji do zadeklarowanej w tablicy partycji:</p>

<p><code>sudo resize2fs /dev/sdb2</code></p>

<pre><code>resize2fs 1.41.12 (17-May-2010)
Resizing the filesystem on /dev/sdb2 to 980735 (4k) blocks.
The filesystem on /dev/sdb2 is now 980735 blocks long.
</code></pre>

<p>To wszystko, można umieszczać kartę w Raspberry Pi</p>
</div>
  
  





    </article>
  
  
    <article>
      
  <header>
   
	<!-- Now we're back to normal posts. Note the links used under href in both headers.-->
	 	<h1 class="entry-title"><a href="/2012/10/14/parallels-desktop-tips/">Parallels Desktop tips</a></h1>
		
  	 
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-10-14T16:27:20+00:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>4:27 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Kilka użytecznych poleceń usprawniających prace z Parallels Desktop</p>

<p>Wylistowanie wszystkich wirtualnych maszyn:</p>

<p><code>prlctl list -a</code></p>

<pre><code>UUID                                    STATUS       IP_ADDR         NAME
{8XXX3dd4-9f0b-406b-a5bc-XXXXXXXXXXXX}  stopped      -               CentOS-01
{8XXXa248-def7-4f3e-8405-XXXXXXXXXXXX}  stopped      -               CentOS-03
{eXXX4b67-f98b-4bc9-a9a8-XXXXXXXXXXXX}  stopped      -               Mac OS X
{5XXXe2ef-786b-4873-a5aa-XXXXXXXXXXXX}  suspended    -               Windows 8
{4XXX3137-7fb3-4ec9-a7fa-XXXXXXXXXXXX}  suspended    -               Windows XP
</code></pre>

<p>Wylistowanie parametrów konkretnej maszyny:</p>

<p><code>prlctl list -i CentOS-01</code></p>

<p>Uruchomienie wirtualnej maszyny:</p>

<p><code>prlctl start CentOS-01</code></p>

<p>Wyłączenie wirtualnej maszyny:</p>

<p><code>prlctl stop CentOS-01</code></p>

<p>Użycie przełącznika <code>--kill</code> wymusi zamknięcie maszyny, która nie odpowiada.</p>

<p>Restart:</p>

<p><code>prlctl reset CentOS-01</code></p>

<p>Przejście w stan uśpienia:</p>

<p><code>prlctl suspend CentOS-01</code></p>

<pre><code>Suspending the VM...
The VM has been successfully suspended.
</code></pre>

<p>Wyjście ze stanu uśpienia:</p>

<p><code>prlctl resume CentOS-01</code></p>

<p>Wykonanie szablonu wirtualnej maszyny:</p>

<p><code>prlctl clone CentOS-01 --name CentOS --template</code></p>

<pre><code>Clone the CentOS-01 VM to VM template CentOS...
Operation progress 88%
The VM has been successfully cloned.
</code></pre>

<p>Utworzenie nowej wirtualnej maszyny z wcześniej przygotowanego szablonu:</p>

<p><code>prlctl create CentOS-05 --ostemplate CentOS</code></p>

<pre><code>Creating the VM on the basis of the CentOS template...
Clone the CentOS VM to VM CentOS-05...
Operation progress 88%
The VM has been successfully cloned.
</code></pre>

<p>Klonowanie, czyli stworzenie kopii istniejącej maszyny:</p>

<p><code>prlctl clone CentOS-10 --name CentOS-10-clon</code></p>

<pre><code>Clone the CentOS-10 VM to VM CentOS-10-clon...
Operation progress 88%
The VM has been successfully cloned.
</code></pre>

<p>Jak już wspominałem, wykorzystując <code>prlctl start VM_NAME</code> maszyna uruchomi się w tle bez GUI Parallels. Czasami jednak chcemy coś do niej podłączyć, można to zrobić również z konsoli. Wylistowanie dostępnych urządzeń USB:</p>

<p><code>prlsrvctl usb list</code></p>

<pre><code>Apple FaceTime HD Camera (Built-in)      '1a110000|05ac|8510|high|--|XXXXXX8M1XXXC8C0'
Apple Internal Memory Card Reader        '1d183000|05ac|8404|high|--|0000000XXXXX'
Apple Internal Keyboard / Trackpad       '1d182000|05ac|024c|full|KM|Empty'
Apple Bluetooth USB Host Controller      '1d181300|05ac|821f|full|--|Empty'
Patriot Memory                           '1a120000|13fe|3100|high|--|07XX6XXXXX'
StoreJet Transcend                       '14a10000|174c|5106|super|--|S2SXXXXXX209'
Flash Disk                               '1a120000|090c|1000|high|--|FBXXXXXXXX000141'
Logitech Illuminated Keyboard            '14200000|046d|c318|full|KM|Empty'
JTAGICE mkII                             '14200000|03eb|2103|full|PR|00B000XXXXXXX'
FT232R USB UART                          '14100000|0403|6001|full|PR|AXXXXX'
USB Flash Memory                         '1d110000|0930|6544|high|--|001422XXXXXXXXXX'
Apple - Composite                        '1d181100|05ac|820a|full|--|Empty'
</code></pre>

<p>Podłączenie czytnika kart SD do wirtualnej maszyny:</p>

<p><code>prlctl set CentOS-01 --device-connect "Apple Internal Memory Card Reader"</code></p>

<p>Odłączenie:</p>

<p><code>prlctl set CentOS-01 --device-disconnect "Apple Internal Memory Card Reader"</code></p>

<p>Podłączenie/odłączenie adaptera sieciowego:</p>

<p><code>prlctl set "CentOS-01" --device-connect "Apple USB Ethernet Adapter"</code>
<code>prlctl set "CentOS-01" --device-disconnect "Apple USB Ethernet Adapter"</code></p>

<p>Jeśli nasza maszyna korzysta z DHCP i interfejs sieciowy ma skonfigurowany w trybie bridge to niekoniecznie musimy wiedzieć jaki dostała adres kiedy korzystamy z &ldquo;obcej&rdquo; sieci. Oczywiście można uruchomić Parallels Desktop, dostać się do konsoli i podejrzeć. Można też wykonać polecenie na wirtualnej maszynie bez uruchamiania GUI.</p>

<p><code>prlctl exec "CentOS-01" ifconfig</code></p>

<p>W ten sposób możemy wykonywać dowolne polecenia. Innym ciekawym sposobem jest po prostu bezpośredni dostęp do konsoli:</p>

<p><code>prlctl enter Windows\ XP</code></p>

<pre><code>Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\&gt;dir
dir
 Volume in drive C has no label.
 Volume Serial Number is 08BC-EDC8

 Directory of C:\

10/05/2012  02:43 PM                 0 AUTOEXEC.BAT
10/05/2012  02:43 PM                 0 CONFIG.SYS
10/05/2012  01:43 PM    &lt;DIR&gt;          Documents and Settings
10/05/2012  02:45 PM    &lt;DIR&gt;          Program Files
10/05/2012  02:49 PM    &lt;DIR&gt;          WINDOWS
               2 File(s)              0 bytes
               3 Dir(s)  103,939,588,096 bytes free

C:\&gt;
</code></pre>

<p><code>prlctl enter CentOS-01</code></p>

<pre><code>-bash-4.1# uname -a
Linux centos-01.local 2.6.32-279.5.2.el6.x86_64 #1 SMP Fri Aug 24 01:07:11 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux
-bash-4.1#
</code></pre>

<p>Wykonania zrzutu ekranu z wirtualnej maszyny:</p>

<p><code>prlctl capture CentOS-01 --file login_screen.png</code></p>

<p>Konwersja dysku wirtualnego do typu &ldquo;plain&rdquo; (zostanie wykorzystana cała przestrzeń na dysku fizycznym zadeklarowana na dysk wirtualny) z podziałem na 2GB części. Przyznam, że raczej to mało pożyteczne polecenie, może tylko ma sens kiedy nie chcemy się zaskoczyć nagłym brakiem miejsca na dysku fizycznym w związku z rozrostem dysków wirtualnych. Możliwe, że ma też wpływ na wydajność maszyn wirtualnych&hellip; być może na produkcyjnych maszynach warto ustawiać ten tryb</p>

<p><code>prl_disk_tool convert --plain --split --hdd /Users/norbert/Documents/Parallels/CentOS-01.pvm/CentOS-01-0.hdd</code></p>

<p>Np. tak wyglądał katalog dysku przed powyższą operacją, dysk był ustawiony na 100GB w trybie &ldquo;expandable&rdquo;, bez podziału na 2GB części</p>

<pre><code>[norbert.macair: CentOS-01-0.hdd]$ ll
total 3.8G
-rw------- 1 norbert staff    0 Sep 21 01:21 CentOS-01-0.hdd
-rw------- 1 norbert staff 2.8G Sep 21 02:01 CentOS-01-0.hdd.0.{39a46e95-08c5-414c-bc03-6581f77b6dda}.hds
-rw------- 1 norbert staff 988M Oct 14 14:11 CentOS-01-0.hdd.0.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw------- 1 norbert staff  14K Oct 14 13:09 CentOS-01-0.hdd.drh
-rw------- 1 norbert staff 1.9K Sep 21 02:01 DiskDescriptor.xml
-rw------- 1 norbert staff 1.5K Sep 21 01:47 DiskDescriptor.xml.Backup
</code></pre>

<p>Po zabiegu, zajmujemy niepotrzebnie ponad 95GB</p>

<pre><code>[norbert.macair: CentOS-01-0.hdd]$ ll
total 101G
-rw-r--r-- 1 norbert staff    0 Oct 14 14:29 CentOS-01-0.hdd
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:25 CentOS-01-0.hdd.copy.0.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:25 CentOS-01-0.hdd.copy.1.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.10.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.11.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.12.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.13.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.14.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.15.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.16.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.17.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.18.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.19.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:25 CentOS-01-0.hdd.copy.2.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.20.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.21.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.22.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.23.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.24.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.25.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.26.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.27.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:27 CentOS-01-0.hdd.copy.28.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.29.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.3.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.30.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.31.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.32.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.33.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.34.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.35.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.36.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.37.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.38.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.39.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.4.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.40.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:28 CentOS-01-0.hdd.copy.41.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.42.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.43.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.44.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.45.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.46.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.47.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.48.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.49.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.5.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.50.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:29 CentOS-01-0.hdd.copy.51.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 1.1G Oct 14 14:29 CentOS-01-0.hdd.copy.52.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.6.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.7.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.8.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-r--r-- 1 norbert staff 2.0G Oct 14 14:26 CentOS-01-0.hdd.copy.9.{5fbaabe3-6958-40ff-92a7-860e329aab41}.hds
-rw-rw-rw- 1 norbert staff    0 Oct 14 14:20 CentOS-01-0.hdd.copy.hdd
-rw-r--r-- 1 norbert staff  21K Oct 14 14:25 DiskDescriptor.xml
-rw-r--r-- 1 norbert staff  21K Oct 14 14:25 DiskDescriptor.xml.Backup
</code></pre>

<p>Powrót do dysku w trybie &ldquo;expandable&rdquo;:</p>

<p><code>prl_disk_tool convert --expanding --split --hdd /Users/norbert/Documents/Parallels/CentOS-01.pvm/CentOS-01-0.hdd</code></p>

<p>Mała uwaga, u mnie zabawa w konwersje zakończyła się komunikatem:</p>

<p><code>Not enough free space on the physical disk to complete the operation.</code></p>

<p>Dlatego warto się upewnić, że kiedy dysk nam &ldquo;spuchnie&rdquo; to będziemy mieć drugie tyle miejsca na jego odchudzanie albo pod ręką jakiś w miarę szybki dysk na którym będzie można tą operację wykonać</p>

<p>Rozszerzenie wirtualnego dysku:</p>

<p><code>prl_disk_tool resize --size 105G --split --hdd /Users/norbert/Documents/Parallels/CentOS-01.pvm/CentOS-01-0.hdd</code></p>

<p>Powyższe polecenie nie zawsze zwiększy od razu przestrzeń dostępną w wirtualnej maszynie, w zależności od systemu jaki na niej jest może być konieczne użycie narzędzi dyskowych systemu gościa. Dlatego najlepiej od razu definiować całkiem duży dysk w trybie &ldquo;expandable&rdquo; z podziałem dysku wirtualnego na 2GB części.</p>
</div>
  
  





    </article>
  
  
    <article>
      
  <header>
   
	<!-- Now we're back to normal posts. Note the links used under href in both headers.-->
	 	<h1 class="entry-title"><a href="/2012/09/16/centos-na-parallels/">CentOS na Parallels</a></h1>
		
  	 
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-09-16T18:49:30+00:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>6:49 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Wirtualizacja to jedna z technologii, jakie zdecydowanie podniosły komfort pracy wielu osobom. Pomijam oszczędności wynikające z lepszej utylizacji sprzętu, ale kiedy przypomnę sobie jak kiedyś przygotowywałem się do egzaminów MS ze stertą blaszaków stojących jeden na drugim, to do tej pory przechodzą mnie dreszcze. Olbrzymia strata czasu. Teraz mając 16GB pamięci można sobie postawić całkiem rozbudowane środowisko, testować, robić snapshoty i co tam dusza zapragnie.</p>

<p>Właśnie skończyłem instalować CentOS-a na Parallels. Poniżej kilka kroków, jakie zazwyczaj wykonuje po tej opercji.</p>

<p>Dodanie uzytkownika do <code>sudoers</code>. Przechodzimy na root-a <code>su -</code> i uruchamiamy edytor <code>visudo</code> następnie dopisujemy swojego użytkownika, poniżej root-a np.</p>

<pre><code>## Allow root to run any commands anywhere
root    ALL=(ALL)       ALL
norbert ALL=(ALL)       ALL
</code></pre>

<p>Instalacja Paralles Tools. Jeśli jest zamontowana płyta instalacyjna CentOS należy ją odmontować, a następnie z menu wybieramy &ldquo;Virtual Machine&rdquo; i &ldquo;Install Paralles Tools&hellip;&rdquo;, potem</p>

<pre><code>cd /media/Parallels\ Tools/
sudo ./install
</code></pre>

<p>Później wybieramy tylko kilka razy &ldquo;Next&rdquo; i restartujemy maszynę.</p>

<p><img src="/images/centos_parallels_01.png"></p>

<p>Ustawienie nazwy hosta, <code>vi /etc/sysconfig/network</code></p>

<pre><code>NETWORKING=yes
NETWORKING_IPV6=no
HOSTNAME=centos-02.local
</code></pre>

<p>Ustawienie automatycznego uruchamiania ssh i jego uruchomienie</p>

<pre><code>sudo chkconfig sshd on
sudo service sshd start
</code></pre>

<p>Włączenie automatycznego logowania, <code>vi /etc/gdm/custom.conf</code></p>

<pre><code>[daemon]
AutomaticLoginEnable=true
AutomaticLogin=norbert
</code></pre>

<p>Wyłączenie wygaszacza ekranu, dzięki któremu maszyna nie będzie automatycznie blokowana.</p>

<p><code>sudo gconftool-2 --direct --config-source xml:readwrite:/etc/gconf/gconf.xml.mandatory --type bool --set /apps/gnome-screensaver/idle_activation_enabled false</code></p>

<p>Uruchamianie maszyny w trybie tekstowym, zazwyczaj nie potrzebuje interfejsu graficznego. Edycja <code>vi /etc/inittab</code>, zmiana wartości <code>id</code> na 3</p>

<pre><code># Default runlevel. The runlevels used are:
#   0 - halt (Do NOT set initdefault to this)
#   1 - Single user mode
#   2 - Multiuser, without NFS (The same as 3, if you do not have networking)
#   3 - Full multiuser mode
#   4 - unused
#   5 - X11
#   6 - reboot (Do NOT set initdefault to this)
#
id:3:initdefault:
</code></pre>

<p>Parallels ma bardzo pożyteczne polecenie <code>prlctl</code>. Wylistowanie wszystkich zainstalowanych maszyn wirtualnych <code>prlctl list -a</code></p>

<p><img src="/images/centos_parallels_02.png"></p>

<p>Uruchomienie maszyny to <code>prlctl start CentOS-01</code></p>

<p><img src="/images/centos_parallels_03.png"></p>

<p>To co jest najlepsze w powyższym poleceniu to to, że wirtualna maszyna uruchamiana jest w tle i nie pojawia się okno aplikacji Parallels. Do maszyny można się dostać np. przez ssh, jak dla mnie to rewelacja.</p>

<p>Bardzo mile zaskakuje całkiem niskie obciążenie systemu. Przy uruchomionych czterech maszynach wirtualnych 2xCentOS w trybie graficznym z dysku USB 3.0 (pomarańczowa strzałka), 1xCentOS w trybie tekstowym (zielona), 1xOSX Mountain Lion (niebieska) zajętość procesora sięga tylko ok. 10%. Na systemach nic się nie dzieje, jest tylko zalogowany użytkownik ale i tak wydaje mi się, że to całkiem nieźle. Tym bardziej, że to MBA. Jak widać jeśli nie potrzebujemy grafiki to warto uruchamiać wirtualne OS-y w trybie tekstowym na co wskazuje zielona strzałka.</p>

<p><img src="/images/centos_parallels_04.png"></p>
</div>
  
  





    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/4">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/2">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2018/05/05/Ubuntu-18-04/">WSL - Ubuntu 18.04 - xfce4-terminal</a>
      </li>
    
      <li class="post">
        <a href="/2017/12/01/Unraid-part-1/">Home Cloud</a>
      </li>
    
      <li class="post">
        <a href="/2016/09/27/the-cuttle/">The Cuttle - Boldport Club</a>
      </li>
    
      <li class="post">
        <a href="/2016/05/27/picocom-na-cygwin-slash-windows10/">Picocom na Cygwin/Windows10</a>
      </li>
    
      <li class="post">
        <a href="/2015/10/18/iptables-i-dynamiczne-ip/">Iptables i dynamiczne IP</a>
      </li>
    
  </ul>
</section>




<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/android' style='font-size: 103.15789473684211%'>android</a> <a href='/blog/categories/arduino' style='font-size: 103.15789473684211%'>arduino</a> <a href='/blog/categories/curiosities' style='font-size: 103.15789473684211%'>curiosities</a> <a href='/blog/categories/electronics' style='font-size: 106.3157894736842%'>electronics</a> <a href='/blog/categories/linux' style='font-size: 122.10526315789474%'>linux</a> <a href='/blog/categories/mavericks' style='font-size: 103.15789473684211%'>mavericks</a> <a href='/blog/categories/mountain-lion' style='font-size: 141.05263157894737%'>mountain lion</a> <a href='/blog/categories/netflix' style='font-size: 103.15789473684211%'>netflix</a> <a href='/blog/categories/openwrt' style='font-size: 103.15789473684211%'>openwrt</a> <a href='/blog/categories/osx' style='font-size: 160.0%'>osx</a> <a href='/blog/categories/raspberry-pi' style='font-size: 109.47368421052632%'>raspberry pi</a> <a href='/blog/categories/shell' style='font-size: 103.15789473684211%'>shell</a> <a href='/blog/categories/terminal' style='font-size: 103.15789473684211%'>terminal</a> <a href='/blog/categories/tips' style='font-size: 106.3157894736842%'>tips</a> <a href='/blog/categories/unraid' style='font-size: 103.15789473684211%'>unraid</a> <a href='/blog/categories/windows' style='font-size: 109.47368421052632%'>windows</a> <a href='/blog/categories/wsl' style='font-size: 103.15789473684211%'>wsl</a> <a href='/blog/categories/xbmc' style='font-size: 103.15789473684211%'>xbmc</a> <a href='/blog/categories/yosemite' style='font-size: 103.15789473684211%'>yosemite</a> </span>
</section>

<section>

    <p></p>
<span id="google_translate_element"></span>

</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2019 - itoutline.me -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'itoutlineme';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<script type="text/javascript">

  var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34734923-1']);
      _gaq.push(['_trackPageview']);

        (function() {
	     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	         ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		       })();

</script>


</body>
</html>
